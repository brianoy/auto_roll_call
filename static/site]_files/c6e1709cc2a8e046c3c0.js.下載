(window.webpackJsonp=window.webpackJsonp||[]).push([[284,246,323,433],{2658:function(e,t,o){"use strict";o.d(t,"a",(function(){return ae}));var n=o(2136),r=o(2135),l=o(2221),d=o(2159),c=o(2543),h=o(2144),y=o(2352),f=o(2145);function v(e,t){var o=e.isExpand?e.children:[],n=e.parentNode.children,r=e.hierNode.i?n[e.hierNode.i-1]:null;if(o.length){!function(e){var t=e.children,o=t.length,n=0,r=0;for(;--o>=0;){var l=t[o];l.hierNode.prelim+=n,l.hierNode.modifier+=n,r+=l.hierNode.change,n+=l.hierNode.shift+r}}(e);var l=(o[0].hierNode.prelim+o[o.length-1].hierNode.prelim)/2;r?(e.hierNode.prelim=r.hierNode.prelim+t(e,r),e.hierNode.modifier=e.hierNode.prelim-l):e.hierNode.prelim=l}else r&&(e.hierNode.prelim=r.hierNode.prelim+t(e,r));e.parentNode.hierNode.defaultAncestor=function(e,t,o,n){if(t){for(var r=e,l=e,d=l.parentNode.children[0],c=t,h=r.hierNode.modifier,y=l.hierNode.modifier,f=d.hierNode.modifier,v=c.hierNode.modifier;c=I(c),l=L(l),c&&l;){r=I(r),d=L(d),r.hierNode.ancestor=e;var m=c.hierNode.prelim+v-l.hierNode.prelim-y+n(c,l);m>0&&(M(_(c,e,o),e,m),y+=m,h+=m),v+=c.hierNode.modifier,y+=l.hierNode.modifier,h+=r.hierNode.modifier,f+=d.hierNode.modifier}c&&!I(r)&&(r.hierNode.thread=c,r.hierNode.modifier+=v-h),l&&!L(d)&&(d.hierNode.thread=l,d.hierNode.modifier+=y-f,o=e)}return o}(e,r,e.parentNode.hierNode.defaultAncestor||n[0],t)}function m(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function x(e){return arguments.length?e:N}function w(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function I(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function L(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function _(e,t,o){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:o}function M(e,t,o){var n=o/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=o,t.hierNode.modifier+=o,t.hierNode.prelim+=o,e.hierNode.change+=n}function N(e,t){return e.parentNode===t.parentNode?1:2}var O=o(2337),S=o(2349),j=o(2424),D=o(2281),T=o(2350),A=o(2139),R=o(2152),V=o(2148),C=o(2140),P=function(){this.parentPoint=[],this.childPoints=[]},E=function(e){function t(t){return e.call(this,t)||this}return Object(n.a)(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new P},t.prototype.buildPath=function(e,t){var o=t.childPoints,n=o.length,r=t.parentPoint,l=o[0],d=o[n-1];if(1===n)return e.moveTo(r[0],r[1]),void e.lineTo(l[0],l[1]);var c=t.orient,h="TB"===c||"BT"===c?0:1,y=1-h,f=Object(A.p)(t.forkPosition,1),v=[];v[h]=r[h],v[y]=r[y]+(d[y]-r[y])*f,e.moveTo(r[0],r[1]),e.lineTo(v[0],v[1]),e.moveTo(l[0],l[1]),v[h]=l[h],e.lineTo(v[0],v[1]),v[h]=d[h],e.lineTo(v[0],v[1]),e.lineTo(d[0],d[1]);for(var i=1;i<n-1;i++){var m=o[i];e.moveTo(m[0],m[1]),v[h]=m[h],e.lineTo(v[0],v[1])}},t}(V.b);function k(data,e){var t=data.getItemLayout(e);return t&&!isNaN(t.x)&&!isNaN(t.y)}function G(data,e,t,o,n){var l=!t,f=data.tree.getNodeByDataIndex(e),v=f.getModel(),m=f.getVisual("style").fill,x=!1===f.isExpand&&0!==f.children.length?m:"#fff",w=data.tree.root,source=f.parentNode===w?f:f.parentNode||f,I=data.getItemGraphicEl(source.dataIndex),L=source.getLayout(),_=I?{x:I.__oldX,y:I.__oldY,rawX:I.__radialOldRawX,rawY:I.__radialOldRawY}:L,M=f.getLayout();l?((t=new y.a(data,e,null,{symbolInnerColor:x,useNameLabel:!0})).x=_.x,t.y=_.y):t.updateData(data,e,null,{symbolInnerColor:x,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=M.rawX,t.__radialRawY=M.rawY,o.add(t),data.setItemGraphicEl(e,t),t.__oldX=t.x,t.__oldY=t.y,d.h(t,{x:M.x,y:M.y},n);var N=t.getSymbolPath();if("radial"===n.get("layout")){var O=w.children[0],S=O.getLayout(),j=O.children.length,D=void 0,T=void 0;if(M.x===S.x&&!0===f.isExpand&&O.children.length){var A={x:(O.children[0].getLayout().x+O.children[j-1].getLayout().x)/2,y:(O.children[0].getLayout().y+O.children[j-1].getLayout().y)/2};(D=Math.atan2(A.y-S.y,A.x-S.x))<0&&(D=2*Math.PI+D),(T=A.x<S.x)&&(D-=Math.PI)}else(D=Math.atan2(M.y-S.y,M.x-S.x))<0&&(D=2*Math.PI+D),0===f.children.length||0!==f.children.length&&!1===f.isExpand?(T=M.x<S.x)&&(D-=Math.PI):(T=M.x>S.x)||(D-=Math.PI);var R=T?"left":"right",V=v.getModel("label"),P=V.get("rotate"),k=P*(Math.PI/180),G=N.getTextContent();G&&(N.setTextConfig({position:V.get("position")||R,rotation:null==P?-D:k,origin:"center"}),G.setStyle("verticalAlign","middle"))}var B=v.get(["emphasis","focus"]),z="relative"===B?r.concatArray(f.getAncestorsIndices(),f.getDescendantIndices()):"ancestor"===B?f.getAncestorsIndices():"descendant"===B?f.getDescendantIndices():null;z&&(Object(h.a)(t).focus=z),function(e,t,o,n,l,h,y,f){var v=t.getModel(),m=e.get("edgeShape"),x=e.get("layout"),w=e.getOrient(),I=e.get(["lineStyle","curveness"]),L=e.get("edgeForkPosition"),_=v.getModel("lineStyle").getLineStyle(),M=n.__edge;if("curve"===m)t.parentNode&&t.parentNode!==o&&(M||(M=n.__edge=new c.a({shape:X(x,w,I,l,l)})),d.h(M,{shape:X(x,w,I,h,y)},e));else if("polyline"===m)if("orthogonal"===x){if(t!==o&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var N=t.children,O=[],i=0;i<N.length;i++){var S=N[i].getLayout();O.push([S.x,S.y])}M||(M=n.__edge=new E({shape:{parentPoint:[y.x,y.y],childPoints:[[y.x,y.y]],orient:w,forkPosition:L}})),d.h(M,{shape:{parentPoint:[y.x,y.y],childPoints:O}},e)}}else 0;M&&("polyline"!==m||t.isExpand)&&(M.useStyle(r.defaults({strokeNoScale:!0,fill:null},_)),Object(C.I)(M,v,"lineStyle"),Object(C.G)(M),f.add(M))}(n,f,w,t,_,L,M,o),t.__edge&&(t.onHoverStateChange=function(e){if("blur"!==e){var o=f.parentNode&&data.getItemGraphicEl(f.parentNode.dataIndex);o&&o.hoverState===C.d||Object(C.H)(t.__edge,e)}})}function B(e,data,t,o,n){var r=z(data.tree.root,e),source=r.source,l=r.sourceLayout,c=data.getItemGraphicEl(e.dataIndex);if(c){var h=data.getItemGraphicEl(source.dataIndex).__edge,y=c.__edge||(!1===source.isExpand||1===source.children.length?h:void 0),f=o.get("edgeShape"),v=o.get("layout"),m=o.get("orient"),x=o.get(["lineStyle","curveness"]);y&&("curve"===f?d.e(y,{shape:X(v,m,x,l,l),style:{opacity:0}},o,{cb:function(){t.remove(y)},removeOpt:n}):"polyline"===f&&"orthogonal"===o.get("layout")&&d.e(y,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},o,{cb:function(){t.remove(y)},removeOpt:n}))}}function z(e,t){for(var o,source=t.parentNode===e?t:t.parentNode||t;null==(o=source.getLayout());)source=source.parentNode===e?source:source.parentNode||source;return{source:source,sourceLayout:o}}function W(data,e,t,o,n){var r=data.tree.getNodeByDataIndex(e),l=z(data.tree.root,r).sourceLayout,c={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};d.e(t,{x:l.x+1,y:l.y+1},n,{cb:function(){o.remove(t),data.setItemGraphicEl(e,null)},removeOpt:c}),t.fadeOut(null,data.hostModel,{fadeLabel:!0,animation:c}),r.children.forEach((function(e){B(e,data,o,n,c)})),B(r,data,o,n,c)}function X(e,t,o,n,r){var l,d,c,h,y,f,v,m;if("radial"===e){y=n.rawX,v=n.rawY,f=r.rawX,m=r.rawY;var x=w(y,v),I=w(y,v+(m-v)*o),L=w(f,m+(v-m)*o),_=w(f,m);return{x1:x.x||0,y1:x.y||0,x2:_.x||0,y2:_.y||0,cpx1:I.x||0,cpy1:I.y||0,cpx2:L.x||0,cpy2:L.y||0}}return y=n.x,v=n.y,f=r.x,m=r.y,"LR"!==t&&"RL"!==t||(l=y+(f-y)*o,d=v,c=f+(y-f)*o,h=m),"TB"!==t&&"BT"!==t||(l=y,d=v+(m-v)*o,c=f,h=m+(v-m)*o),{x1:y,y1:v,x2:f,y2:m,cpx1:l,cpy1:d,cpx2:c,cpy2:h}}var H=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._mainGroup=new l.a,o}return Object(n.a)(t,e),t.prototype.init=function(e,t){this._controller=new D.a(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,t,o){var data=e.getData(),n=e.layoutInfo,r=this._mainGroup;"radial"===e.get("layout")?(r.x=n.x+n.width/2,r.y=n.y+n.height/2):(r.x=n.x,r.y=n.y),this._updateViewCoordSys(e,o),this._updateController(e,t,o);var l=this._data;data.diff(l).add((function(t){k(data,t)&&G(data,t,null,r,e)})).update((function(t,o){var n=l.getItemGraphicEl(o);k(data,t)?G(data,t,n,r,e):n&&W(l,o,n,r,e)})).remove((function(t){var o=l.getItemGraphicEl(t);o&&W(l,t,o,r,e)})).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&data.eachItemGraphicEl((function(t,n){t.off("click").on("click",(function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:n})}))})),this._data=data},t.prototype._updateViewCoordSys=function(e,t){var data=e.getData(),o=[];data.each((function(e){var t=data.getItemLayout(e);!t||isNaN(t.x)||isNaN(t.y)||o.push([+t.x,+t.y])}));var n=[],r=[];O.d(o,n,r);var l=this._min,d=this._max;r[0]-n[0]==0&&(n[0]=l?l[0]:n[0]-1,r[0]=d?d[0]:r[0]+1),r[1]-n[1]==0&&(n[1]=l?l[1]:n[1]-1,r[1]=d?d[1]:r[1]+1);var c=e.coordinateSystem=new S.a;c.zoomLimit=e.get("scaleLimit"),c.setBoundingRect(n[0],n[1],r[0]-n[0],r[1]-n[1]),c.setCenter(e.get("center"),t),c.setZoom(e.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=n,this._max=r},t.prototype._updateController=function(e,t,o){var n=this,r=this._controller,l=this._controllerHost,d=this.group;r.setPointerChecker((function(t,n,r){var rect=d.getBoundingRect();return rect.applyTransform(d.transform),rect.contain(n,r)&&!Object(T.a)(t,o,e)})),r.enable(e.get("roam")),l.zoomLimit=e.get("scaleLimit"),l.zoom=e.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",(function(t){j.a(l,t.dx,t.dy),o.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){j.b(l,t.scale,t.originX,t.originY),o.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),n._updateNodeAndLinkScale(e),o.updateLabelLayout()}))},t.prototype._updateNodeAndLinkScale=function(e){var data=e.getData(),t=this._getNodeGlobalScale(e);data.eachItemGraphicEl((function(e,o){e.setSymbolScale(t)}))},t.prototype._getNodeGlobalScale=function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var o=this._nodeScaleRatio,n=t.scaleX||1;return((t.getZoom()-1)*o+1)/n},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(R.a),Y=o(2153),F=o(2434),Z=o(2157),U=o(2178),J=o(2226),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return Object(n.a)(t,e),t.prototype.getInitialData=function(option){var e={name:option.name,children:option.data},t=option.leaves||{},o=new Z.a(t,this,this.ecModel),n=F.a.createTree(e,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var r=n.getNodeByDataIndex(t);return r&&r.children.length&&r.isExpand||(e.parentModel=o),e}))}));var r=0;n.eachNode("preorder",(function(e){e.depth>r&&(r=e.depth)}));var l=option.expandAndCollapse&&option.initialTreeDepth>=0?option.initialTreeDepth:r;return n.root.eachNode("preorder",(function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=l})),n.data},t.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,t,o){for(var n=this.getData().tree,r=n.root.children[0],l=n.getNodeByDataIndex(e),d=l.getValue(),c=l.name;l&&l!==r;)c=l.parentNode.name+"."+c,l=l.parentNode;return Object(U.c)("nameValue",{name:c,value:d,noValue:isNaN(d)||null==d})},t.prototype.getDataParams=function(t){var o=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return o.treeAncestors=Object(J.d)(n,this),o.collapsed=!n.isExpand,o},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Y.b);function Q(e,t){for(var o,n=[e];o=n.pop();)if(t(o),o.isExpand){var r=o.children;if(r.length)for(var i=r.length-1;i>=0;i--)n.push(r[i])}}function $(e,t){e.eachSeriesByType("tree",(function(e){!function(e,t){var o=function(e,t){return f.g(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=o;var n=e.get("layout"),r=0,l=0,d=null;"radial"===n?(r=2*Math.PI,l=Math.min(o.height,o.width)/2,d=x((function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth}))):(r=o.width,l=o.height,d=x());var c=e.getData().tree.root,h=c.children[0];if(h){!function(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var o,n,r=[t];o=r.pop();)if(n=o.children,o.isExpand&&n.length)for(var i=n.length-1;i>=0;i--){var l=n[i];l.hierNode={defaultAncestor:null,ancestor:l,prelim:0,modifier:0,change:0,shift:0,i:i,thread:null},r.push(l)}}(c),function(e,t,o){for(var n,r=[e],l=[];n=r.pop();)if(l.push(n),n.isExpand){var d=n.children;if(d.length)for(var i=0;i<d.length;i++)r.push(d[i])}for(;n=l.pop();)t(n,o)}(h,v,d),c.hierNode.modifier=-h.hierNode.prelim,Q(h,m);var y=h,I=h,L=h;Q(h,(function(e){var t=e.getLayout().x;t<y.getLayout().x&&(y=e),t>I.getLayout().x&&(I=e),e.depth>L.depth&&(L=e)}));var _=y===I?1:d(y,I)/2,M=_-y.getLayout().x,N=0,O=0,S=0,j=0;if("radial"===n)N=r/(I.getLayout().x+_+M),O=l/(L.depth-1||1),Q(h,(function(e){S=(e.getLayout().x+M)*N,j=(e.depth-1)*O;var t=w(S,j);e.setLayout({x:t.x,y:t.y,rawX:S,rawY:j},!0)}));else{var D=e.getOrient();"RL"===D||"LR"===D?(O=l/(I.getLayout().x+_+M),N=r/(L.depth-1||1),Q(h,(function(e){j=(e.getLayout().x+M)*O,S="LR"===D?(e.depth-1)*N:r-(e.depth-1)*N,e.setLayout({x:S,y:j},!0)}))):"TB"!==D&&"BT"!==D||(N=r/(I.getLayout().x+_+M),O=l/(L.depth-1||1),Q(h,(function(e){S=(e.getLayout().x+M)*N,j="TB"===D?(e.depth-1)*O:l-(e.depth-1)*O,e.setLayout({x:S,y:j},!0)})))}}}(e,t)}))}function ee(e){e.eachSeriesByType("tree",(function(e){var data=e.getData();data.tree.eachNode((function(e){var style=e.getModel().getModel("itemStyle").getItemStyle(),t=data.ensureUniqueItemVisual(e.dataIndex,"style");Object(r.extend)(t,style)}))}))}var te=o(2425);function ae(e){e.registerChartView(H),e.registerSeriesModel(K),e.registerLayout($),e.registerVisual(ee),function(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var o=e.dataIndex,n=t.getData().tree.getNodeByDataIndex(o);n.isExpand=!n.isExpand}))})),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},(function(e,t,o){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var n=t.coordinateSystem,r=Object(te.a)(n,e,void 0,o);t.setCenter&&t.setCenter(r.center),t.setZoom&&t.setZoom(r.zoom)}))}))}(e)}},2659:function(e,t,o){"use strict";o.d(t,"a",(function(){return ve}));var n=o(2226),r=o(2135),l=["treemapZoomToNode","treemapRender","treemapMove"];var d=o(2136),c=o(2153),h=o(2434),y=o(2157),f=o(2138),v=o(2178),m=o(2596);var x=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o.preventUsingHoverLayer=!0,o}return Object(d.a)(t,e),t.prototype.getInitialData=function(option,e){var t={name:option.name,children:option.data};!function e(t){var o=0;r.each(t.children,(function(t){e(t);var n=t.value;r.isArray(n)&&(n=n[0]),o+=n}));var n=t.value;r.isArray(n)&&(n=n[0]);(null==n||isNaN(n))&&(n=o);n<0&&(n=0);r.isArray(t.value)?t.value[0]=n:t.value=n}(t);var o=option.levels||[],n=this.designatedVisualItemStyle={},l=new y.a({itemStyle:n},this,e);o=option.levels=function(e,t){var o,n,l=Object(f.r)(t.get("color")),d=Object(f.r)(t.get(["aria","decal","decals"]));if(!l)return;e=e||[],r.each(e,(function(e){var t=new y.a(e),r=t.get("color"),l=t.get("decal");(t.get(["itemStyle","color"])||r&&"none"!==r)&&(o=!0),(t.get(["itemStyle","decal"])||l&&"none"!==l)&&(n=!0)}));var c=e[0]||(e[0]={});o||(c.color=l.slice());!n&&d&&(c.decal=d.slice());return e}(o,e);var d=r.map(o||[],(function(t){return new y.a(t,l,e)}),this),c=h.a.createTree(t,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var o=c.getNodeByDataIndex(t),n=o?d[o.depth]:null;return e.parentModel=n||l,e}))}));return c.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,t,o){var data=this.getData(),n=this.getRawValue(e),r=data.getName(e);return Object(v.c)("nameValue",{name:r,value:n})},t.prototype.getDataParams=function(t){var o=e.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(t);return o.treeAncestors=Object(n.d)(r,this),o.treePathInfo=o.treeAncestors,o},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},r.extend(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=r.createHashMap(),this._idIndexMapCount=0);var o=t.get(e);return null==o&&t.set(e,o=this._idIndexMapCount++),o},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){Object(m.a)(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(c.b),w=o(2221),I=o(2267),L=o(2144),_=o(2140),M=o(2224),N=o(2339),O=o(2235),S=o(2145);function j(e,t,o,n,head,r){var l=[[head?e:e-5,t],[e+o,t],[e+o,t+n],[head?e:e-5,t+n]];return!r&&l.splice(2,0,[e+o+5,t+n/2]),!head&&l.push([e,t+n/2]),l}function D(e,t,o){Object(L.a)(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:o&&o.dataIndex,name:o&&o.name},treePathInfo:o&&Object(n.d)(o,t)}}var T=function(){function e(e){this.group=new w.a,e.add(this.group)}return e.prototype.render=function(e,t,o,n){var r=e.getModel("breadcrumb"),l=this.group;if(l.removeAll(),r.get("show")&&o){var d=r.getModel("itemStyle"),c=d.getModel("textStyle"),h={pos:{left:r.get("left"),right:r.get("right"),top:r.get("top"),bottom:r.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:r.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(o,h,c),this._renderContent(e,h,d,c,n),S.i(l,h.pos,h.box)}},e.prototype._prepare=function(e,t,o){for(var n=e;n;n=n.parentNode){var text=Object(f.e)(n.getModel().get("name"),""),r=o.getTextRect(text),l=Math.max(r.width+16,t.emptyItemWidth);t.totalWidth+=l+8,t.renderList.push({node:n,text:text,width:l})}},e.prototype._renderContent=function(e,t,o,n,l){for(var d=0,c=t.emptyItemWidth,h=e.get(["breadcrumb","height"]),y=S.e(t.pos,t.box),f=t.totalWidth,v=t.renderList,i=v.length-1;i>=0;i--){var m=v[i],x=m.node,w=m.width,text=m.text;f>y.width&&(f-=w-c,w=c,text=null);var I=new N.a({shape:{points:j(d,0,w,h,i===v.length-1,0===i)},style:Object(r.defaults)(o.getItemStyle(),{lineJoin:"bevel"}),textContent:new O.a({style:{text:text,fill:n.getTextColor(),font:n.getFont()}}),textConfig:{position:"inside"},z2:1e4*_.j,onclick:Object(r.curry)(l,x)});I.disableLabelAnimation=!0,this.group.add(I),D(I,e,x),d+=w+8}},e.prototype.remove=function(){this.group.removeAll()},e}(),A=o(2281),R=o(2147),V=o(2167),C=o(3074),P=o(2254),E=o(2152),k=o(2185),G=o(2156),B=o(2143),z=w.a,W=I.a,X=10*_.j,H=2*_.j,Y=3*_.j,F=Object(P.a)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Z=function(e){var t=F(e);return t.stroke=t.fill=t.lineWidth=null,t},U=Object(f.o)();var J=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._state="ready",o._storage={nodeGroup:[],background:[],content:[]},o}return Object(d.a)(t,e),t.prototype.render=function(e,t,o,l){var d=t.findComponents({mainType:"series",subType:"treemap",query:l});if(!(Object(r.indexOf)(d,e)<0)){this.seriesModel=e,this.api=o,this.ecModel=t;var c=n.c(l,["treemapZoomToNode","treemapRootToNode"],e),h=l&&l.type,y=e.layoutInfo,f=!this._oldTree,v=this._storage,m="treemapRootToNode"===h&&c&&v?{rootNodeGroup:v.nodeGroup[c.node.getRawIndex()],direction:l.direction}:null,x=this._giveContainerGroup(y),w=e.get("animation"),I=this._doRender(x,e,m);!w||f||h&&"treemapZoomToNode"!==h&&"treemapRootToNode"!==h?I.renderFinally():this._doAnimation(x,I,e,m),this._resetController(o),this._renderBreadcrumb(e,o,c)}},t.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new z,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},t.prototype._doRender=function(e,t,o){var n=t.getData().tree,l=this._oldTree,d={nodeGroup:[],background:[],content:[]},c={nodeGroup:[],background:[],content:[]},h=this._storage,y=[];function v(e,n,l,v){return function(e,t,o,n,l,d,c,h,y,v){if(!c)return;var m=c.getLayout(),data=e.getData(),x=c.getModel();if(data.setItemGraphicEl(c.dataIndex,null),!m||!m.isInView)return;var I=m.width,M=m.height,N=m.borderWidth,O=m.invisible,S=c.getRawIndex(),j=h&&h.getRawIndex(),D=c.viewChildren,T=m.upperHeight,A=D&&D.length,R=x.getModel("itemStyle"),V=x.getModel(["emphasis","itemStyle"]),C=x.getModel(["blur","itemStyle"]),P=x.getModel(["select","itemStyle"]),E=R.get("borderRadius")||0,G=re("nodeGroup",z);if(!G)return;if(y.add(G),G.x=m.x||0,G.y=m.y||0,G.markRedraw(),U(G).nodeWidth=I,U(G).nodeHeight=M,m.isAboveViewRoot)return G;var J=re("background",W,v,H);J&&function(t,o,n){var r=Object(L.a)(o);if(r.dataIndex=c.dataIndex,r.seriesIndex=e.seriesIndex,o.setShape({x:0,y:0,width:I,height:M,r:E}),O)ae(o);else{o.invisible=!1;var style=c.getVisual("style"),l=style.stroke,d=Z(R);d.fill=l;var h=F(V);h.fill=V.get("borderColor");var y=F(C);y.fill=C.get("borderColor");var f=F(P);if(f.fill=P.get("borderColor"),n){var v=I-2*N;oe(o,l,style.opacity,{x:N,y:0,width:v,height:T})}else o.removeTextContent();o.setStyle(d),o.ensureState("emphasis").style=h,o.ensureState("blur").style=y,o.ensureState("select").style=f,Object(_.G)(o)}t.add(o)}(G,J,A&&m.upperLabelHeight);var K=x.getModel("emphasis"),Q=K.get("focus"),$=K.get("blurScope"),ee=K.get("disabled"),te="ancestor"===Q?c.getAncestorsIndices():"descendant"===Q?c.getDescendantIndices():Q;if(A)Object(_.y)(G)&&Object(_.F)(G,!1),J&&(Object(_.F)(J,!ee),data.setItemGraphicEl(c.dataIndex,J),Object(_.p)(J,te,$));else{var content=re("content",W,v,Y);content&&function(t,content){var o=Object(L.a)(content);o.dataIndex=c.dataIndex,o.seriesIndex=e.seriesIndex;var n=Math.max(I-2*N,0),r=Math.max(M-2*N,0);if(content.culling=!0,content.setShape({x:N,y:N,width:n,height:r,r:E}),O)ae(content);else{content.invisible=!1;var l=c.getVisual("style"),d=l.fill,h=Z(R);h.fill=d,h.decal=l.decal;var y=F(V),f=F(C),v=F(P);oe(content,d,l.opacity,null),content.setStyle(h),content.ensureState("emphasis").style=y,content.ensureState("blur").style=f,content.ensureState("select").style=v,Object(_.G)(content)}t.add(content)}(G,content),J.disableMorphing=!0,J&&Object(_.y)(J)&&Object(_.F)(J,!1),Object(_.F)(G,!ee),data.setItemGraphicEl(c.dataIndex,G),Object(_.p)(G,te,$)}return G;function ae(element){!element.invisible&&d.push(element)}function oe(t,o,n,l){var d=x.getModel(l?"upperLabel":"label"),h=Object(f.e)(x.get("name"),null),y=d.getShallow("show");Object(B.g)(t,Object(B.e)(x,l?"upperLabel":"label"),{defaultText:y?h:null,inheritColor:o,defaultOpacity:n,labelFetcher:e,labelDataIndex:c.dataIndex});var v=t.getTextContent();if(v){var w=v.style,I=Object(r.normalizeCssArray)(w.padding||0);l&&(t.setTextConfig({layoutRect:l}),v.disableLabelLayout=!0),v.beforeUpdate=function(){var e=Math.max((l?l.width:t.shape.width)-I[1]-I[3],0),o=Math.max((l?l.height:t.shape.height)-I[0]-I[2],0);w.width===e&&w.height===o||v.setStyle({width:e,height:o})},w.truncateMinChar=2,w.lineOverflow="truncate",ne(w,l,m);var L=v.getState("emphasis");ne(L?L.style:null,l,m)}}function ne(style,t,o){var text=style?style.text:null;if(!t&&o.isLeafRoot&&null!=text){var n=e.get("drillDownIcon",!0);style.text=n?n+" "+text:text}}function re(e,d,h,y){var element=null!=j&&o[e][j],f=l[e];return element?(o[e][j]=null,function(e,element){var t=e[S]={};element instanceof z?(t.oldX=element.x,t.oldY=element.y):t.oldShape=Object(r.extend)({},element.shape)}(f,element)):O||((element=new d)instanceof k.c&&(element.z2=function(e,t){return e*X+t}(h,y)),function(e,element){var t=e[S]={},o=c.parentNode,r=element instanceof w.a;if(o&&(!n||"drillDown"===n.direction)){var d=0,h=0,y=l.background[o.getRawIndex()];!n&&y&&y.oldShape&&(d=y.oldShape.width,h=y.oldShape.height),r?(t.oldX=0,t.oldY=h):t.oldShape={x:d,y:h,width:0,height:0}}t.fadein=!r}(f,element)),t[e][S]=element}}(t,c,h,o,d,y,e,n,l,v)}!function e(t,o,n,l,d){l?(o=t,Object(r.each)(t,(function(e,t){!e.isRemoved()&&h(t,t)}))):new M.a(o,t,c,c).add(h).update(h).remove(Object(r.curry)(h,null)).execute();function c(e){return e.getId()}function h(r,c){var h=null!=r?t[r]:null,y=null!=c?o[c]:null,f=v(h,y,n,d);f&&e(h&&h.viewChildren||[],y&&y.viewChildren||[],f,l,d+1)}}(n.root?[n.root]:[],l&&l.root?[l.root]:[],e,n===l||!l,0);var m=function(e){var t={nodeGroup:[],background:[],content:[]};return e&&Object(r.each)(e,(function(e,o){var n=t[o];Object(r.each)(e,(function(e){e&&(n.push(e),U(e).willDelete=!0)}))})),t}(h);return this._oldTree=n,this._storage=c,{lastsForAnimation:d,willDeleteEls:m,renderFinally:function(){Object(r.each)(m,(function(e){Object(r.each)(e,(function(e){e.parent&&e.parent.remove(e)}))})),Object(r.each)(y,(function(e){e.invisible=!0,e.dirty()}))}}},t.prototype._doAnimation=function(e,t,o,n){var l=o.get("animationDurationUpdate"),d=o.get("animationEasing"),c=(Object(r.isFunction)(l)?0:l)||0,h=(Object(r.isFunction)(d)?null:d)||"cubicOut",y=C.a();Object(r.each)(t.willDeleteEls,(function(e,t){Object(r.each)(e,(function(e,o){if(!e.invisible){var r,l=e.parent,d=U(l);if(n&&"drillDown"===n.direction)r=l===n.rootNodeGroup?{shape:{x:0,y:0,width:d.nodeWidth,height:d.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var f=0,v=0;d.willDelete||(f=d.nodeWidth/2,v=d.nodeHeight/2),r="nodeGroup"===t?{x:f,y:v,style:{opacity:0}}:{shape:{x:f,y:v,width:0,height:0},style:{opacity:0}}}r&&y.add(e,r,c,0,h)}}))})),Object(r.each)(this._storage,(function(e,o){Object(r.each)(e,(function(e,n){var l=t.lastsForAnimation[o][n],d={};l&&(e instanceof w.a?null!=l.oldX&&(d.x=e.x,d.y=e.y,e.x=l.oldX,e.y=l.oldY):(l.oldShape&&(d.shape=Object(r.extend)({},e.shape),e.setShape(l.oldShape)),l.fadein?(e.setStyle("opacity",0),d.style={opacity:1}):1!==e.style.opacity&&(d.style={opacity:1})),y.add(e,d,c,0,h))}))}),this),this._state="animating",y.finished(Object(r.bind)((function(){this._state="ready",t.renderFinally()}),this)).start()},t.prototype._resetController=function(e){var t=this._controller;t||((t=this._controller=new A.a(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",Object(r.bind)(this._onPan,this)),t.on("zoom",Object(r.bind)(this._onZoom,this)));var rect=new R.a(0,0,e.getWidth(),e.getHeight());t.setPointerChecker((function(e,t,o){return rect.contain(t,o)}))},t.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var t=this.seriesModel.getData().tree.root;if(!t)return;var o=t.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+e.dx,y:o.y+e.dy,width:o.width,height:o.height}})}},t.prototype._onZoom=function(e){var t=e.originX,o=e.originY;if("animating"!==this._state){var n=this.seriesModel.getData().tree.root;if(!n)return;var r=n.getLayout();if(!r)return;var rect=new R.a(r.x,r.y,r.width,r.height),l=this.seriesModel.layoutInfo;t-=l.x,o-=l.y;var d=V.create();V.translate(d,d,[-t,-o]),V.scale(d,d,[e.scale,e.scale]),V.translate(d,d,[t,o]),rect.applyTransform(d),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:rect.x,y:rect.y,width:rect.width,height:rect.height}})}},t.prototype._initEvents=function(e){var t=this;e.on("click",(function(e){if("ready"===t._state){var o=t.seriesModel.get("nodeClick",!0);if(o){var n=t.findTarget(e.offsetX,e.offsetY);if(n){var r=n.node;if(r.getLayout().isLeafRoot)t._rootToNode(n);else if("zoomToNode"===o)t._zoomToNode(n);else if("link"===o){var l=r.hostTree.data.getItemModel(r.dataIndex),link=l.get("link",!0),d=l.get("target",!0)||"blank";link&&Object(G.l)(link,d)}}}}}),this)},t.prototype._renderBreadcrumb=function(e,t,o){var r=this;o||(o=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||(o={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new T(this.group))).render(e,t,o.node,(function(t){"animating"!==r._state&&(n.a(e.getViewRoot(),t)?r._rootToNode({node:t}):r._zoomToNode({node:t}))}))},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,t){var o;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},(function(n){var r=this._storage.background[n.getRawIndex()];if(r){var l=r.transformCoordToLocal(e,t),d=r.shape;if(!(d.x<=l[0]&&l[0]<=d.x+d.width&&d.y<=l[1]&&l[1]<=d.y+d.height))return!1;o={node:n,offsetX:l[0],offsetY:l[1]}}}),this),o},t.type="treemap",t}(E.a),K=o(2240),Q=o(2176),$=Object(f.o)(),ee={seriesType:"treemap",reset:function(e){var t=e.getData().tree.root;t.isRemoved()||function e(t,o,n,l){var d=t.getModel(),c=t.getLayout(),data=t.hostTree.data;if(!c||c.invisible||!c.isInView)return;var h,y=d.getModel("itemStyle"),f=function(e,t,o){var n=Object(r.extend)({},t),l=o.designatedVisualItemStyle;return Object(r.each)(["color","colorAlpha","colorSaturation"],(function(o){l[o]=t[o];var r=e.get(o);l[o]=null,null!=r&&(n[o]=r)})),n}(y,o,l),v=data.ensureUniqueItemVisual(t.dataIndex,"style"),m=y.get("borderColor"),x=y.get("borderColorSaturation");null!=x&&(h=te(f),m=function(e,t){return null!=t?Object(Q.modifyHSL)(t,null,null,e):null}(x,h));v.stroke=m;var w=t.viewChildren;if(w&&w.length){var I=function(e,t,o,n,r,l){if(!l||!l.length)return;var d=oe(t,"color")||null!=r.color&&"none"!==r.color&&(oe(t,"colorAlpha")||oe(t,"colorSaturation"));if(!d)return;var c=t.get("visualMin"),h=t.get("visualMax"),y=o.dataExtent.slice();null!=c&&c<y[0]&&(y[0]=c),null!=h&&h>y[1]&&(y[1]=h);var f=t.get("colorMappingBy"),v={type:d.name,dataExtent:y,visual:d.range};"color"!==v.type||"index"!==f&&"id"!==f?v.mappingMethod="linear":(v.mappingMethod="category",v.loop=!0);var m=new K.a(v);return $(m).drColorMappingBy=f,m}(0,d,c,0,f,w);Object(r.each)(w,(function(t,o){if(t.depth>=n.length||t===n[t.depth]){var c=function(e,t,o,n,l,d){var c=Object(r.extend)({},t);if(l){var h=l.type,y="color"===h&&$(l).drColorMappingBy,f="index"===y?n:"id"===y?d.mapIdToIndex(o.getId()):o.getValue(e.get("visualDimension"));c[h]=l.mapValueToVisual(f)}return c}(d,f,t,o,I,l);e(t,c,n,l)}}))}else h=te(f),v.fill=h}(t,{},e.getViewRoot().getAncestors(),e)}};function te(e){var t=ae(e,"color");if(t){var o=ae(e,"colorAlpha"),n=ae(e,"colorSaturation");return n&&(t=Object(Q.modifyHSL)(t,null,null,n)),o&&(t=Object(Q.modifyAlpha)(t,o)),t}}function ae(e,t){var o=e[t];if(null!=o&&"none"!==o)return o}function oe(e,t){var o=e.get(t);return Object(r.isArray)(o)&&o.length?{name:t,range:o}:null}var ne=o(2139),re=Math.max,ie=Math.min,le=r.retrieve,se=r.each,de=["itemStyle","borderWidth"],ue=["itemStyle","gapWidth"],ce=["upperLabel","show"],he=["upperLabel","height"],pe={seriesType:"treemap",reset:function(e,t,o,l){var d=o.getWidth(),c=o.getHeight(),h=e.option,y=S.g(e.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()}),f=h.size||[],v=Object(ne.p)(le(y.width,f[0]),d),m=Object(ne.p)(le(y.height,f[1]),c),x=l&&l.type,w=n.c(l,["treemapZoomToNode","treemapRootToNode"],e),I="treemapRender"===x||"treemapMove"===x?l.rootRect:null,L=e.getViewRoot(),_=n.b(L);if("treemapMove"!==x){var M="treemapZoomToNode"===x?function(e,t,o,n,r){var l,d=(t||{}).node,c=[n,r];if(!d||d===o)return c;var h=n*r,area=h*e.option.zoomToNodeRatio;for(;l=d.parentNode;){for(var y=0,f=l.children,i=0,v=f.length;i<v;i++)y+=f[i].getValue();var m=d.getValue();if(0===m)return c;area*=y/m;var x=l.getModel(),w=x.get(de),I=Math.max(w,fe(x));(area+=4*w*w+(3*w+I)*Math.pow(area,.5))>ne.a&&(area=ne.a),d=l}area<h&&(area=h);var L=Math.pow(area/h,.5);return[n*L,r*L]}(e,w,L,v,m):I?[I.width,I.height]:[v,m],N=h.sort;N&&"asc"!==N&&"desc"!==N&&(N="desc");var O={squareRatio:h.squareRatio,sort:N,leafDepth:h.leafDepth};L.hostTree.clearLayouts();var j={x:0,y:0,width:M[0],height:M[1],area:M[0]*M[1]};L.setLayout(j),function e(t,o,n,l){var d,c;if(t.isRemoved())return;var h=t.getLayout();d=h.width,c=h.height;var y=t.getModel(),f=y.get(de),v=y.get(ue)/2,m=fe(y),x=Math.max(f,m),w=f-v,I=x-v;t.setLayout({borderWidth:f,upperHeight:x,upperLabelHeight:m},!0),d=re(d-2*w,0),c=re(c-w-I,0);var L=d*c,_=function(e,t,o,n,l,d){var c=e.children||[],h=n.sort;"asc"!==h&&"desc"!==h&&(h=null);var y=null!=n.leafDepth&&n.leafDepth<=d;if(l&&!y)return e.viewChildren=[];!function(e,t){t&&e.sort((function(a,b){var e="asc"===t?a.getValue()-b.getValue():b.getValue()-a.getValue();return 0===e?"asc"===t?a.dataIndex-b.dataIndex:b.dataIndex-a.dataIndex:e}))}(c=r.filter(c,(function(e){return!e.isRemoved()})),h);var f=function(e,t,o){for(var n=0,i=0,r=t.length;i<r;i++)n+=t[i].getValue();var l,d=e.get("visualDimension");t&&t.length?"value"===d&&o?(l=[t[t.length-1].getValue(),t[0].getValue()],"asc"===o&&l.reverse()):(l=[1/0,-1/0],se(t,(function(e){var t=e.getValue(d);t<l[0]&&(l[0]=t),t>l[1]&&(l[1]=t)}))):l=[NaN,NaN];return{sum:n,dataExtent:l}}(t,c,h);if(0===f.sum)return e.viewChildren=[];if(f.sum=function(e,t,o,n,r){if(!n)return o;for(var l=e.get("visibleMin"),d=r.length,c=d,i=d-1;i>=0;i--){var h=r["asc"===n?d-i-1:i].getValue();h/o*t<l&&(c=i,o-=h)}return"asc"===n?r.splice(0,d-c):r.splice(c,d-c),o}(t,o,f.sum,h,c),0===f.sum)return e.viewChildren=[];for(var i=0,v=c.length;i<v;i++){var area=c[i].getValue()/f.sum*o;c[i].setLayout({area:area})}y&&(c.length&&e.setLayout({isLeafRoot:!0},!0),c.length=0);return e.viewChildren=c,e.setLayout({dataExtent:f.dataExtent},!0),c}(t,y,L,o,n,l);if(!_.length)return;var rect={x:w,y:I,width:d,height:c},M=ie(d,c),N=1/0,O=[];O.area=0;for(var i=0,S=_.length;i<S;){var j=_[i];O.push(j),O.area+=j.getLayout().area;var D=ge(O,M,o.squareRatio);D<=N?(i++,N=D):(O.area-=O.pop().getLayout().area,ye(O,M,rect,v,!1),M=ie(rect.width,rect.height),O.length=O.area=0,N=1/0)}O.length&&ye(O,M,rect,v,!0);if(!n){var T=y.get("childrenVisibleMin");null!=T&&L<T&&(n=!0)}for(i=0,S=_.length;i<S;i++)e(_[i],o,n,l+1)}(L,O,!1,0),j=L.getLayout(),se(_,(function(e,t){var o=(_[t+1]||L).getValue();e.setLayout(r.extend({dataExtent:[o,o],borderWidth:0,upperHeight:0},j))}))}var D=e.getData().tree.root;D.setLayout(function(e,t,o){if(t)return{x:t.x,y:t.y};var n={x:0,y:0};if(!o)return n;var r=o.node,l=r.getLayout();if(!l)return n;var d=[l.width/2,l.height/2],c=r;for(;c;){var h=c.getLayout();d[0]+=h.x,d[1]+=h.y,c=c.parentNode}return{x:e.width/2-d[0],y:e.height/2-d[1]}}(y,I,w),!0),e.setLayoutInfo(y),function e(t,o,n,r,l){var d=t.getLayout(),c=n[l],h=c&&c===t;if(c&&!h||l===n.length&&t!==r)return;t.setLayout({isInView:!0,invisible:!h&&!o.intersect(d),isAboveViewRoot:h},!0);var y=new R.a(o.x-d.x,o.y-d.y,o.width,o.height);se(t.viewChildren||[],(function(t){e(t,y,n,r,l+1)}))}(D,new R.a(-y.x,-y.y,d,c),_,L,0)}};function ge(e,t,o){for(var n=0,r=1/0,i=0,area=void 0,l=e.length;i<l;i++)(area=e[i].getLayout().area)&&(area<r&&(r=area),area>n&&(n=area));var d=e.area*e.area,c=t*t*o;return d?re(c*n/d,d/(c*r)):1/0}function ye(e,t,rect,o,n){var r=t===rect.width?0:1,l=1-r,d=["x","y"],c=["width","height"],h=rect[d[r]],y=t?e.area/t:0;(n||y>rect[c[l]])&&(y=rect[c[l]]);for(var i=0,f=e.length;i<f;i++){var v=e[i],m={},x=y?v.getLayout().area/y:0,w=m[c[l]]=re(y-2*o,0),I=rect[d[r]]+rect[c[r]]-h,L=i===f-1||I<x?I:x,_=m[c[r]]=re(L-2*o,0);m[d[l]]=rect[d[l]]+ie(o,w/2),m[d[r]]=h+ie(o,_/2),h+=L,v.setLayout(m,!0)}rect[d[l]]+=y,rect[c[l]]-=y}function fe(e){return e.get(ce)?e.get(he):0}function ve(e){e.registerSeriesModel(x),e.registerChartView(J),e.registerVisual(ee),e.registerLayout(pe),function(e){for(var i=0;i<l.length;i++)e.registerAction({type:l[i],update:"updateView"},r.noop);e.registerAction({type:"treemapRootToNode",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},(function(t,o){var r=n.c(e,["treemapZoomToNode","treemapRootToNode"],t);if(r){var l=t.getViewRoot();l&&(e.direction=n.a(l,r.node)?"rollUp":"drillDown"),t.resetViewRoot(r.node)}}))}))}(e)}},2661:function(e,t,o){"use strict";o.d(t,"a",(function(){return E}));var n=o(2136),r=o(2135),l=o(2152),d=o(2235),c=o(2159),h=o(2454),y=o(2140),f=o(2143),v=o(2144),m=o(2594),x=o(2276),w=function(e){function t(t,o,n,r){var l=e.call(this)||this;l.z2=2,l.textConfig={inside:!0},Object(v.a)(l).seriesIndex=o.seriesIndex;var text=new d.a({z2:4,silent:t.getModel().get(["label","silent"])});return l.setTextContent(text),l.updateData(!0,t,o,n,r),l}return Object(n.a)(t,e),t.prototype.updateData=function(e,t,o,n,l){this.node=t,t.piece=this,o=o||this._seriesModel,n=n||this._ecModel;var d=this;Object(v.a)(d).dataIndex=t.dataIndex;var h=t.getModel(),f=h.getModel("emphasis"),w=t.getLayout(),I=r.extend({},w);I.label=null;var L=t.getVisual("style");L.lineJoin="bevel";var _=t.getVisual("decal");_&&(L.decal=Object(x.a)(_,l));var M=Object(m.a)(h.getModel("itemStyle"),I,!0);r.extend(I,M),r.each(y.g,(function(e){var t=d.ensureState(e),o=h.getModel([e,"itemStyle"]);t.style=o.getItemStyle();var n=Object(m.a)(o,I);n&&(t.shape=n)})),e?(d.setShape(I),d.shape.r=w.r0,c.h(d,{shape:{r:w.r}},o,t.dataIndex)):(c.h(d,{shape:I},o),Object(c.g)(d)),d.useStyle(L),this._updateLabel(o);var N=h.getShallow("cursor");N&&d.attr("cursor",N),this._seriesModel=o||this._seriesModel,this._ecModel=n||this._ecModel;var O=f.get("focus"),S="ancestor"===O?t.getAncestorsIndices():"descendant"===O?t.getDescendantIndices():O;Object(y.J)(this,S,f.get("blurScope"),f.get("disabled"))},t.prototype._updateLabel=function(e){var t=this,o=this.node.getModel(),n=o.getModel("label"),l=this.node.getLayout(),d=l.endAngle-l.startAngle,c=(l.startAngle+l.endAngle)/2,h=Math.cos(c),v=Math.sin(c),m=this,label=m.getTextContent(),x=this.node.dataIndex,w=n.get("minAngle")/180*Math.PI,I=n.get("show")&&!(null!=w&&Math.abs(d)<w);function L(e,t){var o=e.get(t);return null==o?n.get(t):o}label.ignore=!I,r.each(y.a,(function(n){var y="normal"===n?o.getModel("label"):o.getModel([n,"label"]),w="normal"===n,I=w?label:label.ensureState(n),text=e.getFormattedLabel(x,n);w&&(text=text||t.node.name),I.style=Object(f.c)(y,{},null,"normal"!==n,!0),text&&(I.style.text=text);var _=y.get("show");null==_||w||(I.ignore=!_);var M,N=L(y,"position"),O=w?m:m.states[n],S=O.style.fill;O.textConfig={outsideFill:"inherit"===y.get("color")?S:null,inside:"outside"!==N};var j=L(y,"distance")||0,D=L(y,"align");"outside"===N?(M=l.r+j,D=c>Math.PI/2?"right":"left"):D&&"center"!==D?"left"===D?(M=l.r0+j,c>Math.PI/2&&(D="right")):"right"===D&&(M=l.r-j,c>Math.PI/2&&(D="left")):(M=d===2*Math.PI&&0===l.r0?0:(l.r+l.r0)/2,D="center"),I.style.align=D,I.style.verticalAlign=L(y,"verticalAlign")||"middle",I.x=M*h+l.cx,I.y=M*v+l.cy;var T=L(y,"rotate"),A=0;"radial"===T?(A=-c)<-Math.PI/2&&(A+=Math.PI):"tangential"===T?(A=Math.PI/2-c)>Math.PI/2?A-=Math.PI:A<-Math.PI/2&&(A+=Math.PI):r.isNumber(T)&&(A=T*Math.PI/180),I.rotation=A})),label.dirtyStyle()},t}(h.a),I=o(2224),L=o(2226);var _=o(2156),M=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o}return Object(n.a)(t,e),t.prototype.render=function(e,t,o,n){var l=this;this.seriesModel=e,this.api=o,this.ecModel=t;var data=e.getData(),d=data.tree.root,c=e.getViewRoot(),h=this.group,y=e.get("renderLabelForZeroData"),f=[];c.eachNode((function(e){f.push(e)}));var v=this._oldChildren||[];!function(n,l){if(0===n.length&&0===l.length)return;function c(e){return e.getId()}function f(r,c){!function(n,r){y||!n||n.getValue()||(n=null);if(n!==d&&r!==d)if(r&&r.piece)n?(r.piece.updateData(!1,n,e,t,o),data.setItemGraphicEl(n.dataIndex,r.piece)):function(e){if(!e)return;e.piece&&(h.remove(e.piece),e.piece=null)}(r);else if(n){var l=new w(n,e,t,o);h.add(l),data.setItemGraphicEl(n.dataIndex,l)}}(null==r?null:n[r],null==c?null:l[c])}new I.a(l,n,c,c).add(f).update(f).remove(r.curry(f,null)).execute()}(f,v),function(n,r){r.depth>0?(l.virtualPiece?l.virtualPiece.updateData(!1,n,e,t,o):(l.virtualPiece=new w(n,e,t,o),h.add(l.virtualPiece)),r.piece.off("click"),l.virtualPiece.on("click",(function(e){l._rootToNode(r.parentNode)}))):l.virtualPiece&&(h.remove(l.virtualPiece),l.virtualPiece=null)}(d,c),this._initEvents(),this._oldChildren=f},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",(function(t){var o=!1;e.seriesModel.getViewRoot().eachNode((function(n){if(!o&&n.piece&&n.piece===t.target){var r=n.getModel().get("nodeClick");if("rootToNode"===r)e._rootToNode(n);else if("link"===r){var l=n.getModel(),link=l.get("link");if(link){var d=l.get("target",!0)||"_blank";Object(_.l)(link,d)}}o=!0}}))}))},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,t){var o=t.getData().getItemLayout(0);if(o){var n=e[0]-o.cx,r=e[1]-o.cy,l=Math.sqrt(n*n+r*r);return l<=o.r&&l>=o.r0}},t.type="sunburst",t}(l.a),N=o(2153),O=o(2434),S=o(2157),j=o(2596);var D=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o.ignoreStyleOnData=!0,o}return Object(n.a)(t,e),t.prototype.getInitialData=function(option,e){var t={name:option.name,children:option.data};!function e(t){var o=0;r.each(t.children,(function(t){e(t);var n=t.value;r.isArray(n)&&(n=n[0]),o+=n}));var n=t.value;r.isArray(n)&&(n=n[0]);(null==n||isNaN(n))&&(n=o);n<0&&(n=0);r.isArray(t.value)?t.value[0]=n:t.value=n}(t);var o=this._levelModels=r.map(option.levels||[],(function(t){return new S.a(t,this,e)}),this),n=O.a.createTree(t,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var r=n.getNodeByDataIndex(t),l=o[r.depth];return l&&(e.parentModel=l),e}))}));return n.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(t){var o=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return o.treePathInfo=Object(L.d)(n,this),o},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){Object(j.a)(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(N.b),T=o(2139),A=Math.PI/180;function R(e,t,o){t.eachSeriesByType(e,(function(e){var t=e.get("center"),n=e.get("radius");r.isArray(n)||(n=[0,n]),r.isArray(t)||(t=[t,t]);var l=o.getWidth(),d=o.getHeight(),c=Math.min(l,d),h=Object(T.p)(t[0],l),y=Object(T.p)(t[1],d),f=Object(T.p)(n[0],c/2),v=Object(T.p)(n[1],c/2),m=-e.get("startAngle")*A,x=e.get("minAngle")*A,w=e.getData().tree.root,I=e.getViewRoot(),L=I.depth,_=e.get("sort");null!=_&&function e(t,o){var n=t.children||[];t.children=function(e,t){if(r.isFunction(t)){var o=r.map(e,(function(e,t){var o=e.getValue();return{params:{depth:e.depth,height:e.height,dataIndex:e.dataIndex,getValue:function(){return o}},index:t}}));return o.sort((function(a,b){return t(a.params,b.params)})),r.map(o,(function(t){return e[t.index]}))}var n="asc"===t;return e.sort((function(a,b){var e=(a.getValue()-b.getValue())*(n?1:-1);return 0===e?(a.dataIndex-b.dataIndex)*(n?-1:1):e}))}(n,o),n.length&&r.each(t.children,(function(t){e(t,o)}))}(I,_);var M=0;r.each(I.children,(function(e){!isNaN(e.getValue())&&M++}));var N=I.getValue(),O=Math.PI/(N||M)*2,S=I.depth>0,j=I.height-(S?-1:1),D=(v-f)/(j||1),R=e.get("clockwise"),V=e.get("stillShowZeroSum"),C=R?1:-1,P=function(t,o){if(t){var n=o;if(t!==w){var l=t.getValue(),d=0===N&&V?O:l*O;d<x&&(d=x),n=o+C*d;var v=t.depth-L-(S?-1:1),m=f+D*v,I=f+D*(v+1),_=e.getLevelModel(t);if(_){var M=_.get("r0",!0),j=_.get("r",!0),A=_.get("radius",!0);null!=A&&(M=A[0],j=A[1]),null!=M&&(m=Object(T.p)(M,c/2)),null!=j&&(I=Object(T.p)(j,c/2))}t.setLayout({angle:d,startAngle:o,endAngle:n,clockwise:R,cx:h,cy:y,r0:m,r:I})}if(t.children&&t.children.length){var E=0;r.each(t.children,(function(e){E+=P(e,o+E)}))}return n-o}};if(S){var E=f,k=f+D,G=2*Math.PI;w.setLayout({angle:G,startAngle:m,endAngle:m+G,clockwise:R,cx:h,cy:y,r0:E,r:k})}P(I,m)}))}var V=o(2176);function C(e){var t={};e.eachSeriesByType("sunburst",(function(e){var data=e.getData(),o=data.tree;o.eachNode((function(n){var style=n.getModel().getModel("itemStyle").getItemStyle();style.fill||(style.fill=function(e,o,n){for(var l=e;l&&l.depth>1;)l=l.parentNode;var d=o.getColorFromPalette(l.name||l.dataIndex+"",t);return e.depth>1&&Object(r.isString)(d)&&(d=Object(V.lift)(d,(e.depth-1)/(n-1)*.5)),d}(n,e,o.root.height));var l=data.ensureUniqueItemVisual(n.dataIndex,"style");Object(r.extend)(l,style)}))}))}var P=o(2288);function E(e){e.registerChartView(M),e.registerSeriesModel(D),e.registerLayout(Object(r.curry)(R,"sunburst")),e.registerProcessor(Object(r.curry)(P.a,"sunburst")),e.registerVisual(C),function(e){e.registerAction({type:"sunburstRootToNode",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,o){var n=Object(L.c)(e,["sunburstRootToNode"],t);if(n){var r=t.getViewRoot();r&&(e.direction=Object(L.a)(r,n.node)?"rollUp":"drillDown"),t.resetViewRoot(n.node)}}))})),e.registerAction({type:"sunburstHighlight",update:"none"},(function(e,t,o){e=Object(r.extend)({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t){var o=Object(L.c)(e,["sunburstHighlight"],t);o&&(e.dataIndex=o.node.dataIndex)})),o.dispatchAction(Object(r.extend)(e,{type:"highlight"}))})),e.registerAction({type:"sunburstUnhighlight",update:"updateView"},(function(e,t,o){e=Object(r.extend)({},e),o.dispatchAction(Object(r.extend)(e,{type:"downplay"}))}))}(e)}},2669:function(e,t,o){"use strict";o.d(t,"a",(function(){return H}));var n=o(2136),r=o(2148),l=o(2340),d=o(2267),c=o(2159),h=o(2140),y=o(2152),f=o(2143),v=o(2144),m=o(2135),x=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},w=function(e){function t(t){return e.call(this,t)||this}return Object(n.a)(t,e),t.prototype.getDefaultShape=function(){return new x},t.prototype.buildPath=function(e,t){var o=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+o,t.y2),e.bezierCurveTo(t.cpx2+o,t.cpy2,t.cpx1+o,t.cpy1,t.x1+o,t.y1)):(e.lineTo(t.x2,t.y2+o),e.bezierCurveTo(t.cpx2,t.cpy2+o,t.cpx1,t.cpy1+o,t.x1,t.y1+o)),e.closePath()},t.prototype.highlight=function(){Object(h.r)(this)},t.prototype.downplay=function(){Object(h.C)(this)},t}(r.b);var I=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._focusAdjacencyDisabled=!1,o}return Object(n.a)(t,e),t.prototype.render=function(e,t,o){var n=this,r=e.getGraph(),y=this.group,x=e.layoutInfo,I=x.width,L=x.height,_=e.getData(),M=e.getData("edge"),N=e.get("orient");this._model=e,y.removeAll(),y.x=x.x,y.y=x.y,r.eachEdge((function(t){var o=new w,n=Object(v.a)(o);n.dataIndex=t.dataIndex,n.seriesIndex=e.seriesIndex,n.dataType="edge";var r,d,c,f,x,_,O,S,j=t.getModel(),D=j.getModel("lineStyle"),T=D.get("curveness"),A=t.node1.getLayout(),R=t.node1.getModel(),V=R.get("localX"),C=R.get("localY"),P=t.node2.getLayout(),E=t.node2.getModel(),k=E.get("localX"),G=E.get("localY"),B=t.getLayout();switch(o.shape.extent=Math.max(1,B.dy),o.shape.orient=N,"vertical"===N?(r=(null!=V?V*I:A.x)+B.sy,d=(null!=C?C*L:A.y)+A.dy,c=(null!=k?k*I:P.x)+B.ty,x=r,_=d*(1-T)+(f=null!=G?G*L:P.y)*T,O=c,S=d*T+f*(1-T)):(r=(null!=V?V*I:A.x)+A.dx,d=(null!=C?C*L:A.y)+B.sy,x=r*(1-T)+(c=null!=k?k*I:P.x)*T,_=d,O=r*T+c*(1-T),S=f=(null!=G?G*L:P.y)+B.ty),o.setShape({x1:r,y1:d,x2:c,y2:f,cpx1:x,cpy1:_,cpx2:O,cpy2:S}),o.useStyle(D.getItemStyle()),o.style.fill){case"source":o.style.fill=t.node1.getVisual("color"),o.style.decal=t.node1.getVisual("style").decal;break;case"target":o.style.fill=t.node2.getVisual("color"),o.style.decal=t.node2.getVisual("style").decal;break;case"gradient":var z=t.node1.getVisual("color"),W=t.node2.getVisual("color");Object(m.isString)(z)&&Object(m.isString)(W)&&(o.style.fill=new l.a(0,0,+("horizontal"===N),+("vertical"===N),[{color:z,offset:0},{color:W,offset:1}]))}var X=j.getModel("emphasis");Object(h.I)(o,j,"lineStyle",(function(e){return e.getItemStyle()})),y.add(o),M.setItemGraphicEl(t.dataIndex,o);var H=X.get("focus");Object(h.J)(o,"adjacency"===H?t.getAdjacentDataIndices():H,X.get("blurScope"),X.get("disabled")),Object(v.a)(o).dataType="edge"})),r.eachNode((function(t){var o=t.getLayout(),n=t.getModel(),r=n.get("localX"),l=n.get("localY"),c=n.getModel("emphasis"),rect=new d.a({shape:{x:null!=r?r*I:o.x,y:null!=l?l*L:o.y,width:o.dx,height:o.dy},style:n.getModel("itemStyle").getItemStyle(),z2:10});Object(f.g)(rect,Object(f.e)(n),{labelFetcher:e,labelDataIndex:t.dataIndex,defaultText:t.id}),rect.disableLabelAnimation=!0,rect.setStyle("fill",t.getVisual("color")),rect.setStyle("decal",t.getVisual("style").decal),Object(h.I)(rect,n),y.add(rect),_.setItemGraphicEl(t.dataIndex,rect),Object(v.a)(rect).dataType="node";var m=c.get("focus");Object(h.J)(rect,"adjacency"===m?t.getAdjacentDataIndices():m,c.get("blurScope"),c.get("disabled"))})),_.eachItemGraphicEl((function(t,r){_.getItemModel(r).get("draggable")&&(t.drift=function(t,l){n._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=l,this.dirty(),o.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:_.getRawIndex(r),localX:this.shape.x/I,localY:this.shape.y/L})},t.ondragend=function(){n._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move")})),!this._data&&e.isAnimationEnabled()&&y.setClipPath(function(rect,e,t){var o=new d.a({shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}});return c.c(o,{shape:{width:rect.width+20}},e,t),o}(y.getBoundingRect(),e,(function(){y.removeClipPath()}))),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(y.a),L=o(2153),_=o(2597),M=o(2157),N=o(2178),O=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o}return Object(n.a)(t,e),t.prototype.getInitialData=function(option,e){var t=option.edges||option.links,o=option.data||option.nodes,n=option.levels;this.levelModels=[];for(var r=this.levelModels,i=0;i<n.length;i++)null!=n[i].depth&&n[i].depth>=0&&(r[n[i].depth]=new M.a(n[i],this,e));if(o&&t)return Object(_.a)(o,t,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e,t){var o=e.parentModel,n=o.getData().getItemLayout(t);if(n){var r=n.depth,l=o.levelModels[r];l&&(e.parentModel=l)}return e})),t.wrapMethod("getItemModel",(function(e,t){var o=e.parentModel,n=o.getGraph().getEdgeByIndex(t).node1.getLayout();if(n){var r=n.depth,l=o.levelModels[r];l&&(e.parentModel=l)}return e}))})).data},t.prototype.setNodePosition=function(e,t){var o=(this.option.data||this.option.nodes)[e];o.localX=t[0],o.localY=t[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,t,o){function n(e){return isNaN(e)||null==e}if("edge"===o){var r=this.getDataParams(e,o),l=r.data,d=r.value,c=l.source+" -- "+l.target;return Object(N.c)("nameValue",{name:c,value:d,noValue:n(d)})}var h=this.getGraph().getNodeByIndex(e).getLayout().value,y=this.getDataParams(e,o).data.name;return Object(N.c)("nameValue",{name:null!=y?y+"":null,value:h,noValue:n(h)})},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(t,o){var n=e.prototype.getDataParams.call(this,t,o);if(null==n.value&&"node"===o){var r=this.getGraph().getNodeByIndex(t).getLayout().value;n.value=r}return n},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(L.b),S=o(2145),j=o(2138);function D(e,t){e.eachSeriesByType("sankey",(function(e){var o=e.get("nodeWidth"),n=e.get("nodeGap"),r=function(e,t){return S.g(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=r;var l=r.width,d=r.height,c=e.getGraph(),h=c.nodes,y=c.edges;!function(e){m.each(e,(function(e){var t=B(e.outEdges,G),o=B(e.inEdges,G),n=e.getValue()||0,r=Math.max(t,o,n);e.setLayout({value:r},!0)}))}(h),function(e,t,o,n,r,l,d,c,h){(function(e,t,o,n,r,l,d){for(var c=[],h=[],y=[],f=[],v=0,i=0;i<t.length;i++)c[i]=1;for(i=0;i<e.length;i++)h[i]=e[i].inEdges.length,0===h[i]&&y.push(e[i]);var x=-1;for(;y.length;){for(var w=0;w<y.length;w++){var I=y[w],L=I.hostGraph.data.getRawDataItem(I.dataIndex),_=null!=L.depth&&L.depth>=0;_&&L.depth>x&&(x=L.depth),I.setLayout({depth:_?L.depth:v},!0),"vertical"===l?I.setLayout({dy:o},!0):I.setLayout({dx:o},!0);for(var M=0;M<I.outEdges.length;M++){var N=I.outEdges[M],O=t.indexOf(N);c[O]=0;var S=N.node2,j=e.indexOf(S);0==--h[j]&&f.indexOf(S)<0&&f.push(S)}}++v,y=f,f=[]}for(i=0;i<c.length;i++)if(1===c[i])throw new Error("Sankey is a DAG, the original data has cycle!");var D=x>v-1?x:v-1;d&&"left"!==d&&function(e,t,o,n){if("right"===t){for(var r=[],l=e,d=0;l.length;){for(var i=0;i<l.length;i++){var c=l[i];c.setLayout({skNodeHeight:d},!0);for(var h=0;h<c.inEdges.length;h++){var y=c.inEdges[h];r.indexOf(y.node1)<0&&r.push(y.node1)}}l=r,r=[],++d}m.each(e,(function(e){T(e)||e.setLayout({depth:Math.max(0,n-e.getLayout().skNodeHeight)},!0)}))}else"justify"===t&&function(e,t){m.each(e,(function(e){T(e)||e.outEdges.length||e.setLayout({depth:t},!0)}))}(e,n)}(e,d,0,D);!function(e,t,o){m.each(e,(function(e){var n=e.getLayout().depth*t;"vertical"===o?e.setLayout({y:n},!0):e.setLayout({x:n},!0)}))}(e,"vertical"===l?(r-o)/D:(n-o)/D,l)})(e,t,o,r,l,c,h),function(e,t,o,n,r,l,d){var c=function(e,t){var o=[],n="vertical"===t?"y":"x",r=Object(j.j)(e,(function(e){return e.getLayout()[n]}));return r.keys.sort((function(a,b){return a-b})),m.each(r.keys,(function(e){o.push(r.buckets.get(e))})),o}(e,d);(function(e,t,o,n,r,l){var d=1/0;m.each(e,(function(e){var t=e.length,c=0;m.each(e,(function(e){c+=e.getLayout().value}));var h="vertical"===l?(n-(t-1)*r)/c:(o-(t-1)*r)/c;h<d&&(d=h)})),m.each(e,(function(e){m.each(e,(function(e,i){var t=e.getLayout().value*d;"vertical"===l?(e.setLayout({x:i},!0),e.setLayout({dx:t},!0)):(e.setLayout({y:i},!0),e.setLayout({dy:t},!0))}))})),m.each(t,(function(e){var t=+e.getValue()*d;e.setLayout({dy:t},!0)}))})(c,t,o,n,r,d),A(c,r,o,n,d);for(var h=1;l>0;l--)R(c,h*=.99,d),A(c,r,o,n,d),z(c,h,d),A(c,r,o,n,d)}(e,t,l,r,n,d,c),function(e,t){var o="vertical"===t?"x":"y";m.each(e,(function(e){e.outEdges.sort((function(a,b){return a.node2.getLayout()[o]-b.node2.getLayout()[o]})),e.inEdges.sort((function(a,b){return a.node1.getLayout()[o]-b.node1.getLayout()[o]}))})),m.each(e,(function(e){var t=0,o=0;m.each(e.outEdges,(function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy})),m.each(e.inEdges,(function(e){e.setLayout({ty:o},!0),o+=e.getLayout().dy}))}))}(e,c)}(h,y,o,n,l,d,0!==m.filter(h,(function(e){return 0===e.getLayout().value})).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))}))}function T(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&t.depth>=0}function A(e,t,o,n,r){var l="vertical"===r?"x":"y";m.each(e,(function(e){var d,c,h;e.sort((function(a,b){return a.getLayout()[l]-b.getLayout()[l]}));for(var y=0,f=e.length,v="vertical"===r?"dx":"dy",i=0;i<f;i++)(h=y-(c=e[i]).getLayout()[l])>0&&(d=c.getLayout()[l]+h,"vertical"===r?c.setLayout({x:d},!0):c.setLayout({y:d},!0)),y=c.getLayout()[l]+c.getLayout()[v]+t;if((h=y-t-("vertical"===r?n:o))>0){d=c.getLayout()[l]-h,"vertical"===r?c.setLayout({x:d},!0):c.setLayout({y:d},!0),y=d;for(i=f-2;i>=0;--i)(h=(c=e[i]).getLayout()[l]+c.getLayout()[v]+t-y)>0&&(d=c.getLayout()[l]-h,"vertical"===r?c.setLayout({x:d},!0):c.setLayout({y:d},!0)),y=c.getLayout()[l]}}))}function R(e,t,o){m.each(e.slice().reverse(),(function(e){m.each(e,(function(e){if(e.outEdges.length){var n=B(e.outEdges,V,o)/B(e.outEdges,G);if(isNaN(n)){var r=e.outEdges.length;n=r?B(e.outEdges,C,o)/r:0}if("vertical"===o){var l=e.getLayout().x+(n-k(e,o))*t;e.setLayout({x:l},!0)}else{var d=e.getLayout().y+(n-k(e,o))*t;e.setLayout({y:d},!0)}}}))}))}function V(e,t){return k(e.node2,t)*e.getValue()}function C(e,t){return k(e.node2,t)}function P(e,t){return k(e.node1,t)*e.getValue()}function E(e,t){return k(e.node1,t)}function k(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function G(e){return e.getValue()}function B(e,t,o){for(var n=0,r=e.length,i=-1;++i<r;){var l=+t(e[i],o);isNaN(l)||(n+=l)}return n}function z(e,t,o){m.each(e,(function(e){m.each(e,(function(e){if(e.inEdges.length){var n=B(e.inEdges,P,o)/B(e.inEdges,G);if(isNaN(n)){var r=e.inEdges.length;n=r?B(e.inEdges,E,o)/r:0}if("vertical"===o){var l=e.getLayout().x+(n-k(e,o))*t;e.setLayout({x:l},!0)}else{var d=e.getLayout().y+(n-k(e,o))*t;e.setLayout({y:d},!0)}}}))}))}var W=o(2240);function X(e){e.eachSeriesByType("sankey",(function(e){var t=e.getGraph().nodes;if(t.length){var o=1/0,n=-1/0;m.each(t,(function(e){var t=e.getLayout().value;t<o&&(o=t),t>n&&(n=t)})),m.each(t,(function(t){var r=new W.a({type:"color",mappingMethod:"linear",dataExtent:[o,n],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),l=t.getModel().get(["itemStyle","color"]);null!=l?(t.setVisual("color",l),t.setVisual("style",{fill:l})):(t.setVisual("color",r),t.setVisual("style",{fill:r}))}))}}))}function H(e){e.registerChartView(I),e.registerSeriesModel(O),e.registerLayout(D),e.registerVisual(X),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},(function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])}))}))}},2675:function(e,t,o){"use strict";o.d(t,"a",(function(){return A}));var n=o(2136),r=o(2590),l=o(2221),d=o(2159),c=o(2267),h=o(2140),y=o(2143),f=o(2135),v=o(2224);var m=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._layers=[],o}return Object(n.a)(t,e),t.prototype.render=function(e,t,o){var data=e.getData(),n=this,m=this.group,x=e.getLayerSeries(),w=data.getLayout("layoutInfo"),rect=w.rect,I=w.boundaryGap;function L(e){return e.name}m.x=0,m.y=rect.y+I[0];var _=new v.a(this._layersSeries||[],x,L,L),M=[];function N(t,o,f){var v=n._layers;if("remove"!==t){for(var style,polygon,w=[],I=[],L=x[o].indices,_=0;_<L.length;_++){var N=data.getItemLayout(L[_]),O=N.x,S=N.y0,j=N.y;w.push(O,S),I.push(O,S+j),style=data.getItemVisual(L[_],"style")}var D=data.getItemLayout(L[0]),T=e.getModel("label").get("margin"),A=e.getModel("emphasis");if("add"===t){var R=M[o]=new l.a;polygon=new r.a({shape:{points:w,stackedOnPoints:I,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),R.add(polygon),m.add(R),e.isAnimationEnabled()&&polygon.setClipPath(function(rect,e,t){var o=new c.a({shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}});return d.c(o,{shape:{x:rect.x-50,width:rect.width+100,height:rect.height+20}},e,t),o}(polygon.getBoundingRect(),e,(function(){polygon.removeClipPath()})))}else{R=v[f];polygon=R.childAt(0),m.add(R),M[o]=R,d.h(polygon,{shape:{points:w,stackedOnPoints:I}},e),Object(d.g)(polygon)}Object(y.g)(polygon,Object(y.e)(e),{labelDataIndex:L[_-1],defaultText:data.getName(L[_-1]),inheritColor:style.fill},{normal:{verticalAlign:"middle"}}),polygon.setTextConfig({position:null,local:!0});var V=polygon.getTextContent();V&&(V.x=D.x-T,V.y=D.y0+D.y/2),polygon.useStyle(style),data.setItemGraphicEl(o,polygon),Object(h.I)(polygon,e),Object(h.J)(polygon,A.get("focus"),A.get("blurScope"),A.get("disabled"))}else m.remove(v[o])}_.add(Object(f.bind)(N,this,"add")).update(Object(f.bind)(N,this,"update")).remove(Object(f.bind)(N,this,"remove")).execute(),this._layersSeries=x,this._layers=M},t.type="themeRiver",t}(o(2152).a),x=o(2153),w=o(2237),I=o(2343),L=o(2182),_=o(2138),M=o(2287),N=o(2178),O=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o}return Object(n.a)(t,e),t.prototype.init=function(option){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new M.a(f.bind(this.getData,this),f.bind(this.getRawData,this))},t.prototype.fixData=function(data){var e=data.length,t={},o=Object(_.j)(data,(function(e){return t.hasOwnProperty(e[0]+"")||(t[e[0]+""]=-1),e[2]})),n=[];o.buckets.each((function(e,t){n.push({name:t,dataList:e})}));for(var r=n.length,l=0;l<r;++l){for(var d=n[l].name,c=0;c<n[l].dataList.length;++c){var h=n[l].dataList[c][0]+"";t[h]=l}for(var h in t)t.hasOwnProperty(h)&&t[h]!==l&&(t[h]=l,data[e]=[h,0,d],e++)}return data},t.prototype.getInitialData=function(option,e){for(var t=this.getReferringComponents("singleAxis",_.b).models[0].get("type"),o=f.filter(option.data,(function(e){return void 0!==e[2]})),data=this.fixData(o||[]),n=[],r=this.nameMap=f.createHashMap(),l=0,i=0;i<data.length;++i)n.push(data[i][2]),r.get(data[i][2])||(r.set(data[i][2],l),l++);var d=Object(w.b)(data,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Object(I.a)(t)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,c=new L.a(d,this);return c.initData(data),c},t.prototype.getLayerSeries=function(){for(var data=this.getData(),e=data.count(),t=[],i=0;i<e;++i)t[i]=i;var o=data.mapDimension("single"),n=Object(_.j)(t,(function(e){return data.get("name",e)})),r=[];return n.buckets.each((function(e,t){e.sort((function(e,t){return data.get(o,e)-data.get(o,t)})),r.push({name:t,indices:e})})),r},t.prototype.getAxisTooltipData=function(e,t,o){f.isArray(e)||(e=e?[e]:[]);for(var n,data=this.getData(),r=this.getLayerSeries(),l=[],d=r.length,i=0;i<d;++i){for(var c=Number.MAX_VALUE,h=-1,y=r[i].indices.length,v=0;v<y;++v){var m=data.get(e[0],r[i].indices[v]),x=Math.abs(m-t);x<=c&&(n=m,c=x,h=r[i].indices[v])}l.push(h)}return{dataIndices:l,nestestValue:n}},t.prototype.formatTooltip=function(e,t,o){var data=this.getData(),n=data.getName(e),r=data.get(data.mapDimension("value"),e);return Object(N.c)("nameValue",{name:n,value:r})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(x.b),S=o(2139);function j(e,t){e.eachSeriesByType("themeRiver",(function(e){var data=e.getData(),t=e.coordinateSystem,o={},rect=t.getRect();o.rect=rect;var n=e.get("boundaryGap"),r=t.getAxis();(o.boundaryGap=n,"horizontal"===r.orient)?(n[0]=S.p(n[0],rect.height),n[1]=S.p(n[1],rect.height),D(data,e,rect.height-n[0]-n[1])):(n[0]=S.p(n[0],rect.width),n[1]=S.p(n[1],rect.width),D(data,e,rect.width-n[0]-n[1]));data.setLayout("layoutInfo",o)}))}function D(data,e,t){if(data.count())for(var o,n=e.coordinateSystem,r=e.getLayerSeries(),l=data.mapDimension("single"),d=data.mapDimension("value"),c=f.map(r,(function(e){return f.map(e.indices,(function(e){var t=n.dataToPoint(data.get(l,e));return t[1]=data.get(d,e),t}))})),base=function(data){for(var e=data.length,t=data[0].length,o=[],n=[],r=0,i=0;i<t;++i){for(var l=0,d=0;d<e;++d)l+=data[d][i][1];l>r&&(r=l),o.push(l)}for(var c=0;c<t;++c)n[c]=(r-o[c])/2;r=0;for(var h=0;h<t;++h){var y=o[h]+n[h];y>r&&(r=y)}return{y0:n,max:r}}(c),h=base.y0,y=t/base.max,v=r.length,m=r[0].indices.length,x=0;x<m;++x){o=h[x]*y,data.setItemLayout(r[0].indices[x],{layerIndex:0,x:c[0][x][0],y0:o,y:c[0][x][1]*y});for(var i=1;i<v;++i)o+=c[i-1][x][1]*y,data.setItemLayout(r[i].indices[x],{layerIndex:i,x:c[i][x][0],y0:o,y:c[i][x][1]*y})}}var T=o(2288);function A(e){e.registerChartView(m),e.registerSeriesModel(O),e.registerLayout(j),e.registerProcessor(Object(T.a)("themeRiver"))}},2683:function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var n=o(2168),r=o(2136),l=o(2202),d=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o.hasSymbolVisual=!0,o}return Object(r.a)(t,e),t.prototype.getInitialData=function(option,e){return Object(l.a)(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},t.prototype.brushSelector=function(e,data,t){return t.point(data.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(o(2153).b),c=o(2282),h=o(3073),y=o(2286),f=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o}return Object(r.a)(t,e),t.prototype.render=function(e,t,o){var data=e.getData();this._updateSymbolDraw(data,e).updateData(data,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,o){var data=e.getData();this._updateSymbolDraw(data,e).incrementalPrepareUpdate(data),this._finished=!1},t.prototype.incrementalRender=function(e,t,o){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},t.prototype.updateTransform=function(e,t,o){var data=e.getData();if(this.group.dirty(),!this._finished||data.count()>1e4)return{update:!0};var n=Object(y.a)("").reset(e,t,o);n.progress&&n.progress({start:0,end:data.count(),count:data.count()},data),this._symbolDraw.updateLayout(data)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){var t=e.coordinateSystem,o=t&&t.getArea&&t.getArea();return e.get("clip",!0)?o:null},t.prototype._updateSymbolDraw=function(data,e){var t=this._symbolDraw,o=e.pipelineContext.large;return t&&o===this._isLargeDraw||(t&&t.remove(),t=this._symbolDraw=o?new h.a:new c.a,this._isLargeDraw=o,this.group.removeAll()),this.group.add(t.group),t},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(o(2152).a),v=o(2346);function m(e){Object(n.a)(v.a),e.registerSeriesModel(d),e.registerChartView(f),e.registerLayout(Object(y.a)("scatter"))}}}]);
//# sourceMappingURL=c6e1709cc2a8e046c3c0.js.map