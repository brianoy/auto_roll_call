(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{129:function(t,e,n){"use strict";var r=n(0),c=n(1);r(e,"__esModule",{value:!0}),e.default=e.PlotType=void 0;var o=c(n(10)),l=c(n(11)),h=n(47),d=n(1839);e.PlotType={LINE:"line",BAR:"bar",CIRCLE:"circle"};var f=function(){function t(e,n){(0,o.default)(this,t),this._chartData=n,this._initCanvas(e)}return(0,l.default)(t,[{key:"_initCanvas",value:function(t){this._canvas=document.createElement("canvas"),this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0",this._canvas.style.zIndex="2",this._ctx=this._canvas.getContext("2d"),t.appendChild(this._canvas)}},{key:"_redraw",value:function(t){this._ctx.clearRect(0,0,this._canvas.offsetWidth,this._canvas.offsetHeight),t&&t(),this._draw()}},{key:"_draw",value:function(){}},{key:"setWidth",value:function(t){this._width=t}},{key:"setHeight",value:function(t){this._height=t}},{key:"layout",value:function(){var t=this;this._height!==this._canvas.offsetHeight||this._width!==this._canvas.offsetWidth?this._redraw((function(){var e=(0,h.getPixelRatio)(t._canvas);t._canvas.style.width="".concat(t._width,"px"),t._canvas.style.height="".concat(t._height,"px"),t._canvas.width=t._width*e,t._canvas.height=t._height*e,t._ctx.scale(e,e)})):this.flush()}},{key:"flush",value:function(){var t=this;this.requestAnimationId&&(0,d.cancelAnimationFrame)(this.requestAnimationId),this.requestAnimationId=(0,d.requestAnimationFrame)((function(){t._redraw()}))}},{key:"getImage",value:function(){return this._canvas}}]),t}();e.default=f},1723:function(t,e,n){"use strict";n(0)(e,"__esModule",{value:!0}),e.toShortNumber=function(t,e){if(!t||isNaN(t))return t;var n=new r.Decimal(t);e=e||2;var o=c.find((function(t){return t.max?n.greaterThan(t.min)&&n.lessThanOrEqualTo(t.max):n.greaterThan(t.min)}))||{},l=o.min,h=o.sign;if(0===l)return t;var d=n.div(l);return"".concat(d.toFixed(e,r.Decimal.ROUND_FLOOR)).concat(h)};var r=n(96),c=[{min:0,max:1e3,sign:""},{min:1e3,max:1e6,sign:"K"},{min:1e6,max:1e9,sign:"M"},{min:1e9,max:null,sign:"B"}]},176:function(t,e,n){"use strict";n(0)(e,"__esModule",{value:!0}),e.DEV=void 0;e.DEV=!1},1834:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(10)),h=o(n(11)),d=o(n(16)),f=o(n(17)),_=o(n(14)),y=o(n(918)),x=o(n(1843)),v=n(86),m=o(n(924)),w=o(n(1847));function k(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,_.default)(t);if(e){var o=(0,_.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,f.default)(this,n)}}var P=function(t){(0,d.default)(n,t);var e=k(n);function n(t){var r;return(0,l.default)(this,n),(r=e.call(this,t))._chartType=v.ChartType.CANDLE_STICK,r._realTimeTechnicalIndicator=new w.default,r}return(0,h.default)(n,[{key:"_createYAxis",value:function(t){return new m.default(t.chartData,!0,{technicalIndicator:this.technicalIndicator.bind(this),isTimeLine:this._isRealTime.bind(this)})}},{key:"_createMainWidget",value:function(t,e){return new x.default({container:t,chartData:e.chartData,xAxis:e.xAxis,yAxis:this._yAxis,additionalDataProvider:{technicalIndicator:this.technicalIndicator.bind(this),chartType:this.chartType.bind(this),tag:this.tag.bind(this)}})}},{key:"_isRealTime",value:function(){return this._chartType===v.ChartType.REAL_TIME}},{key:"technicalIndicator",value:function(){return this._isRealTime()?this._realTimeTechnicalIndicator:this._technicalIndicator}},{key:"chartType",value:function(){return this._chartType}},{key:"setChartType",value:function(t){return this._chartType!==t&&(this._chartType=t,this.calcTechnicalIndicator())}}]),n}(y.default);e.default=P},1839:function(t,e,n){"use strict";n(0)(e,"__esModule",{value:!0}),e.requestAnimationFrame=function(t){if(!window.requestAnimationFrame)return window.setTimeout((function(){t()}),1e3/60);return window.requestAnimationFrame(t)},e.cancelAnimationFrame=function(t){window.cancelAnimationFrame||clearTimeout(t);window.cancelAnimationFrame(t)}},1840:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(10)),h=o(n(11)),d=o(n(16)),f=o(n(17)),_=o(n(14)),y=o(n(490)),x=o(n(1841)),v=o(n(1842));function m(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,_.default)(t);if(e){var o=(0,_.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,f.default)(this,n)}}var w=function(t){(0,d.default)(n,t);var e=m(n);function n(){return(0,l.default)(this,n),e.apply(this,arguments)}return(0,h.default)(n,[{key:"_createMainView",value:function(t,e){return new x.default(t,e.chartData,e.yAxis,e.additionalDataProvider)}},{key:"_createFloatLayerView",value:function(t,e){return new v.default(t,e.chartData,e.yAxis,e.additionalDataProvider)}}]),n}(y.default);e.default=w},1841:function(t,e,n){"use strict";var r=n(18),c=n(15),o=n(21),l=n(0),h=n(5),d=n(1);l(e,"__esModule",{value:!0}),e.default=void 0;var f=d(n(10)),_=d(n(11)),y=d(n(16)),x=d(n(17)),v=d(n(14)),m=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=A(e);if(n&&n.has(t))return n.get(t);var c={},o=l&&h;for(var d in t)if("default"!==d&&Object.prototype.hasOwnProperty.call(t,d)){var desc=o?h(t,d):null;desc&&(desc.get||desc.set)?l(c,d,desc):c[d]=t[d]}c.default=t,n&&n.set(t,c);return c}(n(129)),w=n(86),k=n(47),P=n(75),L=n(52);function A(t){if("function"!=typeof o)return null;var e=new o,n=new o;return(A=function(t){return t?n:e})(t)}function D(t){var e=function(){if("undefined"==typeof Reflect||!c)return!1;if(c.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(c(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,v.default)(t);if(e){var o=(0,v.default)(this).constructor;n=c(r,arguments,o)}else n=r.apply(this,arguments);return(0,x.default)(this,n)}}var T=function(t){(0,y.default)(n,t);var e=D(n);function n(t,r,c,o){var l;return(0,f.default)(this,n),(l=e.call(this,t,r))._yAxis=c,l._additionalDataProvider=o,l}return(0,_.default)(n,[{key:"_draw",value:function(){var t=this._chartData.styleOptions().yAxis;t.display&&(this._drawAxisLine(t),this._drawTickLines(t),this._drawTickLabels(t),this._drawTechnicalIndicatorLastValue(t),this._drawLastPriceLabel(t))}},{key:"_drawAxisLine",value:function(t){var e,n=t.axisLine;n.display&&(this._ctx.strokeStyle=n.color,this._ctx.lineWidth=n.size,e=this._isDrawFromStart(t)?0:this._width-1,(0,k.drawVerticalLine)(this._ctx,e,0,this._height))}},{key:"_drawTickLines",value:function(t){var e=this,n=t.tickLine;if(n.display){this._ctx.lineWidth=n.size,this._ctx.strokeStyle=n.color;var r,c,o=n.length;this._isDrawFromStart(t)?(r=0,t.axisLine.display&&(r+=t.axisLine.size),c=r+o):(r=this._width,t.axisLine.display&&(r-=t.axisLine.size),c=r-o),this._yAxis.ticks().forEach((function(t){(0,k.drawHorizontalLine)(e._ctx,t.y,r,c)}))}}},{key:"_drawTickLabels",value:function(t){var e=this,n=t.tickText;if(n.display){var r,c=t.tickLine,o=c.display,l=c.length;this._isDrawFromStart(t)?(r=n.paddingLeft,t.axisLine.display&&(r+=t.axisLine.size),o&&(r+=l),this._ctx.textAlign="left"):(r=this._width-n.paddingRight,t.axisLine.display&&(r-=t.axisLine.size),o&&(r-=l),this._ctx.textAlign="right"),this._ctx.textBaseline="middle",this._ctx.font=(0,k.getFont)(n.size,n.weight,n.family),this._ctx.fillStyle=n.color,this._yAxis.ticks().forEach((function(t){e._ctx.fillText(t.v,r,t.y)})),this._ctx.textAlign="left"}}},{key:"_drawTechnicalIndicatorLastValue",value:function(t){var e=this,n=this._chartData.styleOptions().technicalIndicator,r=n.lastValueMark,c=this._additionalDataProvider.technicalIndicator(),o=c.result,l=o.length,h=o[l-1];if(r.display&&h){var d=this._chartData.dataList(),f=c.plots,_={preData:{kLineData:d[l-2],technicalIndicatorData:o[l-2]},currentData:{kLineData:d[l-1],technicalIndicatorData:h}},y=c.precision,x=n.line.colors||[],v=x.length,w=0;f.forEach((function(c){var o,l=h[c.key];switch(c.type){case m.PlotType.CIRCLE:o=c.color&&c.color(_,n)||n.circle.noChangeColor;break;case m.PlotType.BAR:o=c.color&&c.color(_,n)||n.bar.noChangeColor;break;default:o=x[w%v],w++}(0,L.isValid)(l)&&e._drawMarkLabel(t,l,y,r.textSize,r.textWeight,r.textFamily,r.textColor,o,r.textPaddingLeft,r.textPaddingTop,r.textPaddingRight,r.textPaddingBottom)}))}}},{key:"_drawLastPriceLabel",value:function(t){if(this._yAxis.isCandleStickYAxis()){var e=this._chartData.styleOptions().candleStick.priceMark,n=e.last,r=this._chartData.dataList(),c=r.length;if(e.display&&n.display&&n.text.display&&0!==c){var o,l=r[c-1],h=l.close,d=l.open;o=h>d?n.upColor:h<d?n.downColor:n.noChangeColor;var f=n.text;this._drawMarkLabel(t,h,this._chartData.pricePrecision(),f.size,f.weight,f.family,f.color,o,f.paddingLeft,f.paddingTop,f.paddingRight,f.paddingBottom)}}}},{key:"_drawMarkLabel",value:function(t,e,n,r,c,o,l,h,d,f,_,y){var text,x=this._yAxis.convertToPixel(e);if(x=+Math.max(.05*this._height,Math.min(x,.98*this._height)).toFixed(0),this._yAxis.isPercentageYAxis()){var v=this._chartData.dataList()[this._chartData.from()].close;text="".concat(((e-v)/v*100).toFixed(2),"%")}else text=(0,P.formatPrecision)(e,n),this._additionalDataProvider.technicalIndicator().shouldFormatBigNumber&&(text=(0,P.formatBigNumber)(text));this._ctx.font=(0,k.getFont)(r,c,o);var m,w=(0,k.calcTextWidth)(this._ctx,text)+d+_,L=f+r+y;m=this._isDrawFromStart(t)?0:this._width-w,this._ctx.fillStyle=h,this._ctx.fillRect(m,x-f-r/2,w,L),this._ctx.fillStyle=l,this._ctx.textBaseline="middle",this._ctx.fillText(text,m+d,x)}},{key:"_isDrawFromStart",value:function(t){return t.position===w.YAxisPosition.LEFT&&t.inside||t.position===w.YAxisPosition.RIGHT&&!t.inside}}]),n}(m.default);e.default=T},1842:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(10)),h=o(n(11)),d=o(n(16)),f=o(n(17)),_=o(n(14)),y=o(n(129)),x=n(47),v=n(75),m=n(86);function w(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,_.default)(t);if(e){var o=(0,_.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,f.default)(this,n)}}var k=function(t){(0,d.default)(n,t);var e=w(n);function n(t,r,c,o){var h;return(0,l.default)(this,n),(h=e.call(this,t,r))._yAxis=c,h._additionalDataProvider=o,h}return(0,h.default)(n,[{key:"_draw",value:function(){this._drawCrossHairLabel()}},{key:"_drawCrossHairLabel",value:function(){var t=this._chartData.crossHair();if(t.paneTag===this._additionalDataProvider.tag()&&0!==this._chartData.dataList().length){var e=this._chartData.styleOptions().floatLayer.crossHair,n=e.horizontal,r=n.text;if(e.display&&n.display&&r.display){var c,o=this._yAxis.convertFromPixel(t.y);if(this._yAxis.isPercentageYAxis()){var l=this._chartData.dataList()[this._chartData.from()].close;c="".concat(((o-l)/l*100).toFixed(2),"%")}else{var h=this._additionalDataProvider.technicalIndicator(),d=this._yAxis.isCandleStickYAxis()?this._chartData.pricePrecision():h.precision;c=(0,v.formatPrecision)(o,d),h.shouldFormatBigNumber&&(c=(0,v.formatBigNumber)(c))}var f=r.size;this._ctx.font=(0,x.getFont)(f,r.weight,r.family);var _,y=(0,x.calcTextWidth)(this._ctx,c),w=r.paddingLeft,k=r.paddingRight,P=r.paddingTop,L=r.paddingBottom,A=r.borderSize,D=y+2*A+w+k,T=f+2*A+P+L,S=this._chartData.styleOptions().yAxis;_=S.position===m.YAxisPosition.LEFT&&S.inside||S.position===m.YAxisPosition.RIGHT&&!S.inside?0:this._width-D;var I=t.y-A-P-f/2;this._ctx.fillStyle=r.backgroundColor,this._ctx.fillRect(_,I,D,T),this._ctx.lineWidth=A,this._ctx.strokeStyle=r.borderColor,this._ctx.strokeRect(_,I,D,T),this._ctx.textBaseline="middle",this._ctx.fillStyle=r.color,this._ctx.fillText(c,_+A+w,t.y)}}}}]),n}(y.default);e.default=k},1843:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(10)),h=o(n(11)),d=o(n(16)),f=o(n(17)),_=o(n(14)),y=o(n(1844)),x=o(n(1845)),v=o(n(921)),m=o(n(1846));function w(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,_.default)(t);if(e){var o=(0,_.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,f.default)(this,n)}}var k=function(t){(0,d.default)(n,t);var e=w(n);function n(){return(0,l.default)(this,n),e.apply(this,arguments)}return(0,h.default)(n,[{key:"_createMainView",value:function(t,e){return new y.default(t,e.chartData,e.xAxis,e.yAxis,e.additionalDataProvider)}},{key:"_createExpandView",value:function(t,e){return new m.default(t,e.chartData,e.xAxis,e.yAxis)}},{key:"_createFloatLayerView",value:function(t,e){return new x.default(t,e.chartData,e.xAxis,e.yAxis,e.additionalDataProvider)}}]),n}(v.default);e.default=k},1844:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(10)),h=o(n(11)),d=o(n(16)),f=o(n(17)),_=o(n(14)),y=o(n(922)),x=n(86),v=n(47),m=n(75);function w(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,_.default)(t);if(e){var o=(0,_.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,f.default)(this,n)}}var k=function(t){(0,d.default)(n,t);var e=w(n);function n(){return(0,l.default)(this,n),e.apply(this,arguments)}return(0,h.default)(n,[{key:"_draw",value:function(){this._drawGrid(),this._additionalDataProvider.chartType()===x.ChartType.REAL_TIME?this._drawRealTime():(this._drawCandleStick(),this._drawTechnicalIndicator(),this._drawHighestPriceMark(),this._drawLowestPriceMark()),this._drawLastPriceLine()}},{key:"_drawRealTime",value:function(){var t=this,e=[],n=[],r=[],c=this._chartData.from(),o=this._additionalDataProvider.technicalIndicator().result;this._drawGraphics((function(l,i,h,d){var f=(o[i]||{}).average||0,_=t._yAxis.convertToPixel(h.close),y=t._yAxis.convertToPixel(f);if(r.push({x:l,y:y}),i===c){var x=l-d;n.push({x:x,y:t._height}),n.push({x:x,y:_}),e.push({x:x,y:_})}e.push({x:l,y:_}),n.push({x:l,y:_})}),(function(){var c=n.length;if(c>0){var o=n[c-1],l=t._chartData.barSpace()/2,h=o.x+l;e.push({x:h,y:o.y}),n.push({x:h,y:o.y}),n.push({x:h,y:t._height})}var d=t._chartData.styleOptions().realTime,f=d.timeLine;if(e.length>0&&(t._ctx.lineWidth=f.size,t._ctx.strokeStyle=f.color,(0,v.drawLine)(t._ctx,(function(){t._ctx.beginPath(),t._ctx.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;i++)t._ctx.lineTo(e[i].x,e[i].y);t._ctx.stroke(),t._ctx.closePath()}))),n.length>0){t._ctx.fillStyle=f.areaFillColor,t._ctx.beginPath(),t._ctx.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;i++)t._ctx.lineTo(n[i].x,n[i].y);t._ctx.closePath(),t._ctx.fill()}var _=d.averageLine;_.display&&r.length>0&&(t._ctx.lineWidth=_.size,t._ctx.strokeStyle=_.color,(0,v.drawLine)(t._ctx,(function(){t._ctx.beginPath(),t._ctx.moveTo(r[0].x,r[0].y);for(var e=1;e<r.length;e++)t._ctx.lineTo(r[e].x,r[e].y);t._ctx.stroke(),t._ctx.closePath()})))}))}},{key:"_drawCandleStick",value:function(){var t=this,e=this._chartData.styleOptions().candleStick;this._drawGraphics((function(n,i,r,c,o){t._drawCandleStickBar(n,c,o,r,e.bar,e.bar.style)}))}},{key:"_drawHighestPriceMark",value:function(){var t=this._chartData.styleOptions().candleStick.priceMark,e=t.high;if(t.display&&e.display){for(var n=this._chartData.dataList(),r=this._chartData.to(),c=-1/0,o=-1,i=this._chartData.from();i<r;i++){var l=(0,m.formatValue)(n[i],"high",-1/0);l>c&&(c=l,o=i)}c!==-1/0&&this._drawLowestHighestPriceMark(e,o,c,!0)}}},{key:"_drawLowestPriceMark",value:function(){var t=this._chartData.styleOptions().candleStick.priceMark,e=t.low;if(t.display&&e.display){for(var n=this._chartData.dataList(),r=this._chartData.to(),c=1/0,o=-1,i=this._chartData.from();i<r;i++){var l=(0,m.formatValue)(n[i],"low",1/0);l<c&&(c=l,o=i)}c!==1/0&&this._drawLowestHighestPriceMark(e,o,c)}}},{key:"_drawLowestHighestPriceMark",value:function(t,e,n,r){var c=this,o=this._chartData.pricePrecision(),l=this._yAxis.convertToPixel(n),h=this._xAxis.convertToPixel(e),d=l+(r?-2:2);this._ctx.textAlign="left",this._ctx.lineWidth=1,this._ctx.strokeStyle=t.color,this._ctx.fillStyle=t.color,(0,v.drawLine)(this._ctx,(function(){c._ctx.beginPath(),c._ctx.moveTo(h,d),c._ctx.lineTo(h-2,d+(r?-2:2)),c._ctx.stroke(),c._ctx.closePath(),c._ctx.beginPath(),c._ctx.moveTo(h,d),c._ctx.lineTo(h+2,d+(r?-2:2)),c._ctx.stroke(),c._ctx.closePath()}));var f=d+(r?-5:5);(0,v.drawVerticalLine)(this._ctx,h,d,f),(0,v.drawHorizontalLine)(this._ctx,f,h,h+5),this._ctx.font=(0,v.getFont)(t.textSize,t.textWeight,t.textFamily);var text=(0,m.formatPrecision)(n,o);this._ctx.textBaseline="middle",this._ctx.fillText(text,h+5+t.textMargin,f)}},{key:"_drawLastPriceLine",value:function(){var t=this._chartData.dataList(),e=t.length,n=this._chartData.styleOptions().candleStick.priceMark,r=n.last;if(n.display&&r.display&&r.line.display&&0!==e){var c,o=t[e-1],l=o.close,h=o.open,d=this._yAxis.convertToPixel(l);d=+Math.max(.05*this._height,Math.min(d,.98*this._height)).toFixed(0),c=l>h?r.upColor:l<h?r.downColor:r.noChangeColor;var f=r.line;this._ctx.save(),this._ctx.strokeStyle=c,this._ctx.lineWidth=f.size,f.style===x.LineStyle.DASH&&this._ctx.setLineDash(f.dashValue),(0,v.drawHorizontalLine)(this._ctx,d,0,this._width),this._ctx.restore()}}}]),n}(y.default);e.default=k},1845:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(10)),h=o(n(11)),d=o(n(16)),f=o(n(17)),_=o(n(14)),y=o(n(923)),x=n(52),v=n(75),m=n(47),w=n(86),k=n(489);function P(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,_.default)(t);if(e){var o=(0,_.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,f.default)(this,n)}}var L=function(t){(0,d.default)(n,t);var e=P(n);function n(){return(0,l.default)(this,n),e.apply(this,arguments)}return(0,h.default)(n,[{key:"_drawPrompt",value:function(t,e,n,r,c,o,l){if(!(n<0||n>l-1)){var h=this._chartData.styleOptions(),d=h.floatLayer.prompt.candleStick,f=this._getCandleStickPromptData(t,h.candleStick,d,n);if(d.showType===w.FloatLayerPromptCandleStickTextDisplayType.STANDARD)this._drawCandleStickStandardPromptText(d,f),this._additionalDataProvider.chartType()===w.ChartType.CANDLE_STICK&&this._drawTechnicalIndicatorPromptText(e,n,c,d.text.size+d.text.marginTop);else{var data=(0,k.getTechnicalIndicatorInfo)(e,c,this._yAxis);this._drawCandleStickRectPromptText(r,d,f,data)}}}},{key:"_drawCandleStickStandardPromptText",value:function(t,e){var n=this,r=e,c=t.text.marginLeft,o=t.text.marginRight,l=t.text.size,h=t.text.color,d=t.labels;this._ctx.textBaseline="top",this._ctx.font=(0,m.getFont)(l,t.text.weight,t.text.family);var f=c,_=t.text.marginTop;d.forEach((function(label,i){var t=label?"".concat(label," "):"",e=(0,m.calcTextWidth)(n._ctx,t);n._ctx.fillStyle=h,n._ctx.fillText(t,f,_),f+=e;var l,d=r[i]||"n/a";(0,x.isObject)(d)?(l=d.value||"n/a",n._ctx.fillStyle=d.color||h):(n._ctx.fillStyle=h,l=d);var y=(0,m.calcTextWidth)(n._ctx,l);n._ctx.fillText(l,f,_),f+=y+c+o}))}},{key:"_drawCandleStickRectPromptText",value:function(t,e,n,r){var c=this,o=e.labels,l=n,h=e.text.marginLeft,d=e.text.marginRight,f=e.text.marginTop,_=e.text.marginBottom,y=e.text.size,v=e.text.color,k=e.text.labelColor;this._ctx.save(),this._ctx.textBaseline="top",this._ctx.font=(0,m.getFont)(y,e.text.weight,e.text.family);var P=0;o.forEach((function(label,i){var t=l[i]||"n/a",e=t;(0,x.isObject)(t)&&(e=t.value||"n/a");var text="".concat(label," ").concat(e),n=(0,m.calcTextWidth)(c._ctx,text)+h+d+10;P=Math.max(P,n)}));var rect=e.rect,L=rect.borderSize,A=rect.paddingLeft,D=rect.paddingRight,T=rect.paddingTop,S=rect.paddingBottom,I=rect.left,C=rect.right,M=2*L+T+S+(_+f+y)*o.length,R=this._chartData.styleOptions().floatLayer.prompt.technicalIndicator,E=this._chartData.styleOptions().candleStick.bar,O=R.text.marginLeft,W=R.text.marginRight,H=R.text.marginTop,V=R.text.marginBottom,B=R.text.size,F=this._additionalDataProvider.chartType()===w.ChartType.CANDLE_STICK,z=r.labels||[],N=r.values||[];F&&(this._ctx.font=(0,m.getFont)(B,R.text.weight,R.text.family),z.forEach((function(label,i){var t=N[i].value||"n/a",text="".concat(label," ").concat(t),e=(0,m.calcTextWidth)(c._ctx,text)+O+W;P=Math.max(P,e)})),M+=(H+V+B)*z.length);var G,Y=2*L+P+A+D,j=this._width/2;G=t<j?this._width-C-Y:I;var K=rect.top,U=rect.borderRadius;this._ctx.lineWidth=L,this._ctx.strokeStyle=rect.borderColor,this._ctx.fillStyle=rect.fillColor,this._drawRoundRect(G,K,Y,M,U),this._ctx.stroke(),this._drawRoundRect(G,K,Y,M,U),this._ctx.fill();var Z=G+L+A+h,J=K+L+T;if(this._ctx.font=(0,m.getFont)(y,e.text.weight,e.text.family),o.forEach((function(label,i){J+=f,c._ctx.textAlign="left",c._ctx.fillStyle=k,c._ctx.fillText("".concat(label," "),Z,J);var text,t,e=l[i]||"n/a";t=e.color?e.color:e.hasOwnProperty("upOrDown")?e.upOrDown?E.upColor:E.downColor:v,c._ctx.fillStyle=t,text=(0,x.isObject)(e)?e.value||"n/a":e,c._ctx.textAlign="right",c._ctx.fillText(text,G+Y-L-d-D,J),J+=y+_})),F){var $=this._chartData.styleOptions().technicalIndicator,Q=$.line.colors,X=G+L+A+O,tt=Q.length;this._ctx.font=(0,m.getFont)(B,R.text.weight,R.text.family),z.forEach((function(label,i){J+=H,c._ctx.textAlign="left",c._ctx.fillStyle=Q[i%tt]||$.text.color,c._ctx.fillText("".concat(label.toUpperCase()," "),X,J),c._ctx.textAlign="right",c._ctx.fillText(N[i].value||"n/a",G+Y-L-W-D,J),J+=B+V}))}this._ctx.restore()}},{key:"_drawRoundRect",value:function(t,e,n,r,c){this._ctx.beginPath(),this._ctx.moveTo(t+c,e),this._ctx.arcTo(t+n,e,t+n,e+r,c),this._ctx.arcTo(t+n,e+r,t,e+r,c),this._ctx.arcTo(t,e+r,t,e,c),this._ctx.arcTo(t,e,t+n,e,c),this._ctx.closePath()}},{key:"_getCandleStickPromptData",value:function(t,e,n,r){var c=this,o=n.values,l=[];if(o)(0,x.isFunction)(o)?l=o(t,e,n,r)||[]:(0,x.isArray)(o)&&(l=o);else{var h=this._chartData.pricePrecision(),d=this._chartData.volumePrecision();(l=[(0,v.formatValue)(t,"timestamp"),(0,v.formatValue)(t,"open"),(0,v.formatValue)(t,"close"),(0,v.formatValue)(t,"high"),(0,v.formatValue)(t,"low"),(0,v.formatValue)(t,"volume")]).forEach((function(t,e){switch(e){case 0:l[e]=(0,v.formatDate)(c._chartData.dateTimeFormat(),t,"YYYY-MM-DD hh:mm");break;case l.length-1:l[e]=(0,v.formatBigNumber)((0,v.formatPrecision)(t,d));break;default:l[e]=(0,v.formatPrecision)(t,h)}}))}return l}}]),n}(y.default);e.default=L},1846:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(10)),h=o(n(11)),d=o(n(16)),f=o(n(17)),_=o(n(14)),y=o(n(129)),x=n(926),v=n(128),m=n(927),w=n(75),k=n(47);function P(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,_.default)(t);if(e){var o=(0,_.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,f.default)(this,n)}}var L=0,A=1,D=2,T=function(t){(0,d.default)(n,t);var e=P(n);function n(t,r,c,o){var h;return(0,l.default)(this,n),(h=e.call(this,t,r))._xAxis=c,h._yAxis=o,h}return(0,h.default)(n,[{key:"_draw",value:function(){var t=this._chartData.styleOptions().graphicMark,e=this._chartData.pricePrecision();this._drawHorizontalStraightLine(t),this._drawVerticalStraightLine(t),this._drawStraightLine(t),this._drawHorizontalRayLine(t),this._drawVerticalRayLine(t),this._drawRayLine(t),this._drawSegmentLine(t),this._drawPriceLine(t,e),this._drawPriceChannelLine(t),this._drawParallelStraightLine(t),this._drawFibonacciLine(t,e)}},{key:"_drawHorizontalStraightLine",value:function(t){var e=this;this._drawPointGraphicMark(v.GraphicMarkType.HORIZONTAL_STRAIGHT_LINE,t,x.checkPointOnStraightLine,(function(t){return[[{x:0,y:t[0].y},{x:e._width,y:t[0].y}]]}))}},{key:"_drawVerticalStraightLine",value:function(t){var e=this;this._drawPointGraphicMark(v.GraphicMarkType.VERTICAL_STRAIGHT_LINE,t,x.checkPointOnStraightLine,(function(t){return[[{x:t[0].x,y:0},{x:t[0].x,y:e._height}]]}))}},{key:"_drawStraightLine",value:function(t){var e=this;this._drawPointGraphicMark(v.GraphicMarkType.STRAIGHT_LINE,t,x.checkPointOnStraightLine,(function(t){if(t[0].x===t[1].x)return[[{x:t[0].x,y:0},{x:t[0].x,y:e._height}]];var n=(0,x.getLinearY)(t[0],t[1],[{x:0,y:t[0].y},{x:e._width,y:t[0].y}]);return[[{x:0,y:n[0]},{x:e._width,y:n[1]}]]}))}},{key:"_drawHorizontalRayLine",value:function(t){var e=this;this._drawPointGraphicMark(v.GraphicMarkType.HORIZONTAL_RAY_LINE,t,x.checkPointOnRayLine,(function(t){var n={x:0,y:t[0].y};return t[0].x<t[1].x&&(n.x=e._width),[[t[0],n]]}))}},{key:"_drawVerticalRayLine",value:function(t){var e=this;this._drawPointGraphicMark(v.GraphicMarkType.VERTICAL_RAY_LINE,t,x.checkPointOnRayLine,(function(t){var n={x:t[0].x,y:0};return t[0].y<t[1].y&&(n.y=e._height),[[t[0],n]]}))}},{key:"_drawRayLine",value:function(t){var e=this;this._drawPointGraphicMark(v.GraphicMarkType.RAY_LINE,t,x.checkPointOnRayLine,(function(t){var n;return n=t[0].x===t[1].x&&t[0].y!==t[1].y?t[0].y<t[1].y?{x:t[0].x,y:e._height}:{x:t[0].x,y:0}:t[0].x>t[1].x?{x:0,y:(0,x.getLinearY)(t[0],t[1],[{x:0,y:t[0].y}])[0]}:{x:e._width,y:(0,x.getLinearY)(t[0],t[1],[{x:e._width,y:t[0].y}])[0]},[[t[0],n]]}))}},{key:"_drawSegmentLine",value:function(t){this._drawPointGraphicMark(v.GraphicMarkType.HORIZONTAL_SEGMENT_LINE,t,x.checkPointOnSegmentLine),this._drawPointGraphicMark(v.GraphicMarkType.VERTICAL_SEGMENT_LINE,t,x.checkPointOnSegmentLine),this._drawPointGraphicMark(v.GraphicMarkType.SEGMENT_LINE,t,x.checkPointOnSegmentLine)}},{key:"_drawPriceLine",value:function(t,e){var n=this;this._drawPointGraphicMark(v.GraphicMarkType.PRICE_LINE,t,x.checkPointOnRayLine,(function(t){return[[t[0],{x:n._width,y:t[0].y}]]}),!0,e)}},{key:"_drawPriceChannelLine",value:function(t){var e=this;this._drawPointGraphicMark(v.GraphicMarkType.PRICE_CHANNEL_LINE,t,x.checkPointOnStraightLine,(function(t){return(0,x.getParallelLines)(t,{width:e._width,height:e._height},!0)}))}},{key:"_drawParallelStraightLine",value:function(t){var e=this;this._drawPointGraphicMark(v.GraphicMarkType.PARALLEL_STRAIGHT_LINE,t,x.checkPointOnStraightLine,(function(t){return(0,x.getParallelLines)(t,{width:e._width,height:e._height})}))}},{key:"_drawFibonacciLine",value:function(t,e){var n=this;this._drawPointGraphicMark(v.GraphicMarkType.FIBONACCI_LINE,t,x.checkPointOnStraightLine,(function(t){return(0,x.getFibonacciLines)(t,{width:n._width,height:n._height})}),!0,e,["(100.0%)","(78.6%)","(61.8%)","(50.0%)","(38.2%)","(23.6%)","(0.0%)"])}},{key:"_drawPointGraphicMark",value:function(t,e,n,r,c,o,l){var h=this;this._chartData.graphicMarkData()[t].forEach((function(t){var d=t.points,f=t.drawStep,_=[];d.forEach((function(t){var e=t.xPos,n=t.price,r=h._xAxis.convertToPixel(e),c=h._yAxis.convertToPixel(n);_.push({x:r,y:c})}));var y=r?r(_):[_];h._drawGraphicMark(e,y,_,f,n,c,o,l)}))}},{key:"_drawGraphicMark",value:function(t,e,n,r,c,o,l){var h=this,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],f=this._chartData.graphicMarkPoint(),_=!1;e.forEach((function(e,i){if(e.length>1){var n=c(e[0],e[1],f);if(_||(_=n),r!==m.GraphicMarkDrawStep.STEP_1){switch(h._ctx.strokeStyle=t.line.color,h._ctx.lineWidth=t.line.size,h._getLineType(e[0],e[1])){case L:(0,k.drawLine)(h._ctx,(function(){h._ctx.beginPath(),h._ctx.moveTo(e[0].x,e[0].y),h._ctx.lineTo(e[1].x,e[1].y),h._ctx.stroke(),h._ctx.closePath()}));break;case A:(0,k.drawHorizontalLine)(h._ctx,e[0].y,e[0].x,e[1].x);break;case D:(0,k.drawVerticalLine)(h._ctx,e[0].x,e[0].y,e[1].y)}if(o){var y=h._yAxis.convertFromPixel(e[0].y),x=(0,w.formatPrecision)(y,l);h._ctx.font=(0,k.getFont)(t.text.size,t.text.weight,t.text.family),h._ctx.fillStyle=t.text.color,h._ctx.fillText("".concat(x," ").concat(d[i]||""),e[0].x+t.text.marginLeft,e[0].y-t.text.marginBottom)}}}}));for(var y=t.point.radius,v=!1,i=0;i<n.length&&!(v=(0,x.checkPointOnCircle)(n[i],y,f));i++);n.forEach((function(e){var n=(0,x.checkPointOnCircle)(e,y,f);if(v||_){var r=y,c=t.point.backgroundColor,o=t.point.borderColor,l=t.point.borderSize;n&&(r=t.point.activeRadius,c=t.point.activeBackgroundColor,o=t.point.activeBorderColor,l=t.point.activeBorderSize),h._ctx.fillStyle=c,h._ctx.beginPath(),h._ctx.arc(e.x,e.y,r,0,2*Math.PI),h._ctx.closePath(),h._ctx.fill(),h._ctx.lineWidth=l,h._ctx.strokeStyle=o,h._ctx.beginPath(),h._ctx.arc(e.x,e.y,r,0,2*Math.PI),h._ctx.closePath(),h._ctx.stroke()}}))}},{key:"_getLineType",value:function(t,e){return t.x===e.x?D:t.y===e.y?A:L}}]),n}(y.default);e.default=T},1848:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(10)),h=o(n(11)),d=o(n(919)),f=o(n(16)),_=o(n(17)),y=o(n(14)),x=o(n(920)),v=o(n(1849)),m=o(n(1852));function w(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,y.default)(t);if(e){var o=(0,y.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,_.default)(this,n)}}var k=function(t){(0,f.default)(n,t);var e=w(n);function n(){return(0,l.default)(this,n),e.apply(this,arguments)}return(0,h.default)(n,[{key:"_initBefore",value:function(){this._xAxis=new m.default(this._chartData)}},{key:"_createMainWidget",value:function(t,e){return new v.default({container:t,chartData:e.chartData,xAxis:this._xAxis})}},{key:"computeAxis",value:function(){this._xAxis.computeAxis(!0)}},{key:"getSelfAxisHeight",value:function(){return this._xAxis.getSelfHeight()}},{key:"xAxis",value:function(){return this._xAxis}},{key:"setWidth",value:function(t,e){(0,d.default)((0,y.default)(n.prototype),"setWidth",this).call(this,t,e),this._xAxis.setWidth(t)}},{key:"setHeight",value:function(t){(0,d.default)((0,y.default)(n.prototype),"setHeight",this).call(this,t),this._xAxis.setHeight(t)}}]),n}(x.default);e.default=k},1849:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(10)),h=o(n(11)),d=o(n(16)),f=o(n(17)),_=o(n(14)),y=o(n(490)),x=o(n(1850)),v=o(n(1851));function m(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,_.default)(t);if(e){var o=(0,_.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,f.default)(this,n)}}var w=function(t){(0,d.default)(n,t);var e=m(n);function n(){return(0,l.default)(this,n),e.apply(this,arguments)}return(0,h.default)(n,[{key:"_createMainView",value:function(t,e){return new x.default(t,e.chartData,e.xAxis)}},{key:"_createFloatLayerView",value:function(t,e){return new v.default(t,e.chartData,e.xAxis)}}]),n}(y.default);e.default=w},1850:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(10)),h=o(n(11)),d=o(n(16)),f=o(n(17)),_=o(n(14)),y=o(n(129)),x=n(47);function v(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,_.default)(t);if(e){var o=(0,_.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,f.default)(this,n)}}var m=function(t){(0,d.default)(n,t);var e=v(n);function n(t,r,c){var o;return(0,l.default)(this,n),(o=e.call(this,t,r))._xAxis=c,o}return(0,h.default)(n,[{key:"_draw",value:function(){var t=this._chartData.styleOptions().xAxis;t.display&&(this._drawAxisLine(t),this._drawTickLines(t),this._drawTickLabels(t))}},{key:"_drawAxisLine",value:function(t){var e=t.axisLine;e.display&&(this._ctx.strokeStyle=e.color,this._ctx.lineWidth=e.size,(0,x.drawHorizontalLine)(this._ctx,0,0,this._width))}},{key:"_drawTickLines",value:function(t){var e=this,n=t.tickLine;if(n.display){this._ctx.lineWidth=n.size,this._ctx.strokeStyle=n.color;var r=t.axisLine.display?t.axisLine.size:0,c=r+n.length;this._xAxis.ticks().forEach((function(t){(0,x.drawVerticalLine)(e._ctx,t.x,r,c)}))}}},{key:"_drawTickLabels",value:function(t){var e=t.tickText;if(e.display){var n=t.tickLine;this._ctx.textBaseline="top",this._ctx.font=(0,x.getFont)(e.size,e.weight,e.family),this._ctx.textAlign="center",this._ctx.fillStyle=e.color;var r=e.paddingTop;t.axisLine.display&&(r+=t.axisLine.size),n.display&&(r+=n.length);for(var c=this._xAxis.ticks(),o=c.length,i=0;i<o;i++)this._ctx.fillText(c[i].v,c[i].x,r)}}}]),n}(y.default);e.default=m},1851:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(10)),h=o(n(11)),d=o(n(16)),f=o(n(17)),_=o(n(14)),y=o(n(129)),x=n(75),v=n(47),m=n(52);function w(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,_.default)(t);if(e){var o=(0,_.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,f.default)(this,n)}}var k=function(t){(0,d.default)(n,t);var e=w(n);function n(t,r,c){var o;return(0,l.default)(this,n),(o=e.call(this,t,r))._xAxis=c,o}return(0,h.default)(n,[{key:"_draw",value:function(){this._drawCrossHairLabel()}},{key:"_drawCrossHairLabel",value:function(){var t=this._chartData.crossHair();if(t.paneTag){var e=this._chartData.styleOptions().floatLayer.crossHair,n=e.vertical,r=n.text;if(e.display&&n.display&&r.display){var c,o=this._chartData.dataList(),l=o[c=(0,m.isValid)(t.x)?this._xAxis.convertFromPixel(t.x):o.length-1];if(l){var h=this._xAxis.convertToPixel(c),d=l.timestamp,text=(0,x.formatDate)(this._chartData.dateTimeFormat(),d,"YYYY-MM-DD hh:mm"),f=r.size;this._ctx.font=(0,v.getFont)(f,r.weight,r.family);var _=(0,v.calcTextWidth)(this._ctx,text),y=h-_/2,w=r.paddingLeft,k=r.paddingRight,P=r.paddingTop,L=r.paddingBottom,A=r.borderSize;y<w+A?y=w+A:y>this._width-_-A-k&&(y=this._width-_-A-k);var D=y-A-w,T=y+_+A+k,S=0+f+2*A+P+L;this._ctx.fillStyle=r.backgroundColor,this._ctx.fillRect(D,0,T-D,S-0),this._ctx.lineWidth=A,this._ctx.strokeStyle=r.borderColor,this._ctx.strokeRect(D,0,T-D,S-0),this._ctx.textBaseline="top",this._ctx.fillStyle=r.color,this._ctx.fillText(text,y,A+P)}}}}}]),n}(y.default);e.default=k},1853:function(t,e,n){"use strict";var r=n(0),c=n(1);r(e,"__esModule",{value:!0}),e.default=void 0;var o=c(n(10)),l=c(n(11)),h=c(n(492)),d=n(47),f=function(){function t(e,n,r,c,l){(0,o.default)(this,t),this._chartData=n,this._paneIndex=r,this._width=0,this._offsetLeft=0,this._dragEventHandler=l,this._initElement(e,c)}return(0,l.default)(t,[{key:"_initElement",value:function(t,e){this._container=t,this._wrapper=this._createElement(),this._wrapper.style.overflow="hidden",this._element=this._createElement(),this._element.style.width="100%",this._element.style.position="absolute",this._element.style.zIndex="20",this._element.style.height="5px",e&&(this._element.style.cursor="ns-resize",this._dragEvent=new h.default(this._element,{mouseDownEvent:this._mouseDownEvent.bind(this),pressedMouseMoveEvent:this._pressedMouseMoveEvent.bind(this)},{treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!0})),this._wrapper.appendChild(this._element);var n=t.lastChild;n?t.insertBefore(this._wrapper,n):t.appendChild(this._wrapper)}},{key:"_createElement",value:function(){var element=document.createElement("div");return element.style.margin="0",element.style.padding="0",element}},{key:"_mouseDownEvent",value:function(t){this._startY=t.pageY,this._dragEventHandler.startDrag(this._paneIndex)}},{key:"_pressedMouseMoveEvent",value:function(t){var e=t.pageY-this._startY;this._dragEventHandler.drag(e,this._paneIndex)}},{key:"height",value:function(){return this._wrapper.offsetHeight}},{key:"setSize",value:function(t,e){this._offsetLeft=t,this._width=e,this.invalidate()}},{key:"updatePaneIndex",value:function(t){this._paneIndex=t}},{key:"invalidate",value:function(){var t=this._chartData.styleOptions().separator;this._wrapper.style.backgroundColor=t.color,this._wrapper.style.height="".concat(t.size,"px"),this._wrapper.style.marginLeft="".concat(t.fill?0:this._offsetLeft,"px"),this._wrapper.style.width=t.fill?"100%":"".concat(this._width,"px")}},{key:"getImage",value:function(){var t=this._chartData.styleOptions().separator,canvas=document.createElement("canvas"),e=canvas.getContext("2d"),n=(0,d.getPixelRatio)(canvas),r=this._wrapper.offsetWidth,c=t.size;return canvas.style.width="".concat(r,"px"),canvas.style.height="".concat(c,"px"),canvas.width=r*n,canvas.height=c*n,e.scale(n,n),e.fillStyle=t.color,e.fillRect(this._offsetLeft,0,r,c),canvas}},{key:"destroy",value:function(){this._dragEvent&&this._dragEvent.destroy(),this._container.removeChild(this._wrapper)}}]),t}();e.default=f},1857:function(t,e,n){"use strict";var r=n(0),c=n(1);r(e,"__esModule",{value:!0}),e.throttle=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=0;return function(){var r=(0,o.default)(),c=this,l=arguments;r-n>e&&(t.apply(c,l),n=r)}};var o=c(n(53))},47:function(t,e,n){"use strict";n(0)(e,"__esModule",{value:!0}),e.getPixelRatio=function(canvas){return canvas.ownerDocument&&canvas.ownerDocument.defaultView&&canvas.ownerDocument.defaultView.devicePixelRatio||1},e.calcTextWidth=function(t,text){return Math.round(t.measureText(text).width)},e.getFont=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Helvetica Neue";return"".concat(e," ").concat(t,"px ").concat(n)},e.drawHorizontalLine=function(t,e,n,r){t.beginPath();var c=t.lineWidth%2?.5:0;t.moveTo(n,e+c),t.lineTo(r,e+c),t.stroke(),t.closePath()},e.drawVerticalLine=function(t,e,n,r){t.beginPath();var c=t.lineWidth%2?.5:0;t.moveTo(e+c,n),t.lineTo(e+c,r),t.stroke(),t.closePath()},e.drawLine=function(t,e){t.save(),t.lineWidth%2&&t.translate(.5,.5);e(),t.restore()}},490:function(t,e,n){"use strict";var r=n(0),c=n(1);r(e,"__esModule",{value:!0}),e.default=void 0;var o=c(n(10)),l=c(n(11)),h=n(128),d=n(47),f=function(){function t(e){(0,o.default)(this,t),this._width=0,this._height=0,this._initElement(e.container),this._mainView=this._createMainView(this._element,e),this._expandView=this._createExpandView(this._element,e),this._floatLayerView=this._createFloatLayerView(this._element,e)}return(0,l.default)(t,[{key:"_initElement",value:function(t){this._element=document.createElement("div"),this._element.style.top="0",this._element.style.margin="0",this._element.style.padding="0",this._element.style.position="absolute",this._element.style.overflow="hidden",t.appendChild(this._element)}},{key:"_createMainView",value:function(t,e){}},{key:"_createExpandView",value:function(t,e){}},{key:"_createFloatLayerView",value:function(t,e){}},{key:"getElement",value:function(){return this._element}},{key:"setWidth",value:function(t){this._width=t,this._mainView.setWidth(t),this._floatLayerView.setWidth(t),this._expandView&&this._expandView.setWidth(t)}},{key:"setHeight",value:function(t){this._height=t,this._mainView.setHeight(t),this._floatLayerView.setHeight(t),this._expandView&&this._expandView.setHeight(t)}},{key:"setOffsetLeft",value:function(t){this._element.style.left="".concat(t,"px")}},{key:"layout",value:function(){this._element.offsetWidth!==this._width&&(this._element.style.width="".concat(this._width,"px")),this._element.offsetHeight!==this._height&&(this._element.style.height="".concat(this._height,"px")),this._mainView.layout(),this._floatLayerView.layout(),this._expandView&&this._expandView.layout()}},{key:"invalidate",value:function(t){switch(t){case h.InvalidateLevel.GRAPHIC_MARK:this._expandView&&this._expandView.flush();break;case h.InvalidateLevel.FLOAT_LAYER:this._floatLayerView.flush();break;case h.InvalidateLevel.MAIN:case h.InvalidateLevel.FULL:this._mainView.flush(),this._floatLayerView.flush(),this._expandView&&this._expandView.flush()}}},{key:"getImage",value:function(t,e){var canvas=document.createElement("canvas"),n=canvas.getContext("2d"),r=(0,d.getPixelRatio)(canvas);return canvas.style.width="".concat(this._width,"px"),canvas.style.height="".concat(this._height,"px"),canvas.width=this._width*r,canvas.height=this._height*r,n.scale(r,r),n.drawImage(this._mainView.getImage(),0,0,this._width,this._height),e&&this._expandView&&n.drawImage(this._expandView.getImage(),0,0,this._width,this._height),t&&n.drawImage(this._floatLayerView.getImage(),0,0,this._width,this._height),canvas}}]),t}();e.default=f},52:function(t,e,n){"use strict";var r=n(0),c=n(1);r(e,"__esModule",{value:!0}),e.merge=function t(e,source){if(!h(e)||!h(source))return;for(var n in source)if(e.hasOwnProperty(n)){var r=e[n],c=source[n];h(c)&&h(r)&&!l(c)&&!l(r)?t(r,c):(source[n]||0===source[n]||!1===source[n])&&(e[n]=source[n])}},e.clone=function t(e){if(!e||!h(e))return e;var n,p,r;n=l(e)?[]:{};for(p in e)e.hasOwnProperty(p)&&((r=e[p])&&h(r)?n[p]=t(r):n[p]=r);return n},e.isArray=l,e.isFunction=function(t){return"function"==typeof t},e.isObject=h,e.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},e.isValid=function(t){return null!=t},e.isBoolean=function(t){return"boolean"==typeof t};var o=c(n(18));function l(t){return"[object Array]"===Object.prototype.toString.call(t)}function h(t){return!!t&&"object"===(0,o.default)(t)}},75:function(t,e,n){"use strict";n(0)(e,"__esModule",{value:!0}),e.formatValue=function(data,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"--";if(data&&(0,r.isObject)(data)){var n=data[t];if(n||0===n||!1===n)return n}return e},e.formatDate=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"MM-DD hh:mm";if(e&&(0,r.isNumber)(e)){var c=t.format(new Date(e)),o=c.split(", "),l=o[0].split("/"),h={YYYY:l[2],MM:l[0],DD:l[1],"hh:mm":"24"===o[1].match(/^[\d]{2}/)[0]?o[1].replace(/^[\d]{2}/,"00"):o[1]};return n.replace(/YYYY|MM|DD|(hh:mm)/g,(function(t){return h[t]}))}return"--"},e.formatPrecision=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=+t;if((n||0===n)&&(0,r.isNumber)(n))return n.toFixed(e);return"".concat(n)},e.formatBigNumber=function(t){if((0,r.isNumber)(+t))return t>1e9?"".concat(+(t/1e9).toFixed(3),"B"):t>1e6?"".concat(+(t/1e6).toFixed(3),"M"):t>1e3?"".concat(+(t/1e3).toFixed(3),"K"):t;return"--"};var r=n(52)},916:function(t,e,n){"use strict";var r=n(18),c=n(60),o=n(55),l=n(56),h=n(39),d=n(21),f=n(0),_=n(5),y=n(1);f(e,"__esModule",{value:!0}),e.default=e.CANDLE_STICK_PANE_TAG=void 0;var x=y(n(30)),v=y(n(152)),m=y(n(10)),w=y(n(11)),k=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=O(e);if(n&&n.has(t))return n.get(t);var c={},o=f&&_;for(var l in t)if("default"!==l&&Object.prototype.hasOwnProperty.call(t,l)){var desc=o?_(t,l):null;desc&&(desc.get||desc.set)?f(c,l,desc):c[l]=t[l]}c.default=t,n&&n.set(t,c);return c}(n(128)),P=y(n(1834)),L=y(n(1848)),A=n(86),D=n(52),T=n(75),S=y(n(918)),I=y(n(1853)),C=y(n(1854)),M=n(47),R=n(176),E=n(1857);function O(t){if("function"!=typeof d)return null;var e=new d,n=new d;return(O=function(t){return t?n:e})(t)}function W(t,e){var n=void 0!==o&&t[l]||t["@@iterator"];if(!n){if(h(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return c(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,f=!0,_=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return f=t.done,t},e:function(t){_=!0,d=t},f:function(){try{f||null==n.return||n.return()}finally{if(_)throw d}}}}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}e.CANDLE_STICK_PANE_TAG="candle_stick_pane_tag";var V=function(){function t(e,n){(0,m.default)(this,t),this._initChartContainer(e),this._technicalIndicatorBaseId=0,this._technicalIndicatorPanes=[],this._separatorPanes=[],this._separatorDragStartTechnicalIndicatorHeight=0,this._chartData=new k.default(n,this._updatePane.bind(this)),this._xAxisPane=new L.default({container:this._chartContainer,chartData:this._chartData}),this._candleStickPane=new P.default({container:this._chartContainer,chartData:this._chartData,xAxis:this._xAxisPane.xAxis(),tag:"candle_stick_pane_tag"}),this._chartEvent=new C.default(this._chartContainer,this._chartData,this._xAxisPane.xAxis(),this._candleStickPane.yAxis()),this._measurePaneHeight(),this._measureWidthAndLayoutPane(!0)}return(0,w.default)(t,[{key:"_initChartContainer",value:function(t){this._container=t,this._chartContainer=document.createElement("div"),this._chartContainer.style.userSelect="none",this._chartContainer.style.webkitUserSelect="none",this._chartContainer.style.msUserSelect="none",this._chartContainer.style.MozUserSelect="none",this._chartContainer.style.webkitTapHighlightColor="transparent",this._chartContainer.style.position="relative",this._chartContainer.style.outline="none",this._chartContainer.style.borderStyle="none",this._chartContainer.style.width="100%",this._chartContainer.style.cursor="crosshair",this._chartContainer.tabIndex=1,t.appendChild(this._chartContainer)}},{key:"_separatorStartDrag",value:function(t){this._separatorDragStartTechnicalIndicatorHeight=this._technicalIndicatorPanes[t].height()}},{key:"_separatorDrag",value:function(t,e){var n=this._separatorDragStartTechnicalIndicatorHeight-t;n<0&&(n=0),this._technicalIndicatorPanes[e].setHeight(n),this.resize()}},{key:"_updatePane",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.InvalidateLevel.FULL;if(t===k.InvalidateLevel.FLOAT_LAYER){this._xAxisPane.invalidate(t),this._candleStickPane.invalidate(t);var e,n=W(this._technicalIndicatorPanes);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.invalidate(t)}}catch(t){n.e(t)}finally{n.f()}}else{var c=this._candleStickPane.computeAxis();if(t!==k.InvalidateLevel.GRAPHIC_MARK){var o,l=W(this._technicalIndicatorPanes);try{for(l.s();!(o=l.n()).done;){var h=o.value,d=h.computeAxis();d&&(c=d)}}catch(t){l.e(t)}finally{l.f()}}this._measureWidthAndLayoutPane(c)}}},{key:"_calcAllPaneTechnicalIndicator",value:function(){var t=this;x.default.resolve().then((function(e){var n,r=t._candleStickPane.calcTechnicalIndicator(),c=W(t._technicalIndicatorPanes);try{for(c.s();!(n=c.n()).done;){var o=n.value.calcTechnicalIndicator();o&&(r=o)}}catch(t){c.e(t)}finally{c.f()}t._measureWidthAndLayoutPane(r)}))}},{key:"_measureWidthAndLayoutPane",value:function(t){t&&this._measurePaneWidth(),this._xAxisPane.computeAxis(),this._xAxisPane.layout(),this._candleStickPane.layout();var e,n=W(this._technicalIndicatorPanes);try{for(n.s();!(e=n.n()).done;){e.value.layout()}}catch(t){n.e(t)}finally{n.f()}}},{key:"_measurePaneHeight",value:function(){var t,e=this._chartData.styleOptions(),n=this._container.offsetHeight,r=e.separator.size*this._separatorPanes.length,c=this._xAxisPane.getSelfAxisHeight(),o=n-c-r,l=0,h=W(this._technicalIndicatorPanes);try{for(h.s();!(t=h.n()).done;){var d=t.value,f=d.height();if((l+=f)>o){var _=l-o;l=o,d.setHeight(f-_)}}}catch(t){h.e(t)}finally{h.f()}var y=o-l,x={};x.candle_stick_pane_tag={contentTop:0,contentBottom:y};var v=y,m=y;this._candleStickPane.setHeight(y);for(var i=0;i<this._technicalIndicatorPanes.length;i++){var w=this._technicalIndicatorPanes[i],k=w.height();w.setHeight(k),m+=k,x[w.tag()]={contentTop:v,contentBottom:m},v=m}this._xAxisPane.setHeight(c),this._chartEvent.setPaneContentSize(x)}},{key:"_measurePaneWidth",value:function(){var t,e,n,r,c=this._chartData.styleOptions().yAxis,o=c.position===A.YAxisPosition.LEFT,l=!c.inside,h=this._container.offsetWidth;if(l){e=this._candleStickPane.getSelfAxisWidth();var d,f=W(this._technicalIndicatorPanes);try{for(f.s();!(d=f.n()).done;){var _=d.value;e=Math.max(e,_.getSelfAxisWidth())}}catch(t){f.e(t)}finally{f.f()}t=h-e,o?(n=0,r=e):(r=0,n=h-e)}else t=h,e=h,n=0,r=0;this._chartData.setTotalDataSpace(t),this._candleStickPane.setWidth(t,e),this._candleStickPane.setOffsetLeft(r,n);for(var i=0;i<this._technicalIndicatorPanes.length;i++){var y=this._technicalIndicatorPanes[i],x=this._separatorPanes[i];y.setWidth(t,e),y.setOffsetLeft(r,n),x.setSize(r,t)}this._xAxisPane.setWidth(t,e),this._xAxisPane.setOffsetLeft(r,n),this._chartEvent.setChartContentSize({contentLeft:r,contentRight:r+t})}},{key:"chartData",value:function(){return this._chartData}},{key:"resize",value:function(){this._measurePaneHeight(),this._candleStickPane.computeAxis(!0);var t,e=W(this._technicalIndicatorPanes);try{for(e.s();!(t=e.n()).done;){t.value.computeAxis(!0)}}catch(t){e.e(t)}finally{e.f()}this._measureWidthAndLayoutPane(!0)}},{key:"applyTechnicalIndicatorParams",value:function(t,e){var n=this,r=this._chartData.technicalIndicator(t);if(r&&(0,D.isArray)(e)){var c,o=W(e);try{for(o.s();!(c=o.n()).done;){var l=c.value;if(!(0,D.isNumber)(l)||l<=0||(0,v.default)(l,10)!==l)return}}catch(t){o.e(t)}finally{o.f()}r.setCalcParams((0,D.clone)(e)),x.default.resolve().then((function(e){var r=!1;n._candleStickPane.technicalIndicator().name===t&&(r=n._candleStickPane.calcTechnicalIndicator());var c,o=W(n._technicalIndicatorPanes);try{for(o.s();!(c=o.n()).done;){var l=c.value;if(l.technicalIndicator().name===t){var h=l.calcTechnicalIndicator();h&&(r=h)}}}catch(t){o.e(t)}finally{o.f()}n._measureWidthAndLayoutPane(r)}))}}},{key:"_applyDataList",value:function(t,e,n){(0,D.isArray)(t)&&((0,D.isFunction)(n)&&n(),this._chartData.addData(t,0,e),this._calcAllPaneTechnicalIndicator())}},{key:"applyNewData",value:function(t,e){var n=this;this._applyDataList(t,e,(function(){n._chartData.clearDataList()}))}},{key:"applyMoreData",value:function(t,e){this._applyDataList(t,e)}},{key:"updateData",value:function(data){if((0,D.isObject)(data)&&!(0,D.isArray)(data)){var t=this._chartData.dataList(),e=t.length,n=e;+(0,T.formatValue)(data,"timestamp",0)===+(0,T.formatValue)(t[e-1],"timestamp",0)&&(n=e-1),this._chartData.addData(data,n),this._calcAllPaneTechnicalIndicator()}}},{key:"setCandleStickChartType",value:function(t){var e=this._candleStickPane.setChartType(t);this._measureWidthAndLayoutPane(e)}},{key:"createTechnicalIndicator",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2?arguments[2]:void 0,r=this._chartData.technicalIndicator(t);if(!r)return R.DEV&&console.warn("The corresponding technical indicator type cannot be found and cannot be created!!!"),null;var c=this._technicalIndicatorPanes.length,o=!(0,D.isBoolean)(n)||n;this._separatorPanes.push(new I.default(this._chartContainer,this._chartData,c,o,{startDrag:this._separatorStartDrag.bind(this),drag:(0,E.throttle)(this._separatorDrag.bind(this),50)})),this._technicalIndicatorBaseId++;var l="".concat("technical_indicator_").concat(this._technicalIndicatorBaseId),h=new S.default({container:this._chartContainer,chartData:this._chartData,xAxis:this._xAxisPane.xAxis(),technicalIndicatorType:t,tag:l,height:e});return this._technicalIndicatorPanes.push(h),this.resize(),l}},{key:"removeTechnicalIndicator",value:function(t){for(var e=-1,i=0;i<this._technicalIndicatorPanes.length;i++){if(this._technicalIndicatorPanes[i].tag()===t){e=i;break}}if(-1!==e){this._technicalIndicatorPanes[e].destroy(),this._separatorPanes[e].destroy(),this._technicalIndicatorPanes.splice(e,1),this._separatorPanes.splice(e,1);for(var n=0;n<this._separatorPanes.length;n++)this._separatorPanes[n].updatePaneIndex(n);this.resize()}}},{key:"setTechnicalIndicatorType",value:function(t,e){if("candle_stick_pane_tag"===t){var n=this._candleStickPane.setTechnicalIndicatorType(e);this._measureWidthAndLayoutPane(n)}else{var p,r,c=W(this._technicalIndicatorPanes);try{for(c.s();!(r=c.n()).done;){var o=r.value;if(o.tag()===t){p=o;break}}}catch(t){c.e(t)}finally{c.f()}if(p)if(this._chartData.technicalIndicator(e)){var l=p.setTechnicalIndicatorType(e);this._measureWidthAndLayoutPane(l)}else this.removeTechnicalIndicator(t)}}},{key:"setTimezone",value:function(t){this._chartData.setTimezone(t),this._xAxisPane.invalidate(k.InvalidateLevel.FULL)}},{key:"getConvertPictureUrl",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"jpeg",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#333333";if("png"===n||"jpeg"===n||"bmp"===n){var canvas=document.createElement("canvas"),c=canvas.getContext("2d"),o=(0,M.getPixelRatio)(canvas),l=this._chartContainer.offsetWidth,h=this._chartContainer.offsetHeight;canvas.style.width="".concat(l,"px"),canvas.style.height="".concat(h,"px"),canvas.width=l*o,canvas.height=h*o,c.scale(o,o),c.fillStyle=r,c.fillRect(0,0,l,h);var d=0,f=this._candleStickPane.height();c.drawImage(this._candleStickPane.getImage(t,e),0,d,l,f),d+=f;for(var i=0;i<this._separatorPanes.length;i++){var _=this._separatorPanes[i],y=_.height(),x=this._technicalIndicatorPanes[i],v=x.height();c.drawImage(_.getImage(),0,d,l,y),d+=y,c.drawImage(x.getImage(t),0,d,l,v),d+=v}return c.drawImage(this._xAxisPane.getImage(t),0,d,l,this._xAxisPane.height()),canvas.toDataURL("image/".concat(n))}R.DEV&&console.warn("Picture format only supports jpeg, png and bmp!!!")}},{key:"destroy",value:function(){this._candleStickPane.destroy(),this._technicalIndicatorPanes.forEach((function(t){t.destroy()})),this._separatorPanes.forEach((function(t){t.destroy()})),this._xAxisPane.destroy(),this._container.removeChild(this._chartContainer),this._chartEvent.destroy()}}]),t}();e.default=V},918:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(605)),h=o(n(10)),d=o(n(11)),f=o(n(919)),_=o(n(16)),y=o(n(17)),x=o(n(14)),v=o(n(920)),m=o(n(921)),w=o(n(1840)),k=o(n(27)),P=o(n(924));function L(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,x.default)(t);if(e){var o=(0,x.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,y.default)(this,n)}}var A=function(t){(0,_.default)(n,t);var e=L(n);function n(t){var r;return(0,h.default)(this,n),(r=e.call(this,t))._technicalIndicator=new k.default({}),"height"in t&&r.setHeight(t.height),r.setTechnicalIndicatorType(t.technicalIndicatorType),r}return(0,d.default)(n,[{key:"_initBefore",value:function(t){this._tag=t.tag,this._yAxis=this._createYAxis(t)}},{key:"_createYAxis",value:function(t){return new P.default(t.chartData,!1,{technicalIndicator:this.technicalIndicator.bind(this),isTimeLine:this._isRealTime.bind(this)})}},{key:"_createMainWidget",value:function(t,e){return new m.default({container:t,chartData:e.chartData,xAxis:e.xAxis,yAxis:this._yAxis,additionalDataProvider:{technicalIndicator:this.technicalIndicator.bind(this),tag:this.tag.bind(this)}})}},{key:"_createYAxisWidget",value:function(t,e){return new w.default({container:t,chartData:e.chartData,yAxis:this._yAxis,additionalDataProvider:{technicalIndicator:this.technicalIndicator.bind(this),tag:this.tag.bind(this)}})}},{key:"_isRealTime",value:function(){return!1}},{key:"setHeight",value:function(t){(0,f.default)((0,x.default)(n.prototype),"setHeight",this).call(this,t),this._yAxis.setHeight(t)}},{key:"setWidth",value:function(t,e){(0,f.default)((0,x.default)(n.prototype),"setWidth",this).call(this,t,e),this._yAxis.setWidth(e)}},{key:"computeAxis",value:function(t){return this._yAxis.calcMinMaxValue(),this._yAxis.computeAxis(t)}},{key:"getSelfAxisWidth",value:function(){return this._yAxis.getSelfWidth(this._technicalIndicator)}},{key:"tag",value:function(){return this._tag}},{key:"yAxis",value:function(){return this._yAxis}},{key:"technicalIndicator",value:function(){return this._technicalIndicator}},{key:"setTechnicalIndicatorType",value:function(t){var e=this._chartData.technicalIndicator(t);return(!this._technicalIndicator||this._technicalIndicator.name!==t)&&(this._technicalIndicator=e?(0,l.default)(e):new k.default({}),this.calcTechnicalIndicator())}},{key:"calcTechnicalIndicator",value:function(){var t=this.technicalIndicator(),e=this._chartData.technicalIndicator[t.name];return e&&(t.setPrecision(e.precision),t.setCalcParams(e.calcParams)),t.result=t.calcTechnicalIndicator(this._chartData.dataList(),t.calcParams,t.plots)||[],this.computeAxis()}}]),n}(v.default);e.default=A},920:function(t,e,n){"use strict";var r=n(0),c=n(1);r(e,"__esModule",{value:!0}),e.default=void 0;var o=c(n(152)),l=c(n(10)),h=c(n(11)),d=n(47),f=function(){function t(e){(0,l.default)(this,t),this._height=-1,this._container=e.container,this._chartData=e.chartData,this._initBefore(e),this._initElement(),this._mainWidget=this._createMainWidget(this._element,e),this._yAxisWidget=this._createYAxisWidget(this._element,e)}return(0,h.default)(t,[{key:"_initBefore",value:function(t){}},{key:"_initElement",value:function(){this._element=document.createElement("div"),this._element.style.margin="0",this._element.style.padding="0",this._element.style.position="relative",this._element.style.overflow="hidden",this._element.style.width="100%";var t=this._container.lastChild;t?this._container.insertBefore(this._element,t):this._container.appendChild(this._element)}},{key:"_createMainWidget",value:function(t,e){}},{key:"_createYAxisWidget",value:function(t,e){}},{key:"computeAxis",value:function(){}},{key:"width",value:function(){return this._element.offsetWidth}},{key:"setWidth",value:function(t,e){this._mainWidget.setWidth(t),this._yAxisWidget&&this._yAxisWidget.setWidth(e)}},{key:"height",value:function(){return this._height}},{key:"setHeight",value:function(t){this._height=t,this._mainWidget.setHeight(t),this._yAxisWidget&&this._yAxisWidget.setHeight(t)}},{key:"setOffsetLeft",value:function(t,e){this._mainWidget.setOffsetLeft(t),this._yAxisWidget&&this._yAxisWidget.setOffsetLeft(e)}},{key:"layout",value:function(){this._element.offsetHeight!==this._height&&(this._element.style.height="".concat(this._height,"px")),this._mainWidget.layout(),this._yAxisWidget&&this._yAxisWidget.layout()}},{key:"invalidate",value:function(t){this._yAxisWidget&&this._yAxisWidget.invalidate(t),this._mainWidget.invalidate(t)}},{key:"getImage",value:function(t,e){var canvas=document.createElement("canvas"),n=canvas.getContext("2d"),r=(0,d.getPixelRatio)(canvas),c=this._element.offsetWidth,l=this._element.offsetHeight;canvas.style.width="".concat(c,"px"),canvas.style.height="".concat(l,"px"),canvas.width=c*r,canvas.height=l*r,n.scale(r,r);var h=this._mainWidget.getElement(),f=h.offsetWidth,_=h.offsetHeight,y=(0,o.default)(h.style.left,10);if(n.drawImage(this._mainWidget.getImage(t,e),y,0,f,_),this._yAxisWidget){var x=this._yAxisWidget.getElement(),v=x.offsetWidth,m=x.offsetHeight,w=(0,o.default)(x.style.left,10);n.drawImage(this._yAxisWidget.getImage(t),w,0,v,m)}return canvas}},{key:"destroy",value:function(){this._container.removeChild(this._element)}}]),t}();e.default=f},921:function(t,e,n){"use strict";var r=n(15),c=n(0),o=n(1);c(e,"__esModule",{value:!0}),e.default=void 0;var l=o(n(10)),h=o(n(11)),d=o(n(16)),f=o(n(17)),_=o(n(14)),y=o(n(490)),x=o(n(922)),v=o(n(923));function m(t){var e=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,c=(0,_.default)(t);if(e){var o=(0,_.default)(this).constructor;n=r(c,arguments,o)}else n=c.apply(this,arguments);return(0,f.default)(this,n)}}var w=function(t){(0,d.default)(n,t);var e=m(n);function n(){return(0,l.default)(this,n),e.apply(this,arguments)}return(0,h.default)(n,[{key:"_createMainView",value:function(t,e){return new x.default(t,e.chartData,e.xAxis,e.yAxis,e.additionalDataProvider)}},{key:"_createFloatLayerView",value:function(t,e){return new v.default(t,e.chartData,e.xAxis,e.yAxis,e.additionalDataProvider)}}]),n}(y.default);e.default=w},922:function(t,e,n){"use strict";var r=n(18),c=n(15),o=n(6),l=n(7),h=n(5),d=n(8),f=n(9),_=n(0),y=n(21),x=n(1);_(e,"__esModule",{value:!0}),e.default=void 0;var v=x(n(4)),m=x(n(10)),w=x(n(11)),k=x(n(16)),P=x(n(17)),L=x(n(14)),A=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=C(e);if(n&&n.has(t))return n.get(t);var c={},o=_&&h;for(var l in t)if("default"!==l&&Object.prototype.hasOwnProperty.call(t,l)){var desc=o?h(t,l):null;desc&&(desc.get||desc.set)?_(c,l,desc):c[l]=t[l]}c.default=t,n&&n.set(t,c);return c}(n(129)),D=n(86),T=n(47),S=n(52),I=n(128);function C(t){if("function"!=typeof y)return null;var e=new y,n=new y;return(C=function(t){return t?n:e})(t)}function M(object,t){var e=o(object);if(l){var n=l(object);t&&(n=n.filter((function(t){return h(object,t).enumerable}))),e.push.apply(e,n)}return e}function R(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?M(Object(source),!0).forEach((function(e){(0,v.default)(t,e,source[e])})):d?f(t,d(source)):M(Object(source)).forEach((function(e){_(t,e,h(source,e))}))}return t}function E(t){var e=function(){if("undefined"==typeof Reflect||!c)return!1;if(c.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(c(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,L.default)(t);if(e){var o=(0,L.default)(this).constructor;n=c(r,arguments,o)}else n=r.apply(this,arguments);return(0,P.default)(this,n)}}var O=function(t){(0,k.default)(n,t);var e=E(n);function n(t,r,c,o,l){var h;return(0,m.default)(this,n),(h=e.call(this,t,r))._xAxis=c,h._yAxis=o,h._additionalDataProvider=l,h}return(0,w.default)(n,[{key:"_draw",value:function(){this._drawGrid(),this._drawTechnicalIndicator()}},{key:"_drawGrid",value:function(){var t=this,e=this._chartData.styleOptions().grid;if(e.display){var n=e.horizontal;this._ctx.save(),n.display&&(this._ctx.strokeStyle=n.color,this._ctx.lineWidth=n.size,n.style===D.LineStyle.DASH&&this._ctx.setLineDash(n.dashValue),this._yAxis.ticks().forEach((function(e){(0,T.drawHorizontalLine)(t._ctx,e.y,0,t._width)})));var r=e.vertical;r.display&&(this._ctx.strokeStyle=r.color,this._ctx.lineWidth=r.size,r.style===D.LineStyle.DASH?this._ctx.setLineDash(r.dashValue):this._ctx.setLineDash([]),this._xAxis.ticks().forEach((function(e){(0,T.drawVerticalLine)(t._ctx,e.x,0,t._height)}))),this._ctx.restore()}}},{key:"_drawTechnicalIndicator",value:function(){var t=this,e=this._additionalDataProvider.technicalIndicator(),n=e.plots,r=[],c=this._chartData.styleOptions().technicalIndicator,o=this._chartData.dataList(),l=e.result;e.render&&(this._ctx.save(),e.render(this._ctx,{from:this._chartData.from(),to:this._chartData.to(),kLineDataList:this._chartData.dataList(),technicalIndicatorDataList:l},{width:this._width,height:this._height,dataSpace:this._chartData.dataSpace(),barSpace:this._chartData.barSpace()},this._chartData.styleOptions(),this._xAxis,this._yAxis,this._yAxis.isCandleStickYAxis()),this._ctx.restore());var h=e.baseValue;(0,S.isValid)(h)||(h=this._yAxis.min());var d=this._yAxis.convertToPixel(h),f=this._yAxis.isCandleStickYAxis();this._ctx.lineWidth=1,this._drawGraphics((function(h,i,_,y,x){var v=l[i]||{},m=0;e.shouldOhlc&&!f&&t._drawCandleStickBar(h,y,x,_,c.bar,D.CandleStickStyle.OHLC);var w={};n.forEach((function(n){var k=v[n.key],P=t._yAxis.convertToPixel(k);switch(w[n.key]=P,n.type){case A.PlotType.CIRCLE:if((0,S.isValid)(k)){var L={preData:{kLineData:o[i-1],technicalIndicatorData:l[i-1]},currentData:{kLineData:_,technicalIndicatorData:v}},circle={x:h,y:P,radius:y,color:n.color&&n.color(L,c)||c.circle.noChangeColor,isStroke:!n.isStroke||n.isStroke(L)};t._drawCircle(circle)}break;case A.PlotType.BAR:if((0,S.isValid)(k)){var D={preData:{kLineData:o[i-1],technicalIndicatorData:l[i-1]},currentData:{kLineData:_,technicalIndicatorData:v}},T=Math.abs(d-P),C={x:h-y,width:2*y,height:Math.max(1,T)};C.y=P<=d?T<1?d+1:P:d,C.color=n.color&&n.color(D,c)||c.bar.noChangeColor,C.isStroke=!!n.isStroke&&n.isStroke(D),t._drawBar(C)}break;case A.PlotType.LINE:if((0,S.isValid)(k)){var line={x:h,y:P};r[m]?r[m].push(line):r[m]=[line]}else r[m]?r[m].push(null):r[m]=[null];m++}t._drawActionExecute(I.DrawActionType.DRAW_TECHNICAL_INDICATOR,{ctx:t._ctx,kLineData:_,technicalIndicatorData:v,technicalIndicatorType:e.name,coordinate:R({x:h},w),viewport:{width:t._width,height:t._height},barSpace:x,halfBarSpace:y,isCandleStick:f})}))}),(function(){t._drawLines(r,c)}))}},{key:"_drawLines",value:function(t,e){var n=this,r=e.line.colors,c=(r||[]).length;this._ctx.lineWidth=e.line.size,(0,T.drawLine)(this._ctx,(function(){t.forEach((function(t,i){n._ctx.strokeStyle=r[i%c],n._ctx.beginPath();var e=!0;t.forEach((function(line){(0,S.isValid)(line)&&(e?(n._ctx.moveTo(line.x,line.y),e=!1):n._ctx.lineTo(line.x,line.y))})),n._ctx.stroke(),n._ctx.closePath()}))}))}},{key:"_drawBar",value:function(t){t.isStroke?(this._ctx.strokeStyle=t.color,this._ctx.strokeRect(t.x+.5,t.y,t.width-1,t.height)):(this._ctx.fillStyle=t.color,this._ctx.fillRect(t.x,t.y,t.width,t.height))}},{key:"_drawCircle",value:function(circle){this._ctx.strokeStyle=circle.color,this._ctx.fillStyle=circle.color,this._ctx.beginPath(),this._ctx.arc(circle.x,circle.y,circle.radius,2*Math.PI,0,!0),circle.isStroke?this._ctx.stroke():this._ctx.fill(),this._ctx.closePath()}},{key:"_drawGraphics",value:function(t,e){for(var n=this._chartData.dataList(),r=n.length,c=this._chartData.barSpace(),o=this._chartData.dataSpace(),l=c/2,h=this._chartData.offsetRightBarCount(),d=this._chartData.to(),i=this._chartData.from();i<d;i++){var f=r+h-i;t(this._width-(f-.5)*o+l,i,n[i],l,c)}e&&e()}},{key:"_drawCandleStickBar",value:function(t,e,n,r,c,o){var l=r.open,h=r.close,d=r.high,f=r.low;h>l?(this._ctx.strokeStyle=c.upColor,this._ctx.fillStyle=c.upColor):h<l?(this._ctx.strokeStyle=c.downColor,this._ctx.fillStyle=c.downColor):(this._ctx.strokeStyle=c.noChangeColor,this._ctx.fillStyle=c.noChangeColor);var _=this._yAxis.convertToPixel(l),y=this._yAxis.convertToPixel(h),x=this._yAxis.convertToPixel(d),v=this._yAxis.convertToPixel(f),m=Math.min(_,y),w=Math.max(_,y);this._ctx.fillRect(t-.5,x,1,m-x),this._ctx.fillRect(t-.5,w,1,v-w);var k=Math.max(1,w-m);switch(o){case D.CandleStickStyle.SOLID:this._ctx.fillRect(t-e,m,n,k);break;case D.CandleStickStyle.STROKE:this._ctx.strokeRect(t-e+.5,m,n-1,k);break;case D.CandleStickStyle.UP_STROKE:h>l?this._ctx.strokeRect(t-e+.5,m,n-1,k):this._ctx.fillRect(t-e,m,n,k);break;case D.CandleStickStyle.DOWN_STROKE:h>l?this._ctx.fillRect(t-e,m,n,k):this._ctx.strokeRect(t-e+.5,m,n-1,k);break;default:this._ctx.fillRect(t-.5,x,1,v-x),this._ctx.fillRect(t-e,_-.5,e,1),this._ctx.fillRect(t,y-.5,e,1)}this._drawActionExecute(I.DrawActionType.DRAW_CANDLE,{ctx:this._ctx,kLineData:r,coordinate:{x:t,open:_,close:y,high:x,low:v},viewport:{width:this._width,height:this._height},barSpace:n,halfBarSpace:e,isCandleStick:this._yAxis.isCandleStickYAxis()})}},{key:"_drawActionExecute",value:function(t,data){var e=this._chartData.drawActionDelegate(t);e.hasObservers()&&(this._ctx.save(),e.execute(data),this._ctx.restore())}}]),n}(A.default);e.default=O},923:function(t,e,n){"use strict";var r=n(18),c=n(15),o=n(21),l=n(0),h=n(5),d=n(1);l(e,"__esModule",{value:!0}),e.default=void 0;var f=d(n(10)),_=d(n(11)),y=d(n(16)),x=d(n(17)),v=d(n(14)),m=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=A(e);if(n&&n.has(t))return n.get(t);var c={},o=l&&h;for(var d in t)if("default"!==d&&Object.prototype.hasOwnProperty.call(t,d)){var desc=o?h(t,d):null;desc&&(desc.get||desc.set)?l(c,d,desc):c[d]=t[d]}c.default=t,n&&n.set(t,c);return c}(n(129)),w=n(86),k=n(52),P=n(47),L=n(489);function A(t){if("function"!=typeof o)return null;var e=new o,n=new o;return(A=function(t){return t?n:e})(t)}function D(t){var e=function(){if("undefined"==typeof Reflect||!c)return!1;if(c.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(c(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,v.default)(t);if(e){var o=(0,v.default)(this).constructor;n=c(r,arguments,o)}else n=r.apply(this,arguments);return(0,x.default)(this,n)}}var T=function(t){(0,y.default)(n,t);var e=D(n);function n(t,r,c,o,l){var h;return(0,f.default)(this,n),(h=e.call(this,t,r))._xAxis=c,h._yAxis=o,h._additionalDataProvider=l,h}return(0,_.default)(n,[{key:"_draw",value:function(){var t,e=this._chartData.crossHair(),n=this._chartData.dataList(),r=this._additionalDataProvider.technicalIndicator(),c=r.result,o=t=(0,k.isValid)(e.x)?this._xAxis.convertFromPixel(e.x):n.length-1;o<0?o=0:o>n.length-1&&(o=n.length-1);var l=n[o],h=c[o];if(l){var d=this._xAxis.convertToPixel(t);this._drawCrossHairHorizontalLine(e),this._drawCrossHairVerticalLine(e,d);var f=this._chartData.styleOptions().floatLayer.prompt.displayRule;(f===w.FloatLayerPromptDisplayRule.ALWAYS||f===w.FloatLayerPromptDisplayRule.FOLLOW_CROSS&&e.paneTag)&&this._drawPrompt(l,h,t,d,r,t>=0&&t<=n.length-1&&e.paneTag,n.length)}}},{key:"_drawPrompt",value:function(t,e,n,r,c){this._drawTechnicalIndicatorPromptText(e,n,c)}},{key:"_drawCrossHairHorizontalLine",value:function(t){if(t.paneTag===this._additionalDataProvider.tag()){var e=this._chartData.styleOptions().floatLayer.crossHair,n=e.horizontal,r=n.line;e.display&&n.display&&r.display&&(this._ctx.save(),this._ctx.lineWidth=r.size,this._ctx.strokeStyle=r.color,r.style===w.LineStyle.DASH&&this._ctx.setLineDash(r.dashValue),(0,P.drawHorizontalLine)(this._ctx,t.y,0,this._width),this._ctx.restore())}}},{key:"_drawCrossHairVerticalLine",value:function(t,e){if(t.paneTag){var n=this._chartData.styleOptions().floatLayer.crossHair,r=n.vertical,c=r.line;n.display&&r.display&&c.display&&(this._ctx.save(),this._ctx.lineWidth=c.size,this._ctx.strokeStyle=c.color,c.style===w.LineStyle.DASH&&this._ctx.setLineDash(c.dashValue),(0,P.drawVerticalLine)(this._ctx,e,0,this._height),this._ctx.restore())}}},{key:"_drawTechnicalIndicatorPromptText",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=this._chartData.styleOptions().technicalIndicator,data=(0,L.getTechnicalIndicatorInfo)(t,n,this._yAxis),o=c.line.colors,l=this._chartData.dataList(),h={preData:{kLineData:l[e-1],technicalIndicatorData:n.result[e-1]},currentData:{kLineData:l[e],technicalIndicatorData:n.result[e]}},d=n.plots,f=this._chartData.styleOptions().floatLayer.prompt.technicalIndicator.text,_=data.name,y=data.labels,x=data.values,v=f.marginLeft,w=f.marginRight,k=v,A=f.marginTop+r,D=f.size,T=f.color,S=o.length;this._ctx.textBaseline="top",this._ctx.font=(0,P.getFont)(D,f.weight,f.family);var I=(0,P.calcTextWidth)(this._ctx,_);this._ctx.fillStyle=T,this._ctx.fillText(_,k,A),k+=v+I;for(var C=0,i=0;i<y.length;i++){switch(d[i].type){case m.PlotType.CIRCLE:this._ctx.fillStyle=d[i].color&&d[i].color(h,c)||c.circle.noChangeColor;break;case m.PlotType.BAR:this._ctx.fillStyle=d[i].color&&d[i].color(h,c)||c.bar.noChangeColor;break;case m.PlotType.LINE:this._ctx.fillStyle=o[C%S]||T,C++}var text="".concat(y[i],": ").concat(x[i].value||"n/a"),M=(0,P.calcTextWidth)(this._ctx,text);this._ctx.fillText(text,k,A),k+=v+w+M}}}]),n}(m.default);e.default=T},926:function(t,e,n){"use strict";function r(t,e,n){var r=[];if(t&&e&&n.length>0){var c=t.x-e.x;if(0===c)n.forEach((function(t){r.push(t.y)}));else{var o=(t.y-e.y)/c,b=t.y-o*t.x;n.forEach((function(t){r.push(t.x*o+b)}))}}return r}function c(t,e,n){return!!(n&&t&&e)&&(t.x===e.x?Math.abs(n.x-t.x)<1:t.y===e.y?Math.abs(n.y-t.y)<1:Math.abs(n.y-r(t,e,[n])[0])<1)}n(0)(e,"__esModule",{value:!0}),e.getLinearY=r,e.checkPointOnStraightLine=c,e.checkPointOnRayLine=function(t,e,n){if(!n||!t||!e)return!1;if(c(t,e,n))return t.x===e.x?t.y<e.y?n.y>t.y-2:n.y<t.y+2:t.x<e.x?n.x>t.x-2:n.x<t.x+2;return!1},e.checkPointOnSegmentLine=function(t,e,n){if(!n||!t||!e)return!1;if(c(t,e,n)){var a=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)),b=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return Math.abs(a+b-r)<2}return!1},e.checkPointOnCircle=function(t,e,n){if(!n)return!1;var r=n.x-t.x,c=n.y-t.y;return!(r*r+c*c>e*e)},e.getParallelLines=function(t,e,n){var r=[];if(t.length>1)if(t[0].x===t[1].x){var c=e.height;if(r.push([{x:t[0].x,y:0},{x:t[0].x,y:c}]),t.length>2&&(r.push([{x:t[2].x,y:0},{x:t[2].x,y:c}]),n)){var o=t[0].x-t[2].x;r.push([{x:t[0].x+o,y:0},{x:t[0].x+o,y:c}])}}else{var l=e.width;if(t[0].y===t[1].y){if(r.push([{x:0,y:t[0].y},{x:l,y:t[0].y}]),t.length>2&&(r.push([{x:0,y:t[2].y},{x:l,y:t[2].y}]),n)){var h=t[0].y-t[2].y;r.push([{x:0,y:t[0].y+h},{x:l,y:t[0].y+h}])}}else{var d=(t[0].y-t[1].y)/(t[0].x-t[1].x),b=t[0].y-d*t[0].x;if(r.push([{x:0,y:0*d+b},{x:l,y:l*d+b}]),t.length>2){var f=t[2].y-d*t[2].x;if(r.push([{x:0,y:0*d+f},{x:l,y:l*d+f}]),n){var _=b+(b-f);r.push([{x:0,y:0*d+_},{x:l,y:l*d+_}])}}}}return r},e.getFibonacciLines=function(t,e){var n=[];if(t.length>0){var r=e.width;if(n.push([{x:0,y:t[0].y},{x:r,y:t[0].y}]),t.length>1){var c=t[0].y-t[1].y;n.push([{x:0,y:t[1].y+.786*c},{x:r,y:t[1].y+.786*c}]),n.push([{x:0,y:t[1].y+.618*c},{x:r,y:t[1].y+.618*c}]),n.push([{x:0,y:t[1].y+.5*c},{x:r,y:t[1].y+.5*c}]),n.push([{x:0,y:t[1].y+.382*c},{x:r,y:t[1].y+.382*c}]),n.push([{x:0,y:t[1].y+.236*c},{x:r,y:t[1].y+.236*c}]),n.push([{x:0,y:t[1].y},{x:r,y:t[1].y}])}}return n}}}]);
//# sourceMappingURL=32b5a2bf749eeadf820f.js.map