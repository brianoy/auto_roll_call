(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1810:function(e,t,n){"use strict";var o=n(0),r=n(1);o(t,"__esModule",{value:!0}),t.version=function(){return"__BUILD_VERSION__"},t.init=function(e){var style=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="Chart version is __BUILD_VERSION__. Root dom is null, can not initialize the chart!!!",n=e;if(!n)return h.DEV&&console.warn(t),null;"string"==typeof n&&(n=document.getElementById(e)||document.getElementsByClassName(e));if(!n)return h.DEV&&console.warn(t),null;var o=l[n.chartId||""];if(o)return h.DEV&&console.warn("The chart has been initialized on the dom！！！"),o;var r="".concat("k_line_chart_").concat(_++),v=new c.default(n,style);return v.id=r,n.chartId=r,l[r]=v,v},t.dispose=function(e){if(e){var t;"string"==typeof e&&(e=document.getElementById(e)||document.getElementsByClassName(e),t=e.chartId),t||(t=e.chartId),!t&&e instanceof c.default&&(t=e.id),t&&(l[t].destroy(),delete l[t])}};var c=r(n(1811)),h=n(176),l={},_=1},1854:function(e,t,n){"use strict";var o=n(0),r=n(1);o(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(10)),h=r(n(11)),l=r(n(492)),_=r(n(1855)),v=r(n(927)),d=n(128),E=r(n(1856)),k=function(){function e(t,n,o,r){(0,c.default)(this,e),this._target=t,this._chartData=n,this._chartContentSize={},this._event=new l.default(this._target,{pinchStartEvent:this._pinchStartEvent.bind(this),pinchEvent:this._pinchEvent.bind(this),mouseUpEvent:this._mouseUpEvent.bind(this),mouseClickEvent:this._mouseClickEvent.bind(this),mouseDownEvent:this._mouseDownEvent.bind(this),mouseRightDownEvent:this._mouseRightDownEvent.bind(this),mouseLeaveEvent:this._mouseLeaveEvent.bind(this),mouseMoveEvent:this._mouseMoveEvent.bind(this),mouseWheelEvent:this._mouseWheelEvent.bind(this),pressedMouseMoveEvent:this._pressedMouseMoveEvent.bind(this),longTapEvent:this._longTapEvent.bind(this)},{treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!1}),this._boundKeyBoardDownEvent=this._keyBoardDownEvent.bind(this),this._target.addEventListener("keydown",this._boundKeyBoardDownEvent),this._boundContextMenuEvent=function(e){e.preventDefault()},this._target.addEventListener("contextmenu",this._boundContextMenuEvent,!1),this._zoomScrollEventHandler=new _.default(n),this._graphicMarkEventHandler=new v.default(n,o,r),this._keyBoardEventHandler=new E.default(n)}return(0,h.default)(e,[{key:"_keyBoardDownEvent",value:function(e){this._keyBoardEventHandler.keyBoardDownEvent(e)}},{key:"_pinchStartEvent",value:function(){this._zoomScrollEventHandler.pinchStartEvent()}},{key:"_pinchEvent",value:function(e,t){this._zoomScrollEventHandler.pinchEvent(e,t)}},{key:"_mouseUpEvent",value:function(e){this._target.style.cursor="crosshair",e.localX-=this._chartContentSize.contentLeft,this._graphicMarkEventHandler.mouseUpEvent(e)}},{key:"_mouseLeaveEvent",value:function(e){this._checkZoomScroll()&&(e.localX-=this._chartContentSize.contentLeft,this._zoomScrollEventHandler.mouseLeaveEvent(e))}},{key:"_mouseMoveEvent",value:function(e){e.localX-=this._chartContentSize.contentLeft,this._chartData.shouldInvalidateGraphicMark()&&this._graphicMarkEventHandler.mouseMoveEvent(e),this._checkZoomScroll()&&this._zoomScrollEventHandler.mouseMoveEvent(e)}},{key:"_mouseWheelEvent",value:function(e){this._checkZoomScroll()&&this._zoomScrollEventHandler.mouseWheelEvent(e)}},{key:"_mouseClickEvent",value:function(e){this._checkZoomScroll()&&(e.localX-=this._chartContentSize.contentLeft,this._zoomScrollEventHandler.mouseClickEvent(e))}},{key:"_mouseDownEvent",value:function(e){this._target.style.cursor="pointer",e.localX-=this._chartContentSize.contentLeft,this._graphicMarkEventHandler.mouseDownEvent(e),this._checkZoomScroll()&&this._zoomScrollEventHandler.mouseDownEvent(e)}},{key:"_mouseRightDownEvent",value:function(e){e.localX-=this._chartContentSize.contentLeft,this._graphicMarkEventHandler.mouseRightDownEvent(e)}},{key:"_pressedMouseMoveEvent",value:function(e){e.localX-=this._chartContentSize.contentLeft,this._chartData.dragGraphicMarkFlag()&&(this._graphicMarkEventHandler.pressedMouseMoveEvent(e),this._chartData.crossHair().paneTag&&this._chartData.setCrossHairPointPaneTag(null,null)),this._checkZoomScroll()&&this._zoomScrollEventHandler.pressedMouseMoveEvent(e)}},{key:"_longTapEvent",value:function(e){this._checkZoomScroll()&&(e.localX-=this._chartContentSize.contentLeft,this._zoomScrollEventHandler.longTapEvent(e))}},{key:"_checkZoomScroll",value:function(){return!this._chartData.dragGraphicMarkFlag()&&this._chartData.graphicMarkType()===d.GraphicMarkType.NONE}},{key:"setChartContentSize",value:function(e){this._chartContentSize=e,this._zoomScrollEventHandler.setChartContentSize(e),this._graphicMarkEventHandler.setChartContentSize(e)}},{key:"setPaneContentSize",value:function(e){this._zoomScrollEventHandler.setPaneContentSize(e),this._graphicMarkEventHandler.setPaneContentSize(e)}},{key:"destroy",value:function(){this._event.destroy(),this._target.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._target.removeEventListener("contextmenu",this._boundContextMenuEvent)}}]),e}();t.default=k},1855:function(e,t,n){"use strict";var o=n(18),r=n(15),c=n(21),h=n(0),l=n(5),_=n(1);h(t,"__esModule",{value:!0}),t.default=void 0;var v=_(n(10)),d=_(n(11)),E=_(n(16)),k=_(n(17)),f=_(n(14)),M=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var r={},c=h&&l;for(var _ in e)if("default"!==_&&Object.prototype.hasOwnProperty.call(e,_)){var desc=c?l(e,_):null;desc&&(desc.get||desc.set)?h(r,_,desc):r[_]=e[_]}r.default=e,n&&n.set(e,r);return r}(n(491));function T(e){if("function"!=typeof c)return null;var t=new c,n=new c;return(T=function(e){return e?n:t})(e)}function m(e){var t=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,f.default)(e);if(t){var c=(0,f.default)(this).constructor;n=r(o,arguments,c)}else n=o.apply(this,arguments);return(0,k.default)(this,n)}}var y=function(e){(0,E.default)(n,e);var t=m(n);function n(e){var o;return(0,v.default)(this,n),(o=t.call(this,e))._startScrollPoint={},o._touchPoint={},o._touchCancelCrossHair=!1,o._touchZoomed=!1,o._pinchScale=1,o}return(0,d.default)(n,[{key:"pinchStartEvent",value:function(){this._pinchScale=1,this._touchZoomed=!0}},{key:"pinchEvent",value:function(e,t){var n=5*(t-this._pinchScale);this._pinchScale=t,this._chartData.zoom(n,e)}},{key:"mouseLeaveEvent",value:function(e){(0,M.isMouse)(e)&&this._chartData.setCrossHairPointPaneTag(null,null)}},{key:"mouseMoveEvent",value:function(e){var t=this;(0,M.isMouse)(e)&&this._performCross(e,!1,(function(n){t._chartData.setCrossHairPointPaneTag({x:e.localX,y:n.y},n.tag)}),(function(){t._chartData.setCrossHairPointPaneTag(null,null)}))}},{key:"mouseWheelEvent",value:function(e){if(this._checkEventPointX(e.localX)){var t=-e.deltaY/100;if(0!==t){switch(e.cancelable&&e.preventDefault(),e.deltaMode){case e.DOM_DELTA_PAGE:t*=120;break;case e.DOM_DELTA_LINE:t*=32}if(0!==t){var n=Math.sign(t)*Math.min(1,Math.abs(t));this._chartData.zoom(n,{x:e.localX,y:e.localY})}}}}},{key:"mouseClickEvent",value:function(e){var t=this;this._performCross(e,!0,(function(n){t._touchPoint||t._touchCancelCrossHair||t._touchZoomed||(t._touchPoint={x:e.localX,y:e.localY},t._chartData.setCrossHairPointPaneTag({x:e.localX,y:n.y},n.tag))}))}},{key:"mouseDownEvent",value:function(e){var t=this;this._startScrollPoint={x:e.localX,y:e.localY},this._chartData.startScroll(),this._performCross(e,!0,(function(n){var o={x:e.localX,y:n.y};if(t._touchZoomed=!1,t._touchPoint){var r=e.localX-t._touchPoint.x,c=e.localY-t._touchPoint.y;Math.sqrt(r*r+c*c)<10?(t._touchPoint={x:e.localX,y:e.localY},t._chartData.setCrossHairPointPaneTag(o,n.tag)):(t._touchCancelCrossHair=!0,t._touchPoint=null,t._chartData.setCrossHairPointPaneTag(null,null))}else t._touchCancelCrossHair=!1}))}},{key:"pressedMouseMoveEvent",value:function(e){var t=this;this._performCross(e,!1,(function(n){var o={x:e.localX,y:n.y};if((0,M.isTouch)(e)&&t._touchPoint)return t._touchPoint={x:e.localX,y:e.localY},void t._chartData.setCrossHairPointPaneTag(o,n.tag);var r=e.localX-t._startScrollPoint.x;t._chartData.setCrossHairPointPaneTag(o,n.tag),t._chartData.scroll(r)}))}},{key:"longTapEvent",value:function(e){var t=this;this._performCross(e,!0,(function(n){t._touchPoint={x:e.localX,y:e.localY},t._chartData.setCrossHairPointPaneTag({x:e.localX,y:n.y},n.tag)}))}},{key:"_performCross",value:function(e,t,n,o){if(!t||(0,M.isTouch)(e))if(this._checkEventPointX(e.localX)){var r=!1;for(var c in this._paneContentSize){var h=this._paneContentSize[c];if(e.localY>h.contentTop&&e.localY<h.contentBottom){r=!0,n&&n({tag:c,y:e.localY-h.contentTop});break}}!r&&o&&o()}else o&&o()}}]),n}(M.default);t.default=y},1856:function(e,t,n){"use strict";var o=n(15),r=n(0),c=n(1);r(t,"__esModule",{value:!0}),t.default=void 0;var h=c(n(10)),l=c(n(11)),_=c(n(16)),v=c(n(17)),d=c(n(14)),E=c(n(491));function k(e){var t=function(){if("undefined"==typeof Reflect||!o)return!1;if(o.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var c=(0,d.default)(this).constructor;n=o(r,arguments,c)}else n=r.apply(this,arguments);return(0,v.default)(this,n)}}var f="ArrowUp",M="ArrowDown",T="ArrowLeft",m="ArrowRight",y=function(e){(0,_.default)(n,e);var t=k(n);function n(){return(0,h.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"keyBoardDownEvent",value:function(e){if(e.shiftKey)switch(e.code){case f:this._chartData.zoom(-.5);break;case M:this._chartData.zoom(.5);break;case T:this._chartData.startScroll(),this._chartData.scroll(-this._chartData.dataSpace());break;case m:this._chartData.startScroll(),this._chartData.scroll(this._chartData.dataSpace())}}}]),n}(E.default);t.default=y},491:function(e,t,n){"use strict";var o=n(0),r=n(1);o(t,"__esModule",{value:!0}),t.isTouch=function(e){return e.type===l.EventType.TOUCH},t.isMouse=function(e){return e.type===l.EventType.MOUSE},t.default=void 0;var c=r(n(10)),h=r(n(11)),l=n(492);var _=function(){function e(t){(0,c.default)(this,e),this._chartData=t,this._chartContentSize={},this._paneContentSize={}}return(0,h.default)(e,[{key:"_checkEventPointX",value:function(e){return e>0&&e<this._chartContentSize.contentRight-this._chartContentSize.contentLeft}},{key:"setChartContentSize",value:function(e){this._chartContentSize=e}},{key:"setPaneContentSize",value:function(e){this._paneContentSize=e}}]),e}();t.default=_},492:function(e,t,n){"use strict";var o=n(0),r=n(1);o(t,"__esModule",{value:!0}),t.default=t.EventType=void 0;var c=r(n(10)),h=r(n(11)),l=0,_=2;function v(element){return element.getBoundingClientRect()||{left:0,top:0}}function d(e){return Boolean(e.touches)}function E(e){e.cancelable&&e.preventDefault()}var k=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||"ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch),f="onorientationchange"in window&&k;function M(e,t){var n=e.clientX-t.clientX,o=e.clientY-t.clientY;return Math.sqrt(n*n+o*o)}var T={MOUSE:"mouse",TOUCH:"touch"};t.EventType=T;var m=function(){function e(t,n,o){(0,c.default)(this,e),this._target=t,this._handler=n,this._options=o,this._clickCount=0,this._clickTimeoutId=null,this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartPosition=null,this._moveExceededManhattanDistance=!1,this._cancelClick=!1,this._unsubscribeOutsideEvents=null,this._unsubscribeMousemove=null,this._unsubscribeRoot=null,this._startPinchMiddlePoint=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventDragProcess=!1,this._mousePressed=!1,this._init()}return(0,h.default)(e,[{key:"destroy",value:function(){null!==this._unsubscribeOutsideEvents&&(this._unsubscribeOutsideEvents(),this._unsubscribeOutsideEvents=null),null!==this._unsubscribeMousemove&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),null!==this._unsubscribeRoot&&(this._unsubscribeRoot(),this._unsubscribeRoot=null),this._clearLongTapTimeout(),this._resetClickTimeout()}},{key:"_mouseEnterHandler",value:function(e){var t=this;this._unsubscribeMousemove&&this._unsubscribeMousemove();var n=this._mouseMoveHandler.bind(this),o=this._mouseWheelHandler.bind(this);this._unsubscribeMousemove=function(){t._target.removeEventListener("mousemove",n),t._target.removeEventListener("wheel",o)},this._target.addEventListener("mousemove",n),this._target.addEventListener("wheel",o,{passive:!1}),d(e)&&this._mouseMoveHandler(e);var r=this._makeCompatEvent(e);this._processEvent(r,this._handler.mouseEnterEvent)}},{key:"_resetClickTimeout",value:function(){null!==this._clickTimeoutId&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null}},{key:"_mouseMoveHandler",value:function(e){if(!this._mousePressed||d(e)){var t=this._makeCompatEvent(e);this._processEvent(t,this._handler.mouseMoveEvent)}}},{key:"_mouseWheelHandler",value:function(e){var t=this._makeCompatEvent(e);e.localX=t.localX,e.localY=t.localY,this._processEvent(e,this._handler.mouseWheelEvent)}},{key:"_mouseMoveWithDownHandler",value:function(e){if((!("button"in e)||e.button===l)&&null===this._startPinchMiddlePoint){var t=d(e);if(!this._preventDragProcess||!t){this._pinchPrevented=!0;var n=this._makeCompatEvent(e),o=this._mouseMoveStartPosition,r=Math.abs(o.x-n.pageX),c=Math.abs(o.y-n.pageY),h=r+c>5;if(h||!t){if(h&&!this._moveExceededManhattanDistance&&t){var _=.5*r,v=c>=_&&!this._options.treatVertTouchDragAsPageScroll,k=_>c&&!this._options.treatHorzTouchDragAsPageScroll;v||k||(this._preventDragProcess=!0)}h&&(this._moveExceededManhattanDistance=!0,this._cancelClick=!0,t&&this._clearLongTapTimeout()),this._preventDragProcess||(this._processEvent(n,this._handler.pressedMouseMoveEvent),t&&E(e))}}}}},{key:"_mouseUpHandler",value:function(e){if(!("button"in e)||e.button===l){var t=this._makeCompatEvent(e);this._clearLongTapTimeout(),this._mouseMoveStartPosition=null,this._mousePressed=!1,this._unsubscribeRoot&&(this._unsubscribeRoot(),this._unsubscribeRoot=null),d(e)&&this._mouseLeaveHandler(e),this._processEvent(t,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId&&this._clickCount>1?(this._processEvent(t,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(t,this._handler.mouseClickEvent),d(e)&&(E(e),this._mouseLeaveHandler(e),0===e.touches.length&&(this._longTapActive=!1))}}},{key:"_clearLongTapTimeout",value:function(){null!==this._longTapTimeoutId&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)}},{key:"_mouseDownHandler",value:function(e){if(!("button"in e)||e.button===l||e.button===_){var t=this._makeCompatEvent(e);if("button"in e&&e.button===_)this._processEvent(t,this._handler.mouseRightDownEvent);else{this._cancelClick=!1,this._moveExceededManhattanDistance=!1,this._preventDragProcess=!1,d(e)&&this._mouseEnterHandler(e),this._mouseMoveStartPosition={x:t.pageX,y:t.pageY},this._unsubscribeRoot&&(this._unsubscribeRoot(),this._unsubscribeRoot=null);var n=this._mouseMoveWithDownHandler.bind(this),o=this._mouseUpHandler.bind(this),r=this._target.ownerDocument.documentElement;this._unsubscribeRoot=function(){r.removeEventListener("touchmove",n),r.removeEventListener("touchend",o),r.removeEventListener("mousemove",n),r.removeEventListener("mouseup",o)},r.addEventListener("touchmove",n,{passive:!1}),r.addEventListener("touchend",o,{passive:!1}),this._clearLongTapTimeout(),d(e)&&1===e.touches.length?this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),600):(r.addEventListener("mousemove",n),r.addEventListener("mouseup",o)),this._mousePressed=!0,this._processEvent(t,this._handler.mouseDownEvent),this._clickTimeoutId||(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500))}}}},{key:"_init",value:function(){var e=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));var t=this._target.ownerDocument,n=function(t){e._handler.mouseDownOutsideEvent&&(t.target&&e._target.contains(t.target)||e._handler.mouseDownOutsideEvent())};this._unsubscribeOutsideEvents=function(){t.removeEventListener("mousedown",n),t.removeEventListener("touchstart",n)},t.addEventListener("mousedown",n),t.addEventListener("touchstart",n,{passive:!0}),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._mouseDownHandler.bind(this),{passive:!0}),f||this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",(function(){}),{passive:!1})}},{key:"_initPinch",value:function(){var e=this;void 0===this._handler.pinchStartEvent&&void 0===this._handler.pinchEvent&&void 0===this._handler.pinchEndEvent||(this._target.addEventListener("touchstart",(function(t){return e._checkPinchState(t.touches)}),{passive:!0}),this._target.addEventListener("touchmove",(function(t){if(2===t.touches.length&&null!==e._startPinchMiddlePoint&&void 0!==e._handler.pinchEvent){var n=M(t.touches[0],t.touches[1])/e._startPinchDistance;e._handler.pinchEvent(e._startPinchMiddlePoint,n),E(t)}}),{passive:!1}),this._target.addEventListener("touchend",(function(t){e._checkPinchState(t.touches)})))}},{key:"_checkPinchState",value:function(e){1===e.length&&(this._pinchPrevented=!1),2!==e.length||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)}},{key:"_startPinch",value:function(e){var t=v(this._target);this._startPinchMiddlePoint={x:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,y:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this._startPinchDistance=M(e[0],e[1]),void 0!==this._handler.pinchStartEvent&&this._handler.pinchStartEvent(),this._clearLongTapTimeout()}},{key:"_stopPinch",value:function(){null!==this._startPinchMiddlePoint&&(this._startPinchMiddlePoint=null,void 0!==this._handler.pinchEndEvent&&this._handler.pinchEndEvent())}},{key:"_mouseLeaveHandler",value:function(e){this._unsubscribeMousemove&&this._unsubscribeMousemove();var t=this._makeCompatEvent(e);this._processEvent(t,this._handler.mouseLeaveEvent)}},{key:"_longTapHandler",value:function(e){var t=this._makeCompatEvent(e);this._processEvent(t,this._handler.longTapEvent),this._cancelClick=!0,this._longTapActive=!0}},{key:"_processEvent",value:function(e,t){t&&t.call(this._handler,e)}},{key:"_makeCompatEvent",value:function(e){var t;t="touches"in e&&e.touches.length?e.touches[0]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0]:e;var n=v(this._target);return{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY,localX:t.clientX-n.left,localY:t.clientY-n.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type.startsWith("mouse")?T.MOUSE:T.TOUCH,target:t.target,view:e.view}}}]),e}();t.default=m},927:function(e,t,n){"use strict";var o=n(15),r=n(0),c=n(1);r(t,"__esModule",{value:!0}),t.default=t.GraphicMarkDrawStep=void 0;var h=c(n(6)),l=c(n(18)),_=c(n(10)),v=c(n(11)),d=c(n(16)),E=c(n(17)),k=c(n(14)),f=n(926),M=n(52),T=n(916),m=n(128),y=c(n(491));function P(e){var t=function(){if("undefined"==typeof Reflect||!o)return!1;if(o.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,k.default)(e);if(t){var c=(0,k.default)(this).constructor;n=o(r,arguments,c)}else n=r.apply(this,arguments);return(0,E.default)(this,n)}}var D={STEP_1:"step_1",STEP_2:"step_2",STEP_3:"step_3",STEP_DONE:"step_done"};t.GraphicMarkDrawStep=D;var L=function(e){(0,d.default)(n,e);var t=P(n);function n(e,o,r){var c;return(0,_.default)(this,n),(c=t.call(this,e))._xAxis=o,c._yAxis=r,c._noneGraphicMarkMouseDownFlag=!1,c._noneGraphicMarkMouseDownActiveData={markKey:null,dataIndex:-1,onLine:!1,onCircle:!1,pointIndex:-1},c}return(0,v.default)(n,[{key:"mouseUpEvent",value:function(e){this._chartData.setDragGraphicMarkFlag(!1),this._noneGraphicMarkMouseDownFlag=!1,this._noneGraphicMarkMouseDownActiveData={markKey:null,dataIndex:-1,onLine:!1,onCircle:!1,pointIndex:-1}}},{key:"mouseDownEvent",value:function(e){if(this._checkEventPointX(e.localX)&&this._checkEventPointY(e.localY)){var t={x:e.localX,y:e.localY};this._chartData.setGraphicMarkPoint(t);var n=this._chartData.graphicMarkType();switch(n){case m.GraphicMarkType.HORIZONTAL_STRAIGHT_LINE:case m.GraphicMarkType.VERTICAL_STRAIGHT_LINE:case m.GraphicMarkType.STRAIGHT_LINE:case m.GraphicMarkType.HORIZONTAL_RAY_LINE:case m.GraphicMarkType.VERTICAL_RAY_LINE:case m.GraphicMarkType.RAY_LINE:case m.GraphicMarkType.HORIZONTAL_SEGMENT_LINE:case m.GraphicMarkType.VERTICAL_SEGMENT_LINE:case m.GraphicMarkType.SEGMENT_LINE:case m.GraphicMarkType.PRICE_LINE:case m.GraphicMarkType.FIBONACCI_LINE:this._twoStepGraphicMarkMouseDown(e,n);break;case m.GraphicMarkType.PRICE_CHANNEL_LINE:case m.GraphicMarkType.PARALLEL_STRAIGHT_LINE:this._threeStepGraphicMarkMouseDown(e,n);break;case m.GraphicMarkType.NONE:this._noneGraphicMarkMouseLeftDown(e)}}}},{key:"mouseRightDownEvent",value:function(e){if(this._chartData.graphicMarkType()===m.GraphicMarkType.NONE){this._findNoneGraphicMarkMouseDownActiveData(e);var t=this._noneGraphicMarkMouseDownActiveData.markKey,n=this._noneGraphicMarkMouseDownActiveData.dataIndex;if(t&&-1!==n){var o=this._chartData.graphicMarkData(),r=o[t];r.splice(n,1),o[t]=r,this._chartData.setGraphicMarkData(o),this.mouseUpEvent(e)}}}},{key:"_twoStepGraphicMarkMouseDown",value:function(e,t){var n=this;this._graphicMarkMouseDown(e,t,(function(e){switch(e.drawStep){case D.STEP_1:e.drawStep=D.STEP_2;break;case D.STEP_2:e.drawStep=D.STEP_DONE,n._chartData.setGraphicMarkType(m.GraphicMarkType.NONE)}}))}},{key:"_threeStepGraphicMarkMouseDown",value:function(e,t){var n=this;this._graphicMarkMouseDown(e,t,(function(e){switch(e.drawStep){case D.STEP_1:e.drawStep=D.STEP_2;break;case D.STEP_2:e.drawStep=D.STEP_3;break;case D.STEP_3:e.drawStep=D.STEP_DONE,n._chartData.setGraphicMarkType(m.GraphicMarkType.NONE)}}))}},{key:"_graphicMarkMouseDown",value:function(e,t,n){var o=this._chartData.graphicMarkData(),r=o[t];if(2===e.button)r.splice(r.length-1,1),this._chartData.setGraphicMarkType(m.GraphicMarkType.NONE);else{var c=r[r.length-1];n(c),r[r.length-1]=c}o[t]=r,this._chartData.setGraphicMarkData(o)}},{key:"_noneGraphicMarkMouseLeftDown",value:function(e){this._findNoneGraphicMarkMouseDownActiveData(e);var t=this._noneGraphicMarkMouseDownActiveData.markKey,n=this._noneGraphicMarkMouseDownActiveData.dataIndex;t&&-1!==n&&this._noneGraphicMarkMouseDownActiveData.onCircle&&(this._noneGraphicMarkMouseDownFlag=!0,this._chartData.setDragGraphicMarkFlag(!0))}},{key:"_findNoneGraphicMarkMouseDownActiveData",value:function(e){for(var t=this,n={x:e.localX,y:e.localY},o=(0,h.default)(this._chartData.graphicMarkData()),r=function(i){var e=o[i];switch(e){case m.GraphicMarkType.HORIZONTAL_STRAIGHT_LINE:case m.GraphicMarkType.PRICE_LINE:if(t._realFindNoneGraphicMarkMouseDownActiveData(e,n,(function(e){return(0,f.checkPointOnStraightLine)(e[0],{x:t._chartContentSize.contentRight,y:e[0].y},n)})))return{v:void 0};break;case m.GraphicMarkType.VERTICAL_STRAIGHT_LINE:if(t._realFindNoneGraphicMarkMouseDownActiveData(e,n,(function(e){return(0,f.checkPointOnStraightLine)(e[0],{x:e[0].x,y:t._paneContentSize[T.CANDLE_STICK_PANE_TAG].contentBottom},n)})))return{v:void 0};break;case m.GraphicMarkType.STRAIGHT_LINE:if(t._realFindNoneGraphicMarkMouseDownActiveData(e,n,(function(e){return(0,f.checkPointOnStraightLine)(e[0],e[1],n)})))return{v:void 0};break;case m.GraphicMarkType.HORIZONTAL_RAY_LINE:case m.GraphicMarkType.VERTICAL_RAY_LINE:case m.GraphicMarkType.RAY_LINE:if(t._realFindNoneGraphicMarkMouseDownActiveData(e,n,(function(e){return(0,f.checkPointOnRayLine)(e[0],e[1],n)})))return{v:void 0};break;case m.GraphicMarkType.HORIZONTAL_SEGMENT_LINE:case m.GraphicMarkType.VERTICAL_SEGMENT_LINE:case m.GraphicMarkType.SEGMENT_LINE:if(t._realFindNoneGraphicMarkMouseDownActiveData(e,n,(function(e){return(0,f.checkPointOnSegmentLine)(e[0],e[1],n)})))return{v:void 0};break;case m.GraphicMarkType.PRICE_CHANNEL_LINE:case m.GraphicMarkType.PARALLEL_STRAIGHT_LINE:case m.GraphicMarkType.FIBONACCI_LINE:if(t._realFindNoneGraphicMarkMouseDownActiveData(e,n,(function(o){var r,c={width:t._chartContentSize.contentRight,height:t._paneContentSize[T.CANDLE_STICK_PANE_TAG].contentBottom-t._paneContentSize[T.CANDLE_STICK_PANE_TAG].contentTop};switch(e){case m.GraphicMarkType.PRICE_CHANNEL_LINE:r=(0,f.getParallelLines)(o,c,!0);break;case m.GraphicMarkType.PARALLEL_STRAIGHT_LINE:r=(0,f.getParallelLines)(o,c);break;case m.GraphicMarkType.FIBONACCI_LINE:r=(0,f.getFibonacciLines)(o,c)}var h=!1;if(r)for(var l=0;l<r.length;l++){var _=r[l];if(h=(0,f.checkPointOnStraightLine)(_[0],_[1],n))return h}return h})))return{v:void 0}}},i=0;i<o.length;i++){var c=r(i);if("object"===(0,l.default)(c))return c.v}}},{key:"_realFindNoneGraphicMarkMouseDownActiveData",value:function(e,t,n){var o=this,r=this._chartData.graphicMarkData()[e],c=this._chartData.styleOptions().graphicMark;return r.forEach((function(data,r){var h=data.points,l=[],_=!1,v=-1;h.forEach((function(p,i){var e=o._xAxis.convertToPixel(p.xPos),n=o._yAxis.convertToPixel(p.price);l.push({x:e,y:n});var r=(0,f.checkPointOnCircle)({x:e,y:n},c.point.radius,t);r&&(v=i),_||(_=r)}));var d=n(l,t);if(d||_)return o._noneGraphicMarkMouseDownActiveData={markKey:e,dataIndex:r,onLine:d,onCircle:_,pointIndex:v},!0})),!1}},{key:"mouseMoveEvent",value:function(e){if(this._checkEventPointX(e.localX)&&this._checkEventPointY(e.localY)){var t={x:e.localX,y:e.localY};if(this._chartData.setGraphicMarkPoint(t),!this._waitingForMouseMoveAnimationFrame){this._waitingForMouseMoveAnimationFrame=!0;var n=this._chartData.graphicMarkType();switch(n){case m.GraphicMarkType.HORIZONTAL_STRAIGHT_LINE:case m.GraphicMarkType.VERTICAL_STRAIGHT_LINE:case m.GraphicMarkType.PRICE_LINE:this._onePointGraphicMarkMouseMove(t,n);break;case m.GraphicMarkType.STRAIGHT_LINE:case m.GraphicMarkType.RAY_LINE:case m.GraphicMarkType.SEGMENT_LINE:case m.GraphicMarkType.FIBONACCI_LINE:this._twoPointGraphicMarkMouseMove(t,n);break;case m.GraphicMarkType.HORIZONTAL_RAY_LINE:case m.GraphicMarkType.HORIZONTAL_SEGMENT_LINE:this._twoPointGraphicMarkMouseMove(t,n,(function(e,t){var n=t.price;e.points[0].price=n}));break;case m.GraphicMarkType.VERTICAL_RAY_LINE:case m.GraphicMarkType.VERTICAL_SEGMENT_LINE:this._twoPointGraphicMarkMouseMove(t,n,(function(e,t){var n=t.xPos;e.points[0].xPos=n}));break;case m.GraphicMarkType.PRICE_CHANNEL_LINE:case m.GraphicMarkType.PARALLEL_STRAIGHT_LINE:this._threePointGraphicMarkMouseMove(t,n);break;case m.GraphicMarkType.NONE:this._chartData.setGraphicMarkData(this._chartData.graphicMarkData())}this._waitingForMouseMoveAnimationFrame=!1}}}},{key:"pressedMouseMoveEvent",value:function(e){var t=this._noneGraphicMarkMouseDownActiveData.markKey,n=this._noneGraphicMarkMouseDownActiveData.dataIndex;if(t&&-1!==n){var o=this._chartData.graphicMarkData(),r=o[t],c={x:e.localX,y:e.localY};switch(t){case m.GraphicMarkType.HORIZONTAL_STRAIGHT_LINE:case m.GraphicMarkType.VERTICAL_STRAIGHT_LINE:case m.GraphicMarkType.PRICE_LINE:case m.GraphicMarkType.STRAIGHT_LINE:case m.GraphicMarkType.RAY_LINE:case m.GraphicMarkType.SEGMENT_LINE:case m.GraphicMarkType.PRICE_CHANNEL_LINE:case m.GraphicMarkType.PARALLEL_STRAIGHT_LINE:case m.GraphicMarkType.FIBONACCI_LINE:var h=this._noneGraphicMarkMouseDownActiveData.pointIndex;-1!==h&&(r[n].points[h].xPos=this._xAxis.convertFromPixel(c.x),r[n].points[h].price=this._yAxis.convertFromPixel(c.y));break;case m.GraphicMarkType.HORIZONTAL_RAY_LINE:case m.GraphicMarkType.HORIZONTAL_SEGMENT_LINE:var l=this._noneGraphicMarkMouseDownActiveData.pointIndex;if(-1!==l){var _=this._yAxis.convertFromPixel(c.y);r[n].points[l].xPos=this._xAxis.convertFromPixel(c.x),r[n].points[0].price=_,r[n].points[1].price=_}break;case m.GraphicMarkType.VERTICAL_RAY_LINE:case m.GraphicMarkType.VERTICAL_SEGMENT_LINE:var v=this._noneGraphicMarkMouseDownActiveData.pointIndex;if(-1!==v){var d=this._xAxis.convertFromPixel(c.x);r[n].points[0].xPos=d,r[n].points[1].xPos=d,r[n].points[v].price=this._yAxis.convertFromPixel(c.y)}}o[t]=r,this._chartData.setGraphicMarkPoint({x:e.localX,y:e.localY}),this._chartData.setGraphicMarkData(o)}}},{key:"_onePointGraphicMarkMouseMove",value:function(e,t){var n=this;this._graphicMarkMouseMove(e,t,(function(t,o){var r=n._xAxis.convertFromPixel(e.x),c=n._yAxis.convertFromPixel(e.y);switch(o.drawStep){case D.STEP_DONE:t.push({points:[{xPos:r,price:c}],drawStep:D.STEP_1});break;case D.STEP_1:case D.STEP_2:o.points[0].xPos=r,o.points[0].price=c,t[t.length-1]=o}}))}},{key:"_twoPointGraphicMarkMouseMove",value:function(e,t,n){var o=this;this._graphicMarkMouseMove(e,t,(function(t,r){var c=o._xAxis.convertFromPixel(e.x),h=o._yAxis.convertFromPixel(e.y);switch(r.drawStep){case D.STEP_DONE:t.push({points:[{xPos:c,price:h},{xPos:c,price:h}],drawStep:D.STEP_1});break;case D.STEP_1:r.points[0]={xPos:c,price:h},r.points[1]={xPos:c,price:h},t[t.length-1]=r;break;case D.STEP_2:r.points[1]={xPos:c,price:h},(0,M.isFunction)(n)&&n(r,{xPos:c,price:h}),t[t.length-1]=r}}))}},{key:"_threePointGraphicMarkMouseMove",value:function(e,t,n){var o=this;this._graphicMarkMouseMove(e,t,(function(t,r){var c=o._xAxis.convertFromPixel(e.x),h=o._yAxis.convertFromPixel(e.y);switch(r.drawStep){case D.STEP_DONE:t.push({points:[{xPos:c,price:h},{xPos:c,price:h}],drawStep:D.STEP_1});break;case D.STEP_1:r.points[0]={xPos:c,price:h},r.points[1]={xPos:c,price:h},t[t.length-1]=r;break;case D.STEP_2:(0,M.isFunction)(n)&&n(r,{xPos:c,price:h}),r.points[1]={xPos:c,price:h},t[t.length-1]=r;break;case D.STEP_3:r.points[2]={xPos:c,price:h},t[t.length-1]=r}}))}},{key:"_graphicMarkMouseMove",value:function(e,t,n){var o=this._chartData.graphicMarkData(),r=o[t];n(r,r[r.length-1]||{drawStep:D.STEP_DONE}),o[t]=r,this._chartData.setGraphicMarkData(o)}},{key:"_checkEventPointY",value:function(e){var t=this._paneContentSize[T.CANDLE_STICK_PANE_TAG];return e>t.contentTop&&e<t.contentBottom}}]),n}(y.default);t.default=L}}]);
//# sourceMappingURL=18e954d849c074b196b6.js.map