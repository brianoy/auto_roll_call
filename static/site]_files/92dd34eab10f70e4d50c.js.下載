(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{1391:function(e,t,r){"use strict";r(0)(t,"__esModule",{value:!0}),t.default=void 0;var _=r(96),n=r(419),c={calValue:function(e,t,r,c){return t.isZero()?new _.Decimal(0):e.times(r).times(t).toDP(n.SERVER_CAL_PLACE,c?_.Decimal.ROUND_UP:_.Decimal.ROUND_DOWN)},getProfits:function(e,t,r,c,l){if(t.isZero()||c.isZero())return new _.Decimal(0);var E,D=t.times(r),o=l.comparedTo(c);return 0===o?new _.Decimal(0):(e===n.HoldSideEnum.LONG_POSITIONS?(E=D.times(c).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_DOWN).sub(D.times(l).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP)),o<0&&(E=_.Decimal.max(E,new _.Decimal(0)))):(E=D.times(l).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_DOWN).sub(D.times(c).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP)),o>0&&(E=_.Decimal.max(E,new _.Decimal(0)))),E)},calMaxOpenContractCount:function(e,t,r,c,l,E,D,o,d,R){if(E.isZero()||t.isZero())return new _.Decimal(0);var m,P=o.sub(d).sub(R);if(m=e.div(c.add(1).div(E).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP).add(r.times(l.add(1))).times(D).times(t)).toDP(0,_.Decimal.ROUND_DOWN),P.isNaN())return new _.Decimal(0);if(P.isNegative())return new _.Decimal(0);var T=_.Decimal.max(_.Decimal.min(m,P),new _.Decimal(0));return T.isNaN()?new _.Decimal(0):T},calMarginCount:function(e,t,r,c){return r.isZero()||c.isZero()?new _.Decimal(0):e.times(t).times(r).div(c).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP)},calReducePrice:function(e,t,r,c,l,E,D){var o;return o=e===n.HoldSideEnum.LONG_POSITIONS?_.Decimal.max(E,new _.Decimal(0)):_.Decimal.min(E,new _.Decimal(0)),this.calPrice(e,t,r,c,o,l,D)},calPrice:function(e,t,r,c,l,E,D){if(c.isZero())return new _.Decimal(0);if(E.greaterThanOrEqualTo(new _.Decimal(1)))return r;var o=e===n.HoldSideEnum.SHORT_POSITIONS,d=this.calValue(c,r,D,o);return o?d.times(new _.Decimal(1).add(l)).add(t).div(D.times(c).times(new _.Decimal(1).add(E))).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_DOWN):d.times(new _.Decimal(1).add(l)).sub(t).div(D.times(c).times(new _.Decimal(1).sub(E))).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP)},calBankruptcyPrice:function(e,t,r,n,c){return this.calPrice(e,n,r,t,new _.Decimal(0),new _.Decimal(0),c)},calMarginRate:function(e,t,r,c,l){return t.add(l).div(e.times(r).times(c)).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_DOWN)},calClosePrice:function(e,t,r,c,l){if(r.isZero())return new _.Decimal(0);var E=t.times(c).times(r).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP);return e===n.HoldSideEnum.LONG_POSITIONS?E.toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP).add(l).div(t.times(c)).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_DOWN):l.greaterThan(E)?new _.Decimal(0):E.toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP).sub(l).div(t.times(c)).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP)}};t.default=c},1392:function(e,t,r){"use strict";r(0)(t,"__esModule",{value:!0}),t.default=void 0;var _=r(96),n=r(419),c={calValue:function(e,t,r,c){return t.isZero()?new _.Decimal(0):e.times(r).div(t).toDP(n.SERVER_CAL_PLACE,c?_.Decimal.ROUND_UP:_.Decimal.ROUND_DOWN)},getProfits:function(e,t,r,c,l){if(t.isZero()||c.isZero())return new _.Decimal(0);var E,D=t.times(r),o=l.comparedTo(c);return 0===o?new _.Decimal(0):(e===n.HoldSideEnum.LONG_POSITIONS?(E=D.div(l).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_DOWN).sub(D.div(c).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP)),o<0&&(E=_.Decimal.max(E,new _.Decimal(0)))):(E=D.div(c).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_DOWN).sub(D.div(l).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP)),o>0&&(E=_.Decimal.max(E,new _.Decimal(0)))),E)},calMaxOpenContractCount:function(e,t,r,c,l,E,D,o,d,R){if(E.isZero()||t.isZero())return new _.Decimal(0);var m,P=o.sub(d).sub(R);if(m=e.times(t).div(c.add(1).div(E).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP).add(r.times(l.add(1))).times(D)).toDP(0,_.Decimal.ROUND_DOWN),P.isNaN())return new _.Decimal(0);if(P.isNegative())return new _.Decimal(0);var T=_.Decimal.max(_.Decimal.min(m,P),new _.Decimal(0));return T.isNaN()?new _.Decimal(0):T},calMarginCount:function(e,t,r,c){return r.isZero()||c.isZero()?new _.Decimal(0):e.times(t).div(r.times(c)).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP)},calReducePrice:function(e,t,r,c,l,E,D){var o;return o=e===n.HoldSideEnum.LONG_POSITIONS?l.add(_.Decimal.max(E,new _.Decimal(0))):l.add(_.Decimal.min(E,new _.Decimal(0))),this.calPrice(e,t,r,c,o,D,l)},calPrice:function(e,t,r,c,l,E,D){if(c.isZero())return new _.Decimal(0);var o=e===n.HoldSideEnum.SHORT_POSITIONS,d=this.calValue(c,r,E,o);if(o){var R=d.sub(t);return c.times(E).times(new _.Decimal(1).sub(l)).div(R).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_DOWN)}var m=d.add(t);return c.times(E).times(new _.Decimal(1).add(l)).div(m).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP)},calBankruptcyPrice:function(e,t,r,n,c){return this.calPrice(e,n,r,t,new _.Decimal(0),c,new _.Decimal(0))},calMarginRate:function(e,t,r,c,l){return t.add(l).times(c).div(e.times(r)).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_DOWN)},calClosePrice:function(e,t,r,c,l){if(r.isZero())return new _.Decimal(0);var E=t.times(c).div(r).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP);return e===n.HoldSideEnum.LONG_POSITIONS?l.greaterThan(E)?new _.Decimal(0):t.times(c).div(t.times(c).div(r).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP).sub(l)).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_DOWN):t.times(c).div(t.times(c).div(r).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP).add(l)).toDP(n.SERVER_CAL_PLACE,_.Decimal.ROUND_UP)}};t.default=c},419:function(e,t,r){"use strict";var _=r(0),n=r(1);_(t,"__esModule",{value:!0}),t.SERVER_CAL_PLACE=t.HoldSideEnum=void 0;var c=(0,n(r(831)).default)({LONG_POSITIONS:1,SHORT_POSITIONS:2});t.HoldSideEnum=c;t.SERVER_CAL_PLACE=12},595:function(e,t,r){"use strict";var _=r(0),n=r(1);_(t,"__esModule",{value:!0}),t.createDefaultStrategy=function(){var e;return e={},(0,E.default)(e,D.STRATEGY_ATTRIBUTE,2),(0,E.default)(e,D.GRID_TYPE,1),(0,E.default)(e,D.STRATEGY_NUM,""),(0,E.default)(e,D.UP_LIMIT_PRICE,""),(0,E.default)(e,D.DOWN_LIMIT_PRICE,""),(0,E.default)(e,D.TOKEN_BASE_INVEST_AMOUNT,""),(0,E.default)(e,D.TOKEN_QUOTE_INVEST_AMOUNT,""),(0,E.default)(e,D.STRATEGY_MODEL,1),(0,E.default)(e,D.STRATEGY_TRIGGER_PRICE,""),(0,E.default)(e,D.STRATEGY_MODEL_GRADE,0),(0,E.default)(e,D.STRATEGY_TAKE_PROFIT_PRICE,""),(0,E.default)(e,D.STRATEGY_STOP_PRICE,""),(0,E.default)(e,D.END_OPERATE,1),e},t.extractConfirmParam=function(param){var e={};return[D.STRATEGY_NUM,D.UP_LIMIT_PRICE,D.DOWN_LIMIT_PRICE,D.INVEST_TOKENS,D.STRATEGY_MODEL,D.STRATEGY_TRIGGER_PRICE,D.GRID_TYPE,D.LEVERAGE,D.MARGIN_MODE].forEach((function(t){param.hasOwnProperty(t)&&(e[t]=param[t])})),e},t.createStrategyFromHistory=function(e){var t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_=(0,E.default)({},D.STRATEGY_ATTRIBUTE,2),n=[D.STRATEGY_NUM,D.UP_LIMIT_PRICE,D.DOWN_LIMIT_PRICE,D.TOKEN_BASE_INVEST_AMOUNT,D.TOKEN_QUOTE_INVEST_AMOUNT,D.STRATEGY_MODEL,D.STRATEGY_TRIGGER_PRICE,D.GRID_TYPE],c=+e[D.TOKEN_BASE_INVEST_AMOUNT]?2:1,o=(0,l.default)(e,_,(t={},(0,E.default)(t,D.TOKEN_BASE_INVEST_AMOUNT,""),(0,E.default)(t,D.TOKEN_QUOTE_INVEST_AMOUNT,""),(0,E.default)(t,"bitMode",c),t));return r?(n.forEach((function(t){e.hasOwnProperty(t)&&(_[t]=e[t])})),_):o},t.transferAIParamsToNormalStrategy=function(e){var t,r=D.DOWN_LIMIT_PRICE,_=D.UP_LIMIT_PRICE;return t={},(0,E.default)(t,r,e.downLimitPrice),(0,E.default)(t,_,e.upLimitPrice),(0,E.default)(t,D.STRATEGY_NUM,e.strategyNum),t},t.getBusinessLineCode=function(e){switch(e){case d.SPOT_BL:return"spbl";case d.USDT_MIX_CONTRACT_BL:return"umcbl";case d.USD_MIX_CONTRACT_BL:return"dmcbl";default:return""}},t.getBusinessLineInstType=function(e){switch(e){case d.SPOT_BL:return"sp";case d.USDT_MIX_CONTRACT_BL:case d.USD_MIX_CONTRACT_BL:return"mc";default:return""}},t.BusinessLineToLink=t.BusinessLineEnum=t.OptionalFields=t.STRATEGY_ENTITY_KEYS=t.StrategyModelLocaleKey=t.StrategyStopReason=t.StrategyTypeLocaleKey=t.StrategyStatusLocaleKey=t.strategyStatus=t.strategyTypes=void 0;var c,l=n(r(28)),E=n(r(4));r(156);t.strategyTypes={1:"网格策略",2:"反向网络",3:"无线网络"};t.strategyStatus={1:"待启动",2:"初始化",3:"运行中",4:"终止",6:"运行中",8:"已终止"};t.StrategyStatusLocaleKey={1:"strategy_grid_text.strategy_status_text_1",5:"strategy_grid_text.strategy_status_text_3",6:"strategy_grid_text.overing",8:"strategy_grid_text.strategy_status_text_8"};t.StrategyTypeLocaleKey={1:"strategy_grid_text.grid_strategy_title",11:"strategy_grid_text.forward_grid",101:"strategy_grid_text.contract_long_grid"};t.StrategyStopReason={1:"strategy_grid_text.termination_by_insufficient_balance",2:"strategy_grid_text.manual_termination",3:"strategy_grid_text.take_profit_termination",4:"strategy_grid_text.take_stop_termination",6:"strategy_grid_text.termination_by_manual_cancel",7:"trade.plan.fail_reason_20003"};t.StrategyModelLocaleKey={1:"strategy_grid_text.equidistant_interval",2:"strategy_grid_text.equal_interval"};var D={STRATEGY_NUM:"strategyNum",UP_LIMIT_PRICE:"strategyMaxPrice",DOWN_LIMIT_PRICE:"strategyMinPrice",TOKEN_BASE_INVEST_AMOUNT:"tokenBaseInvestAmount",TOKEN_QUOTE_INVEST_AMOUNT:"tokenQuoteInvestAmount",STRATEGY_MODEL:"strategyModel",STRATEGY_TRIGGER_PRICE:"triggerPrice",STRATEGY_ATTRIBUTE:"strategyAttribute",STRATEGY_MODEL_GRADE:"strategyModelGrade",STRATEGY_TAKE_PROFIT_PRICE:"stopProfitPrice",STRATEGY_STOP_PRICE:"stopLossPrice",GRID_TYPE:"gridType",INVEST_TOKENS:"investTokens",END_OPERATE:"endOperate",TOKEN_ID:"tokenId",MARGIN_MODE:"marginMode",LEVERAGE:"leverage"};t.STRATEGY_ENTITY_KEYS=D;var o=[D.STRATEGY_TRIGGER_PRICE,D.STRATEGY_TAKE_PROFIT_PRICE,D.STRATEGY_STOP_PRICE];t.OptionalFields=o;var d={SPOT_BL:1,CONTRACT_BL:2,MIX_CONTRACT_BL:3,OPTION_BL:4,OTC_BL:5,FINANCIAL_BL:6,SPOT_MIX_CONTRACT:7,S_USDT_MIX_CONTRACT_BL:8,S_USD_MIX_CONTRACT_BL:9,USDT_MIX_CONTRACT_BL:10,USD_MIX_CONTRACT_BL:11};t.BusinessLineEnum=d;var R=(c={},(0,E.default)(c,d.S_USDT_MIX_CONTRACT_BL,"susdt"),(0,E.default)(c,d.S_USD_MIX_CONTRACT_BL,"susd"),(0,E.default)(c,d.USDT_MIX_CONTRACT_BL,"usdt"),(0,E.default)(c,d.USD_MIX_CONTRACT_BL,"usd"),c);t.BusinessLineToLink=R},601:function(e,t,r){"use strict";var _=r(0),n=r(1);_(t,"__esModule",{value:!0}),t.getProfits=function(e,t,r,_,n){var c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return c?D.default.getProfits(e,t,r,_,n):E.default.getProfits(e,t,r,_,n)},t.calMarginRate=function(e,t,r,_,n){var c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return c?D.default.calMarginRate(e,t,r,_,n):E.default.calMarginRate(e,t,r,_,n)},t.calBankruptcyPrice=function(e,t,r,_,n){var c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return c?D.default.calBankruptcyPrice(e,t,r,_,n):E.default.calBankruptcyPrice(e,t,r,_,n)},t.calMarginCount=function(e,t,r,_){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return n?D.default.calMarginCount(e,t,r,_):E.default.calMarginCount(e,t,r,_)},t.calOpenPositionCost=function(e,t,r,_,n,E,D){var o=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];if(_.isZero()||r.isZero())return new c.Decimal(0);var d=R(e,r,t,o);return d.div(_).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_UP).times(E.add(1)).add(d.times(n).times(D.add(1))).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_UP)},t.calMaxOpenContractCount=function(e,t,r,_,n,c,l,o,d,R){var m=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];return m?D.default.calMaxOpenContractCount(e,t,r,_,n,c,l,o,d,R):E.default.calMaxOpenContractCount(e,t,r,_,n,c,l,o,d,R)},t.calPerLeverProfit=function(e,t,r,_){return e===l.HoldSideEnum.LONG_POSITIONS&&r.greaterThan(t)||e===l.HoldSideEnum.SHORT_POSITIONS&&t.greaterThan(r)?t.sub(r).times(t).div(r.times(t.sub(_))).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_HALF_UP):t.sub(r).times(t.sub(_)).div(r.times(t)).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_HALF_UP)},t.calValue=R,t.calReducePrice=function(e,t,r,_,n,c,l){var o=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];return o?D.default.calReducePrice(e,t,r,_,n,c,l):E.default.calReducePrice(e,t,r,_,n,c,l)},t.calMaxBuyPrice=function(e,t,r,_,n){var l;switch(e){case 1:l=n.isZero()?r:n;break;case 2:l=t.isZero()?r:t;break;case 3:default:l=c.Decimal.max(r,t,n)}return l.times(new c.Decimal(1).add(_))},t.calMinSellPrice=function(e,t,r,_,n){var l;switch(e){case 1:l=n.isZero()?r:n;break;case 2:l=t.isZero()?r:t;break;case 3:default:l=c.Decimal.min(r,t,n.isZero()?r:n)}return l.times(new c.Decimal(1).sub(_))},t.calClosePrice=function(e,t,r,_,n){var c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return c?D.default.calClosePrice(e,t,r,_,n):E.default.calClosePrice(e,t,r,_,n)},t.calPerLeverProfitICM=function(e,t,r,_,n,E,D,d){if(t.isZero())return new c.Decimal(0);var m,P=R(t,D,E,d,!0),T=R(t,e,E,d,!0),O=r.sub(_),A=P.div(P.sub(T)).toDP(12,c.Decimal.ROUND_HALF_UP).abs(),C=P.sub(O).div(O.abs()).toDP(12,c.Decimal.ROUND_HALF_UP);d&&(C=O.sub(P).div(O.abs()).toDP(12,c.Decimal.ROUND_HALF_UP));m=C.comparedTo(o)>0?C.times(A).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_HALF_UP):C.div(A).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_HALF_UP);return m},t.calRiskPriceICM=function(e,t,r,_,n,E,D,d,R){var m,P=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],T=n,O=e.sub(_);if(P){var A=O.add(t).sub(r).sub(R.times(T)),C=d.times(E.times(T).add(D)).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_UP);m=C.div(A).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_UP)}else{var S=O.sub(t).add(r).sub(R.times(T)),L=d.times(E.times(T).sub(D)).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_UP);m=S.div(L).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_UP)}if(m.comparedTo(o)<=0){var N=D.comparedTo(o);m=N>0?new c.Decimal("0.000000000001"):N<0?new c.Decimal("99999999999.99"):new c.Decimal(0)}return m},t.calEquityICM=function(e,t,r,_,n,c){var l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],E=e.add(t).add(r).add(_);return l?E.add(n).add(c):E},t.calDelegatePVICM=function(e,t){return e.times(t).toDP(l.SERVER_CAL_PLACE)},t.calRealCapitalFeeICM=function(e,t,r,_,n){var E=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];E&&(e=e.isZero()?o:d.div(e).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_UP),t=t.isZero()?o:d.div(t).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_UP));var D=c.Decimal.max(o,r).times(_.times(n).times(e)).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_UP),R=c.Decimal.min(o,r).times(_.times(n).times(t)).toDP(l.SERVER_CAL_PLACE,c.Decimal.ROUND_UP);return D.add(R)},t.calNetHoldCount=function(e,t,r,_,n){return n?e.add(r).sub(t.add(_)):e.sub(t)},_(t,"HoldSideEnum",{enumerable:!0,get:function(){return l.HoldSideEnum}});var c=r(96),l=r(419),E=n(r(1391)),D=n(r(1392)),o=new c.Decimal(0),d=new c.Decimal(1);function R(e,t,r){var _=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return _?D.default.calValue(e,t,r,n):E.default.calValue(e,t,r,n)}}}]);
//# sourceMappingURL=92dd34eab10f70e4d50c.js.map