(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{1061:function(t,e,n){"use strict";n.r(e);var r=n(585),o=n(301);for(var l in o)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(l);n(1301);var c=n(2),component=Object(c.a)(o.default,r.a,r.b,!1,null,"b7f92ce0",null);e.default=component.exports},1062:function(t,e,n){"use strict";n.r(e);var r=n(586),o=n(303);for(var l in o)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(l);n(1303);var c=n(2),component=Object(c.a)(o.default,r.a,r.b,!1,null,null,null);e.default=component.exports},1300:function(t,e,n){"use strict";n.r(e);var r=n(588),o=n(297);for(var l in o)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(l);n(1304);var c=n(2),component=Object(c.a)(o.default,r.a,r.b,!1,null,null,null);e.default=component.exports},1301:function(t,e,n){"use strict";n(770)},1302:function(t,e,n){"use strict";n(771)},1303:function(t,e,n){"use strict";n(772)},1304:function(t,e,n){"use strict";n(773)},1320:function(t,e,n){"use strict";n.r(e);var r=n(551),o=n(315);for(var l in o)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(l);n(1323);var c=n(2),component=Object(c.a)(o.default,r.a,r.b,!1,null,"d0676dac",null);e.default=component.exports},1321:function(t,e,n){"use strict";n.r(e);var r=n(587),o=n(317);for(var l in o)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(l);n(1322);var c=n(2),component=Object(c.a)(o.default,r.a,r.b,!1,null,"d88adeea",null);e.default=component.exports},1322:function(t,e,n){"use strict";n(781)},1323:function(t,e,n){"use strict";n(782)},297:function(t,e,n){"use strict";n.r(e);var r=n(298),o=n.n(r);for(var l in r)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},298:function(t,e,n){"use strict";var r=n(6),o=n(7),l=n(5),c=n(8),d=n(9),f=n(0),h=n(1);f(e,"__esModule",{value:!0}),e.default=void 0;var v=h(n(4)),m=n(153),_=h(n(676)),C=h(n(1062)),I=h(n(668)),y=n(12),D=n(418);function $(object,t){var e=r(object);if(o){var n=o(object);t&&(n=n.filter((function(t){return l(object,t).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?$(Object(source),!0).forEach((function(e){(0,v.default)(t,e,source[e])})):c?d(t,c(source)):$(Object(source)).forEach((function(e){f(t,e,l(source,e))}))}return t}var L={name:"InmailHeaderMenu",components:{PageBody:_.default,PageHeader:C.default},computed:O(O({},(0,y.mapState)(["theme"])),(0,y.mapGetters)(["isLogin","getLang"])),data:function(){return{list:[],total:0,loading:!1,intervalId:null}},mounted:function(){var t=this;this.intervalId&&clearInterval(this.intervalId),window.isReadyPromise.then((function(){t.intervalId=setInterval((function(){t.getData()}),3e5),t.getData()})),(0,I.default)().$on("page-read-all",this.getData),(0,I.default)().$on("page-read",this.getData)},watch:{isLogin:function(t){this.getData()}},beforeDestroy:function(){this.intervalId&&clearInterval(this.intervalId),(0,I.default)().$off("page-read-all",this.getData),(0,I.default)().$off("page-read",this.getData)},methods:{goList:function(){this.$emit("closeDrawer"),this.$router.push(this.$i18n.path("inmail"))},getData:function(){var t=this;this.loading=!0,(0,m.listAll)({isPre:!1,pageSize:10}).then((function(data){if("00000"===data.code&&data.data&&data.data.items){if(!t.isLogin){var e=0;data.data.items.forEach((function(t){t.readStats=(0,D.isExitByLocalInmailId)(t.id),t.readStats||(e+=1)})),data.data.unreadCount=e}t.list=data.data.items,t.total=data.data.unreadCount}})).finally((function(){t.loading=!1}))},handleReadAll:function(){this.total=0,this.getData(),(0,I.default)().$emit("header-read-all")},handleRead:function(){this.total>0&&this.total--,(0,I.default)().$emit("header-read")}}};e.default=L},299:function(t,e,n){"use strict";n.r(e);var r=n(300),o=n.n(r);for(var l in r)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},300:function(t,e,n){"use strict";var r=n(6),o=n(7),l=n(5),c=n(8),d=n(9),f=n(0),h=n(1);f(e,"__esModule",{value:!0}),e.default=void 0;var v=h(n(4)),m=n(153),_=h(n(1061)),C=n(12);function I(object,t){var e=r(object);if(o){var n=o(object);t&&(n=n.filter((function(t){return l(object,t).enumerable}))),e.push.apply(e,n)}return e}var y={name:"PageBody",components:{MailBlock:_.default},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(Object(source),!0).forEach((function(e){(0,v.default)(t,e,source[e])})):c?d(t,c(source)):I(Object(source)).forEach((function(e){f(t,e,l(source,e))}))}return t}({},(0,C.mapGetters)(["isLogin"])),props:{mails:{type:Array,default:function(){return[]}},loading:Boolean},methods:{handleRead:function(t){var e=this,n=this.mails.find((function(e){return e.id===t}));if(!this.isLogin)return n.readStats=!0,void this.$emit("read");n.readStats||(0,m.updateReadStates)(t).then((function(data){"00000"===data.code&&e.$nextTick((function(){n.readStats=!0,e.$emit("read")}))}))}}};e.default=y},301:function(t,e,n){"use strict";n.r(e);var r=n(302),o=n.n(r);for(var l in r)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},302:function(t,e,n){"use strict";var r=n(6),o=n(7),l=n(5),c=n(8),d=n(9),f=n(0),h=n(1);f(e,"__esModule",{value:!0}),e.default=void 0;var v=h(n(4)),m=n(418),_=n(12);function C(object,t){var e=r(object);if(o){var n=o(object);t&&(n=n.filter((function(t){return l(object,t).enumerable}))),e.push.apply(e,n)}return e}var I={name:"MailBlock",props:{mail:{type:Object,default:function(){return{id:0,content:"",title:"",sendTime:"",readStats:!1}}}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){(0,v.default)(t,e,source[e])})):c?d(t,c(source)):C(Object(source)).forEach((function(e){f(t,e,l(source,e))}))}return t}({},(0,_.mapGetters)(["isLogin"])),data:function(){return{fold:!0}},methods:{handleRead:function(){this.isLogin||(0,m.localReadSaveById)(this.mail.id),this.fold&&this.$emit("read",this.mail.id),this.fold=!this.fold}}};e.default=I},303:function(t,e,n){"use strict";n.r(e);var r=n(304),o=n.n(r);for(var l in r)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},304:function(t,e,n){"use strict";var r=n(6),o=n(7),l=n(5),c=n(8),d=n(9),f=n(0),h=n(1);f(e,"__esModule",{value:!0}),e.default=void 0;var v=h(n(4)),m=n(153),_=n(12);function C(object,t){var e=r(object);if(o){var n=o(object);t&&(n=n.filter((function(t){return l(object,t).enumerable}))),e.push.apply(e,n)}return e}var I={name:"PageHeader",props:{businessTypeDesc:String,total:Number},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){(0,v.default)(t,e,source[e])})):c?d(t,c(source)):C(Object(source)).forEach((function(e){f(t,e,l(source,e))}))}return t}({},(0,_.mapGetters)(["isLogin"])),methods:{readAll:function(){var t=this;0!=this.total&&(0,m.updateAllReadStatus)().then((function(data){"00000"===data.code&&(console.log(">>>全部已读"),t.$emit("read-all"))}))}},filters:{toShort:function(t){return t?t>99?"99+":""+t:"0"}}};e.default=I},315:function(t,e,n){"use strict";n.r(e);var r=n(316),o=n.n(r);for(var l in r)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},316:function(t,e,n){"use strict";var r=n(6),o=n(7),l=n(5),c=n(8),d=n(9),f=n(0),h=n(1);f(e,"__esModule",{value:!0}),e.default=void 0;var v=h(n(39)),m=h(n(4)),_=n(153),C=h(n(676)),I=h(n(1321)),y=h(n(668)),D=n(12),$=n(418);function O(object,t){var e=r(object);if(o){var n=o(object);t&&(n=n.filter((function(t){return l(object,t).enumerable}))),e.push.apply(e,n)}return e}function L(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){(0,m.default)(t,e,source[e])})):c?d(t,c(source)):O(Object(source)).forEach((function(e){f(t,e,l(source,e))}))}return t}var S={name:"InmailHeaderMenu",components:{PageBody:C.default,HomePageHeader:I.default},computed:L(L(L({},(0,D.mapState)(["theme"])),(0,D.mapGetters)(["isLogin","getLang"])),{},{headerData:function(){return[{businessTypeDesc:this.$t("links.notice"),code:2,unReadCount:this.noticeUnreadeCount},{businessTypeDesc:this.$t("user_preference.notification_sub_title"),code:1,unReadCount:this.informUnreadeCount}]}}),data:function(){return{list:[],total:0,loading:!1,intervalId:null,currentInmailCode:2,informData:[],noticeData:[],informUnreadeCount:0,noticeUnreadeCount:0}},mounted:function(){var t=this;this.intervalId&&clearInterval(this.intervalId),window.isReadyPromise.then((function(){t.intervalId=setInterval((function(){t.getData()}),3e5),t.getData()})),(0,y.default)().$on("page-read-all",this.getData),(0,y.default)().$on("page-read",this.getData)},watch:{isLogin:function(){this.getData()}},beforeDestroy:function(){this.intervalId&&clearInterval(this.intervalId),(0,y.default)().$off("page-read-all",this.getData),(0,y.default)().$off("page-read",this.getData)},methods:{goList:function(){this.$router.push(this.$i18n.path("inmail"))},getData:function(){var t=this;this.loading=!0,(0,_.listAll)({isPre:!1,pageSize:20}).then((function(data){if("00000"===data.code&&data.data&&data.data.items){if(!t.isLogin){var e=0;data.data.items.forEach((function(t){t.readStats=(0,$.isExitByLocalInmailId)(t.id),t.readStats||(e+=1)})),data.data.unreadCount=e}t.handleResData(data.data.items),t.list=1===t.currentInmailCode?t.informData:t.noticeData,t.total=data.data.unreadCount}else t.handleInitData(),t.list=[],t.total=0})).finally((function(){t.loading=!1})),this.getUnreadCount()},handleResData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.handleInitData(),e.length>0&&e.forEach((function(e){[0,3,4,5,6].includes(e.businessType)?t.informData.push(e):[1,2].includes(e.businessType)&&t.noticeData.push(e)}))},getUnreadCount:function(){var t=this;(0,_.unreadCount)().then((function(e){(t.informUnreadeCount=0,t.noticeUnreadeCount=0,"00000"===e.code&&(0,v.default)(e.data.subVOList))&&e.data.subVOList.forEach((function(e){1===e.businessType||2===e.businessType?t.informUnreadeCount+=e.unreadCount||0:t.noticeUnreadeCount+=e.unreadCount||0}))}))},handleInitData:function(){this.informData=[],this.noticeData=[]},handleReadAll:function(){this.total=0,this.getData(),(0,y.default)().$emit("header-read-all")},handleRead:function(){this.total>0&&this.total--,1===this.currentInmailCode&&this.informUnreadeCount>0?this.informUnreadeCount--:2===this.currentInmailCode&&this.noticeUnreadeCount>0&&this.noticeUnreadeCount--,(0,y.default)().$emit("header-read")},handleCheckInmail:function(code){this.currentInmailCode=code,this.list=1===this.currentInmailCode?this.informData:this.noticeData}}};e.default=S},317:function(t,e,n){"use strict";n.r(e);var r=n(318),o=n.n(r);for(var l in r)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},318:function(t,e,n){"use strict";var r=n(6),o=n(7),l=n(5),c=n(8),d=n(9),f=n(0),h=n(1);f(e,"__esModule",{value:!0}),e.default=void 0;var v=h(n(4)),m=n(153),_=n(12);function C(object,t){var e=r(object);if(o){var n=o(object);t&&(n=n.filter((function(t){return l(object,t).enumerable}))),e.push.apply(e,n)}return e}var I={name:"HomePageHeader",props:{headerData:Array,selectedItemCode:Number},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){(0,v.default)(t,e,source[e])})):c?d(t,c(source)):C(Object(source)).forEach((function(e){f(t,e,l(source,e))}))}return t}({},(0,_.mapGetters)(["isLogin"])),methods:{readAll:function(){var t=this;(0,m.updateAllReadStatus)().then((function(data){"00000"===data.code&&t.$emit("read-all")}))},handleChangeTitle:function(code){this.$emit("handleCheckInmail",code)}},filters:{toShort:function(t){return t?t>99?"99+":""+t:"0"}}};e.default=I},418:function(t,e,n){"use strict";var r=n(0),o=n(1);r(e,"__esModule",{value:!0}),e.isExitByLocalInmailId=e.getLocalReadLength=e.localReadSaveById=e.inmailStorageKey=void 0;var l=o(n(44)),c="bg:localstorage:inmail:read";e.inmailStorageKey=c;e.localReadSaveById=function(t){var e=JSON.parse(localStorage.getItem(c))||[],n=[];e?n=-1===e.indexOf(t)?e.concat([t]):e:n.push(t),localStorage.setItem(c,(0,l.default)(n))};e.getLocalReadLength=function(){return(JSON.parse(localStorage.getItem(c))||[]).length};e.isExitByLocalInmailId=function(t){return(JSON.parse(localStorage.getItem(c))||[]).some((function(e){return e===t}))}},551:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-box has-sub inmail-container",class:[t.theme]},[n("a",{class:[t.total>0?"unread-dot":""],attrs:{href:"javascript:;"},on:{click:t.goList}},[n("i",{staticClass:"iconfont icon-zhanlixin"})]),t._v(" "),n("div",{staticClass:"subnav-box inmail"},[n("div",{staticClass:"inmail-header-menu"},[n("home-page-header",{attrs:{headerData:t.headerData,selectedItemCode:t.currentInmailCode},on:{handleCheckInmail:t.handleCheckInmail,"read-all":t.handleReadAll}}),t._v(" "),n("div",{staticClass:"inmail-header-menu__body"},[n("page-body",{attrs:{mails:t.list,loading:t.loading},on:{read:t.handleRead}})],1),t._v(" "),n("div",{staticClass:"inmail-header-menu__footer"},[n("nuxt-link",{attrs:{to:t.$i18n.path("inmail")}},[t._v("\n                    "+t._s(t.$t("copy_trading.pc_have.remind_list_title"))+"\n                    "+t._s("ru"!==t.getLang?">":"")+"\n                ")])],1)],1)])])},o=[]},584:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("client-only",[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"inmail-page__main"},[t._l(t.mails,(function(e){return n("mail-block",{key:e.id,attrs:{id:e.id,mail:e},on:{read:t.handleRead}})})),t._v(" "),t.mails.length<=0?n("no-data"):t._e()],2)])},o=[]},585:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inmail-content__block",on:{click:t.handleRead}},[n("div",{staticClass:"inmail-content__block-title",class:t.mail.readStats?"read":"unread"},[n("p",{staticClass:"inmail-title"},[t._v(t._s(t.mail.title))])]),t._v(" "),n("div",{staticClass:"inmail-content_main"},[n("div",{staticClass:"inmail-content_left",class:[t.fold?"inmail-content__block-content-fold":"inmail-content__block-content-unfold"],domProps:{innerHTML:t._s(t.mail.content)}}),t._v(" "),n("div",{staticClass:"inmail-content_time_more"},[n("div",{staticClass:"inmail-content__block-time"},[t._v(t._s(t._f("moment")(t.mail.sendTime,"yyyy-MM-dd HH:mm:ss")))]),t._v(" "),t.mail.openUrl?n("a",{attrs:{href:t.mail.openUrl,target:"_blank"}},[t._v(t._s(t.$t("givingBft.text_look_detail")))]):t._e()])])])},o=[]},586:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inmail-page__title"},[n("p",[t._v("\n    "+t._s(t.businessTypeDesc)+"\n    "),t.isLogin?[t._v("("+t._s(t._f("toShort")(t.total))+")")]:t._e()],2),t._v(" "),t.isLogin?n("div",{staticClass:"inmail-page__title-op"},[n("span",{on:{click:t.readAll}},[t._v(t._s(t.$t("inmail.read_all")))])]):t._e()])},o=[]},587:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inmail-page__title"},[n("div",{staticClass:"inmail-page-title-content"},t._l(t.headerData,(function(e){return n("div",{key:e.code,staticClass:"inmail-page-title-item",class:t.selectedItemCode===e.code?"inmail-item-selected":"",on:{click:function(n){return t.handleChangeTitle(e.code)}}},[t._v("\n            "+t._s(e.businessTypeDesc)+"\n            "),t.isLogin&&e.unReadCount>0?[t._v("\n                ("+t._s(t._f("toShort")(e.unReadCount))+")\n            ")]:t._e()],2)})),0),t._v(" "),t.isLogin?n("div",{staticClass:"inmail-page__title-op"},[n("span",{on:{click:t.readAll}},[t._v(t._s(t.$t("inmail.read_all")))])]):t._e()])},o=[]},588:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list",class:[t.theme]},[n("div",{staticClass:"list-left"},[n("a",{attrs:{href:"javascript:;"},on:{click:t.goList}},[n("div",{staticClass:"list-content"},[n("span",[t._v(t._s(t.$t("links.message_notification")))]),t._v(" "),t.total>0?n("div",{staticClass:"circular"}):t._e()])])])])},o=[]},668:function(t,e,n){"use strict";var r=n(0),o=n(1);r(e,"__esModule",{value:!0}),e.default=void 0;var l,c=o(n(13));var d=function(){return l||(l=new c.default),l};e.default=d},676:function(t,e,n){"use strict";n.r(e);var r=n(584),o=n(299);for(var l in o)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(l);n(1302);var c=n(2),component=Object(c.a)(o.default,r.a,r.b,!1,null,null,null);e.default=component.exports},770:function(t,e,n){},771:function(t,e,n){},772:function(t,e,n){},773:function(t,e,n){},781:function(t,e,n){},782:function(t,e,n){}}]);
//# sourceMappingURL=907bc76e829c5fcd7acd.js.map